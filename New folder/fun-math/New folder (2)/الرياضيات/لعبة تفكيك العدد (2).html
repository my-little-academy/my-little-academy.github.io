<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„Ø¹Ø¨Ø© ØªÙÙƒÙŠÙƒ Ø§Ù„Ø¹Ø¯Ø¯ - Ø®Ø§Ù†Ø§Øª Ù…Ù†ÙØµÙ„Ø©</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #e0f7fa;
      padding: 30px;
      text-align: center;
    }
    h1 {
      color: #00796b;
    }
    .box {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 15px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      direction: rtl;
    }
    input, button, select {
      padding: 10px;
      font-size: 16px;
      margin: 10px auto;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 90%;
      display: block;
    }
    button {
      background-color: #00796b;
      color: white;
      cursor: pointer;
      width: 200px;
      margin: 15px auto;
    }
    button:hover {
      background-color: #004d40;
    }
    .result {
      margin-top: 10px;
      font-weight: bold;
      font-size: 17px;
      min-height: 25px;
    }
    .success {
      color: green;
    }
    .error {
      color: red;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
      text-align: right;
      font-size: 18px;
      color: #004d40;
    }
  </style>
</head>
<body>

  <h1>ğŸ¯ Ù„Ø¹Ø¨Ø© ØªÙÙƒÙŠÙƒ Ø§Ù„Ø¹Ø¯Ø¯</h1>

  <div class="box">
    <label for="level">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
    <select id="level">
      <option value="3">ğŸ”¢ Ø¹Ø¯Ø¯ Ù…Ù† 3 Ø£Ø±Ù‚Ø§Ù…</option>
      <option value="4" selected>ğŸ”¢ Ø¹Ø¯Ø¯ Ù…Ù† 4 Ø£Ø±Ù‚Ø§Ù…</option>
      <option value="5">ğŸ”¢ Ø¹Ø¯Ø¯ Ù…Ù† 5 Ø£Ø±Ù‚Ø§Ù…</option>
    </select>

    <button onclick="generateRandomNumber()">ğŸ² ØªÙˆÙ„ÙŠØ¯ Ø¹Ø¯Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>

    <label for="numberInput">Ø§Ù„Ø¹Ø¯Ø¯:</label>
    <input type="number" id="numberInput" placeholder="Ù…Ø«Ø§Ù„: 3957" />

    <label for="decompositionDigital">ØªÙÙƒÙŠÙƒ Ø±Ù‚Ù…ÙŠ (Ù…Ø«Ø§Ù„: 3000 + 900 + 50 + 7):</label>
    <input type="text" id="decompositionDigital" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù‡Ù†Ø§" />

    <div id="resultDigital" class="result"></div>

    <label for="decompositionVerbal">ØªÙÙƒÙŠÙƒ Ù„ÙØ¸ÙŠ (Ù…Ø«Ø§Ù„: 3 Ø¢Ù„Ø§Ù + 9 Ù…Ø¦Ø§Øª + 5 Ø¹Ø´Ø±Ø§Øª + 7 ÙˆØ­Ø¯Ø§Øª):</label>
    <input type="text" id="decompositionVerbal" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ù„ÙØ¸ÙŠ Ù‡Ù†Ø§" />

    <div id="resultVerbal" class="result"></div>

    <button onclick="checkDecompositions()">âœ… ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙÙƒÙŠÙƒÙŠÙ†</button>

  </div>

  <script>
    // ØªÙˆÙ„ÙŠØ¯ Ø¹Ø¯Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
    function generateRandomNumber() {
      const level = parseInt(document.getElementById("level").value);
      const min = Math.pow(10, level - 1);
      const max = Math.pow(10, level) - 1;
      const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
      document.getElementById("numberInput").value = randomNumber;
      // Ù…Ø³Ø­ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
      document.getElementById("decompositionDigital").value = "";
      document.getElementById("decompositionVerbal").value = "";
      document.getElementById("resultDigital").textContent = "";
      document.getElementById("resultVerbal").textContent = "";
    }

    // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ
    function checkDigital(number, input) {
      try {
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§ØºØ§Øª ÙˆØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªØ¹Ø¨ÙŠØ±
        const evaluated = eval(input.replace(/\s+/g, ''));
        return evaluated === number;
      } catch {
        return false;
      }
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ù„ÙØ¸ÙŠ Ø¥Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ø±Ù‚Ù…ÙŠØ©
    function verbalToNumber(verbalInput) {
      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§ØºØ§Øª
      let txt = verbalInput.trim();

      // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‡Ù†Ø¯ÙŠØ© Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©
      txt = txt.replace(/[\u0660-\u0669]/g, d => d.charCodeAt(0) - 0x0660);

      // ØªØ­ÙˆÙŠÙ„ ÙƒÙ„Ù…Ø§Øª Ø¥Ù„Ù‰ Ø¶Ø±Ø¨ Ø£Ø±Ù‚Ø§Ù…
      txt = txt
        .replace(/(\d+)\s*Ø¢Ù„Ø§Ù?/g, (m, n) => `${n}*1000`)
        .replace(/(\d+)\s*Ø£Ù„ÙØ§Ù‹/g, (m, n) => `${n}*1000`)
        .replace(/(\d+)\s*Ù…Ø¦Ø§Øª?/g, (m, n) => `${n}*100`)
        .replace(/(\d+)\s*Ù…Ø¦Ø©/g, (m, n) => `${n}*100`)
        .replace(/(\d+)\s*Ø¹Ø´Ø±Ø§Øª/g, (m, n) => `${n}*10`)
        .replace(/(\d+)\s*Ø¹Ø´Ø±Ø©/g, (m, n) => `${n}*10`)
        .replace(/(\d+)\s*ÙˆØ­Ø¯Ø§Øª?/g, (m, n) => `${n}*1`);

      // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø­Ø±ÙˆÙ Ø£Ùˆ Ø±Ù…ÙˆØ² Ø£Ø®Ø±Ù‰ (Ù†Ø³Ù…Ø­ ÙÙ‚Ø· Ù„Ù„Ø£Ø±Ù‚Ø§Ù… + Ùˆ * )
      txt = txt.replace(/[^0-9+*]/g, '');

      return txt;
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙÙƒÙŠÙƒÙŠÙ† Ø§Ù„Ø±Ù‚Ù…ÙŠ ÙˆØ§Ù„Ù„ÙØ¸ÙŠ
    function checkDecompositions() {
      const number = parseInt(document.getElementById("numberInput").value);
      const digitalInput = document.getElementById("decompositionDigital").value.trim();
      const verbalInput = document.getElementById("decompositionVerbal").value.trim();

      const resultDigital = document.getElementById("resultDigital");
      const resultVerbal = document.getElementById("resultVerbal");

      if (!number) {
        alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ø¯Ø¯ Ø£ÙˆÙ„Ù‹Ø§!");
        return;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ
      if (digitalInput === "") {
        resultDigital.textContent = "âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ.";
        resultDigital.className = "result error";
      } else if (checkDigital(number, digitalInput)) {
        resultDigital.textContent = "âœ”ï¸ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ ØµØ­ÙŠØ­.";
        resultDigital.className = "result success";
      } else {
        resultDigital.textContent = "âŒ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.";
        resultDigital.className = "result error";
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù„ÙØ¸ÙŠ
      if (verbalInput === "") {
        resultVerbal.textContent = "âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ù„ÙØ¸ÙŠ.";
        resultVerbal.className = "result error";
      } else {
        try {
          const converted = verbalToNumber(verbalInput);
          const verbalValue = eval(converted);
          if (verbalValue === number) {
            resultVerbal.textContent = "âœ”ï¸ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ù„ÙØ¸ÙŠ ØµØ­ÙŠØ­.";
            resultVerbal.className = "result success";
          } else {
            resultVerbal.textContent = "âŒ Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ù„ÙØ¸ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.";
            resultVerbal.className = "result error";
          }
        } catch {
          resultVerbal.textContent = "âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØµÙŠØºØ© Ø§Ù„ØªÙÙƒÙŠÙƒ Ø§Ù„Ù„ÙØ¸ÙŠ.";
          resultVerbal.className = "result error";
        }
      }
    }
  </script>

</body>
</html>
