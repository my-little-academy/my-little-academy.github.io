<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„Ø¹Ø¨Ø© ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø¨Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    direction: rtl;
    background: #e8f5e9;
    padding: 20px;
    user-select: none;
  }
  h2 {
    text-align: center;
    color: #2e7d32;
  }
  #number-display {
    font-size: 2em;
    font-weight: bold;
    text-align: center;
    margin-bottom: 20px;
    color: #1b5e20;
  }
  .container {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    flex-wrap: wrap;
  }
  /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¬Ø³Ù…Ø§Øª Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± */
  #pieces {
    flex: 1 1 200px;
    border: 2px solid #388e3c;
    border-radius: 10px;
    background: #a5d6a7;
    padding: 15px;
    min-height: 300px;
  }
  #pieces h3 {
    text-align: center;
    margin-bottom: 12px;
    color: #2e7d32;
  }
  .draggable {
    cursor: grab;
    margin: 8px auto;
  }
  /* ÙˆØ­Ø¯Ø© */
  .unit {
    width: 20px;
    height: 20px;
    background: #81c784;
    border: 2px solid #388e3c;
    border-radius: 3px;
  }
  /* Ù‚Ø¶ÙŠØ¨ (Ø¹Ø´Ø±Ø§Øª) */
  .rod {
    width: 20px;
    height: 200px;
    background: linear-gradient(#aed581 0 10%, #7cb342 10% 20%, #aed581 20% 30%, #7cb342 30% 40%, #aed581 40% 50%, #7cb342 50% 60%, #aed581 60% 70%, #7cb342 70% 80%, #aed581 80% 90%, #7cb342 90% 100%);
    border: 2px solid #33691e;
    border-radius: 8px;
    margin: 10px auto;
  }
  /* ØµÙÙŠØ­Ø© (Ù…Ø¦Ø§Øª) */
  .plate {
    width: 160px;
    height: 160px;
    background: linear-gradient(45deg, #ffe082 25%, #ffb300 25%, #ffb300 50%, #ffe082 50%, #ffe082 75%, #ffb300 75%, #ffb300 100%);
    border: 3px solid #f9a825;
    border-radius: 12px;
    margin: 10px auto;
  }

  /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ…Ø«ÙŠÙ„ */
  #drop-zone {
    flex: 2 1 400px;
    border: 3px dashed #4caf50;
    border-radius: 15px;
    background: #c8e6c9;
    min-height: 320px;
    padding: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-content: flex-start;
    justify-content: center;
  }

  /* Ø²Ø± Ø§Ù„ØªØ­Ù‚Ù‚ */
  #check-btn {
    margin-top: 20px;
    display: block;
    padding: 12px 20px;
    font-size: 1.2em;
    background-color: #388e3c;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    user-select: none;
  }
  #check-btn:hover {
    background-color: #1b5e20;
  }

  /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© */
  #result-msg {
    margin-top: 15px;
    text-align: center;
    font-weight: bold;
    font-size: 1.3em;
    color: #2e7d32;
  }
</style>
</head>
<body>

<h2>Ù„Ø¹Ø¨Ø© ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø¨Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª</h2>
<div id="number-display">Ø§Ù„Ø¹Ø¯Ø¯: <span id="number-to-represent">---</span></div>

<div class="container">

  <div id="pieces" aria-label="Ù…Ø¬Ø³Ù…Ø§Øª Ø§Ù„ÙˆØ­Ø¯Ø§Øª ÙˆØ§Ù„Ø¹Ø´Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø¦Ø§Øª">
    <h3>Ø§Ù„Ù…Ø¬Ø³Ù…Ø§Øª</h3>
    <div draggable="true" data-type="unit" class="draggable unit" title="ÙˆØ­Ø¯Ø©"></div>
    <div draggable="true" data-type="rod" class="draggable rod" title="Ø¹Ø´Ø±Ø©"></div>
    <div draggable="true" data-type="plate" class="draggable plate" title="Ù…Ø§Ø¦Ø©"></div>
  </div>

  <div id="drop-zone" aria-label="Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ…Ø«ÙŠÙ„" tabindex="0">
    <!-- Ù‡Ù†Ø§ ÙŠØ³Ù‚Ø· Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ù…Ø¬Ø³Ù…Ø§Øª -->
  </div>

</div>

<button id="check-btn">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ…Ø«ÙŠÙ„</button>
<div id="result-msg" aria-live="polite"></div>

<script>
  const numberDisplay = document.getElementById('number-to-represent');
  const dropZone = document.getElementById('drop-zone');
  const pieces = document.getElementById('pieces');
  const checkBtn = document.getElementById('check-btn');
  const resultMsg = document.getElementById('result-msg');

  // Ø¹Ø¯Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† 0 Ø¥Ù„Ù‰ 999
  function getRandomNumber() {
    return Math.floor(Math.random() * 900) + 100; // Ù„Ù„Ø£Ù…Ø«Ù„Ø© Ø¨ÙŠÙ† 100 Ùˆ999 Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª ÙˆØ§Ù„Ø¹Ø´Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø¦Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯
  }

  // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø¯Ø¯ Ù„Ù„ØªÙ…Ø«ÙŠÙ„
  let currentNumber = getRandomNumber();
  numberDisplay.textContent = currentNumber;

  // Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
  pieces.addEventListener('dragstart', (ev) => {
    if (ev.target.classList.contains('draggable')) {
      ev.dataTransfer.setData('text/plain', ev.target.getAttribute('data-type'));
    }
  });

  dropZone.addEventListener('dragover', (ev) => {
    ev.preventDefault(); // Ù„ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø¥ÙÙ„Ø§Øª
  });

  dropZone.addEventListener('drop', (ev) => {
    ev.preventDefault();
    const type = ev.dataTransfer.getData('text/plain');
    if (type) {
      // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø³Ø­ÙˆØ¨
      let newElem = document.createElement('div');
      newElem.classList.add('draggable');
      newElem.setAttribute('data-type', type);
      newElem.setAttribute('tabindex', '0');

      // Ù†Ø³Ø® Ø§Ù„ØªØµÙ…ÙŠÙ… Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
      if (type === 'unit') {
        newElem.classList.add('unit');
        newElem.title = 'ÙˆØ­Ø¯Ø©';
        newElem.style.width = '20px';
        newElem.style.height = '20px';
      } else if (type === 'rod') {
        newElem.classList.add('rod');
        newElem.title = 'Ø¹Ø´Ø±Ø©';
        newElem.style.width = '20px';
        newElem.style.height = '200px';
      } else if (type === 'plate') {
        newElem.classList.add('plate');
        newElem.title = 'Ù…Ø§Ø¦Ø©';
        newElem.style.width = '160px';
        newElem.style.height = '160px';
      }
      // Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡ (ØªÙØ§Ø¹Ù„ Ø¨Ø³ÙŠØ·)
      newElem.addEventListener('click', () => {
        dropZone.removeChild(newElem);
      });
      dropZone.appendChild(newElem);
    }
  });

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ…Ø«ÙŠÙ„
  checkBtn.addEventListener('click', () => {
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ø³Ù…Ø§Øª ÙÙŠ dropZone
    let unitsCount = 0;
    let rodsCount = 0;
    let platesCount = 0;

    for (const child of dropZone.children) {
      const t = child.getAttribute('data-type');
      if (t === 'unit') unitsCount++;
      else if (t === 'rod') rodsCount++;
      else if (t === 'plate') platesCount++;
    }

    // Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ­Ù„ÙŠÙ„Ù‡
    const num = currentNumber;
    const expectedUnits = num % 10;
    const expectedTens = Math.floor(num / 10) % 10;
    const expectedHundreds = Math.floor(num / 100);

    // Ù…Ù‚Ø§Ø±Ù†Ø© ÙˆØ¹Ø¯ ÙˆØªÙ‚ÙŠÙŠÙ…
    if (unitsCount === expectedUnits && rodsCount === expectedTens && platesCount === expectedHundreds) {
      resultMsg.style.color = '#2e7d32';
      resultMsg.textContent = 'Ù…Ù…ØªØ§Ø²! Ø§Ù„ØªÙ…Ø«ÙŠÙ„ ØµØ­ÙŠØ­ ğŸ‰ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø±Ø¨Ø© Ø¹Ø¯Ø¯ Ø¬Ø¯ÙŠØ¯.';
      generateNewNumber();
    } else {
      resultMsg.style.color = '#c62828';
      let msg = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ…Ø«ÙŠÙ„. ';
      if (unitsCount !== expectedUnits) msg += `Ø§Ù„ÙˆØ­Ø¯Ø§Øª: Ù…ØªÙˆÙ‚Ø¹ ${expectedUnits}ØŒ Ù„Ø¯ÙŠÙƒ ${unitsCount}. `;
      if (rodsCount !== expectedTens) msg += `Ø§Ù„Ø¹Ø´Ø±Ø§Øª: Ù…ØªÙˆÙ‚Ø¹ ${expectedTens}ØŒ Ù„Ø¯ÙŠÙƒ ${rodsCount}. `;
      if (platesCount !== expectedHundreds) msg += `Ø§Ù„Ù…Ø¦Ø§Øª: Ù…ØªÙˆÙ‚Ø¹ ${expectedHundreds}ØŒ Ù„Ø¯ÙŠÙƒ ${platesCount}. `;
      resultMsg.textContent = msg;
    }
  });

  function generateNewNumber() {
    // Ù…Ø³Ø­ Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ
    dropZone.innerHTML = '';
    // Ø±Ù‚Ù… Ø¬Ø¯ÙŠØ¯
    currentNumber = getRandomNumber();
    numberDisplay.textContent = currentNumber;
  }
</script>

</body>
</html>
