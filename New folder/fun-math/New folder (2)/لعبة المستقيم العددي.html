<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبة المستقيم العددي للأطفال</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            padding: 20px;
        }
        h1 {
            color: #ff6b6b;
        }
        .game-container {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }
        .number-line {
            position: relative;
            height: 100px;
            margin: 50px 0;
            background-color: #e6f7ff;
            border-radius: 10px;
        }
        .line {
            position: absolute;
            top: 50%;
            left: 5%;
            right: 5%;
            height: 4px;
            background-color: #333;
        }
        .tick {
            position: absolute;
            top: 40%;
            width: 2px;
            height: 20px;
            background-color: #333;
        }
        .number {
            position: absolute;
            top: 60%;
            transform: translateX(-50%);
            font-weight: bold;
        }
        .draggable {
            width: 50px;
            height: 50px;
            background-color: #ff6b6b;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: grab;
            margin: 10px auto;
            user-select: none;
        }
        .target {
            position: absolute;
            top: 20%;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px dashed #4CAF50;
            transform: translateX(-50%);
        }
        .feedback {
            font-size: 24px;
            margin: 20px 0;
            min-height: 30px;
        }
        .correct {
            color: #4CAF50;
        }
        .incorrect {
            color: #f44336;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin: 10px;
        }
        .controls {
            margin: 20px 0;
        }
        .level-selector {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>لعبة المستقيم العددي</h1>
        <p>اسحب العدد إلى موقعه الصحيح على المستقيم العددي</p>
        
        <div class="level-selector">
            <h3>اختر مستوى الصعوبة:</h3>
            <button onclick="setLevel(1)">مبتدئ (0-10)</button>
            <button onclick="setLevel(2)">متوسط (0-20)</button>
            <button onclick="setLevel(3)">متقدم (0-100)</button>
        </div>
        
        <div class="controls">
            <button onclick="newNumber()">عدد جديد</button>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="draggable" id="draggable" draggable="true"></div>
        
        <div class="number-line" id="numberLine">
            <div class="line"></div>
            <!-- Ticks and numbers will be added by JavaScript -->
        </div>
    </div>

    <script>
        let currentLevel = 1;
        let maxNumber = 10;
        let currentNumber = 0;
        let ticks = [];
        
        function setLevel(level) {
            currentLevel = level;
            if (level === 1) {
                maxNumber = 10;
            } else if (level === 2) {
                maxNumber = 20;
            } else {
                maxNumber = 100;
            }
            setupNumberLine();
            newNumber();
        }
        
        function setupNumberLine() {
            const numberLine = document.getElementById('numberLine');
            // Clear existing ticks and numbers
            while (numberLine.children.length > 1) {
                numberLine.removeChild(numberLine.lastChild);
            }
            
            ticks = [];
            const line = document.querySelector('.line');
            const lineWidth = line.offsetWidth;
            const lineLeft = line.offsetLeft;
            
            // Create ticks and numbers based on level
            const step = currentLevel === 3 ? 10 : 1;
            const showNumbers = currentLevel !== 3; // Don't show all numbers in advanced level
            
            for (let i = 0; i <= maxNumber; i += step) {
                const position = (i / maxNumber) * 100;
                const tick = document.createElement('div');
                tick.className = 'tick';
                tick.style.left = `${position}%`;
                numberLine.appendChild(tick);
                
                if (showNumbers || i === 0 || i === maxNumber) {
                    const number = document.createElement('div');
                    number.className = 'number';
                    number.textContent = i;
                    number.style.left = `${position}%`;
                    numberLine.appendChild(number);
                }
                
                // Store tick positions for checking
                ticks.push({
                    number: i,
                    position: position,
                    element: tick
                });
            }
        }
        
        function newNumber() {
            const feedback = document.getElementById('feedback');
            feedback.textContent = '';
            feedback.className = 'feedback';
            
            // Generate a random number based on level
            if (currentLevel === 1) {
                currentNumber = Math.floor(Math.random() * 10) + 1;
            } else if (currentLevel === 2) {
                currentNumber = Math.floor(Math.random() * 20) + 1;
            } else {
                currentNumber = Math.floor(Math.random() * 100) + 1;
            }
            
            document.getElementById('draggable').textContent = currentNumber;
            
            // Remove any existing target
            const oldTarget = document.querySelector('.target');
            if (oldTarget) {
                oldTarget.remove();
            }
        }
        
        function setupDragAndDrop() {
            const draggable = document.getElementById('draggable');
            const numberLine = document.getElementById('numberLine');
            const line = document.querySelector('.line');
            const lineWidth = line.offsetWidth;
            const lineLeft = line.offsetLeft;
            
            draggable.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', draggable.id);
                setTimeout(() => {
                    draggable.style.display = 'none';
                }, 0);
            });
            
            numberLine.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            numberLine.addEventListener('drop', (e) => {
                e.preventDefault();
                const id = e.dataTransfer.getData('text/plain');
                const draggable = document.getElementById(id);
                
                // Calculate position on the number line
                const rect = numberLine.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = (x / rect.width) * 100;
                
                // Find the closest tick
                let closestTick = null;
                let minDistance = Infinity;
                
                ticks.forEach(tick => {
                    const distance = Math.abs(tick.position - percentage);
                    if (distance < minDistance) {
                        minDistance = distance;
                        closestTick = tick;
                    }
                });
                
                // Check if the answer is correct
                const feedback = document.getElementById('feedback');
                if (closestTick && closestTick.number === currentNumber) {
                    feedback.textContent = 'أحسنت! الإجابة صحيحة';
                    feedback.className = 'feedback correct';
                    
                    // Create a target to show where the number should be
                    const target = document.createElement('div');
                    target.className = 'target';
                    target.style.left = `${closestTick.position}%`;
                    numberLine.appendChild(target);
                    
                    // Show the number on the line
                    const number = document.createElement('div');
                    number.className = 'number';
                    number.textContent = currentNumber;
                    number.style.left = `${closestTick.position}%`;
                    numberLine.appendChild(number);
                    
                    // Add the number to ticks to prevent duplicates
                    ticks.push({
                        number: currentNumber,
                        position: closestTick.position,
                        element: number
                    });
                    
                    // After a delay, generate a new number
                    setTimeout(newNumber, 1500);
                } else {
                    feedback.textContent = 'حاول مرة أخرى!';
                    feedback.className = 'feedback incorrect';
                }
                
                draggable.style.display = 'flex';
            });
            
            document.addEventListener('dragend', () => {
                const draggable = document.getElementById('draggable');
                draggable.style.display = 'flex';
            });
        }
        
        // Initialize the game
        window.onload = function() {
            setupNumberLine();
            newNumber();
            setupDragAndDrop();
        };
    </script>
</body>
</html>