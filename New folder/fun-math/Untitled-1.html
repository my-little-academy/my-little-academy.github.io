<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙŠÙ†ÙŠ Ø§Ù„Ù…Ù…ØªØ¹!</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        /* CSS Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø·ÙÙˆÙ„ÙŠ ÙˆØ§Ù„Ù…Ø±Ø­ */
        body {
            font-family: 'Fredoka One', cursive; /* Ø®Ø· Ø·ÙÙˆÙ„ÙŠ ÙˆÙ…Ø±Ø­ */
            background: linear-gradient(to bottom right, #87CEEB, #FFFACD); /* Ø®Ù„ÙÙŠØ© Ø³Ù…Ø§ÙˆÙŠØ© ÙˆØµÙØ±Ø§Ø¡ ÙØ§ØªØ­Ø© */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Ù„Ù…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø¹Ù†Ø§ØµØ± */
            position: relative;
        }

        /* Ø±Ø³ÙˆÙ…Ø§Øª Ø®Ù„ÙÙŠØ© Ø¨Ø³ÙŠØ·Ø© */
        body::before, body::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            opacity: 0.7;
        }
        body::before {
            width: 150px;
            height: 150px;
            background-color: #FFD700; /* Ø°Ù‡Ø¨ÙŠ */
            top: 10%;
            left: 5%;
            animation: bounce 3s infinite alternate;
        }
        body::after {
            width: 100px;
            height: 100px;
            background-color: #ADFF2F; /* Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ */
            bottom: 15%;
            right: 8%;
            animation: bounce 4s infinite alternate-reverse;
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-20px); }
        }

        .header {
            background-color: #FFA07A; /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙØ§ØªØ­ */
            padding: 20px 40px;
            border-radius: 30px;
            box-shadow: 0 8px 0 #FF6347; /* Ø¸Ù„ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ØºØ§Ù…Ù‚ */
            margin-bottom: 30px;
            position: relative;
            z-index: 10;
            text-align: center;
            border: 5px solid #FF4500;
        }

        .header h1 {
            color: #FFFFFF; /* Ø£Ø¨ÙŠØ¶ */
            font-size: 3.5em;
            text-shadow: 3px 3px 0 #FF4500; /* Ø¸Ù„ Ù†Øµ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ø¯Ø§ÙƒÙ† */
            margin: 0;
            letter-spacing: 2px;
        }

        .header .character {
            position: absolute;
            top: -30px;
            right: -30px;
            width: 80px;
            height: 80px;
            background-color: #98FB98; /* Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ Ù„Ù„Ø¨ÙˆÙ…Ø©/Ø§Ù„Ø£Ø±Ù†Ø¨ */
            border-radius: 50%;
            border: 4px solid #3CB371;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em; /* Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø´Ø®ØµÙŠØ© */
            line-height: 0.5;
            transform: rotate(10deg);
            box-shadow: 0 5px 0 #2E8B57;
        }
        .header .character::before {
            content: 'ğŸ¦‰'; /* Ø±Ù…Ø² Ø¨ÙˆÙ…Ø© Ø£Ùˆ ğŸ° Ø£Ø±Ù†Ø¨ */
            font-size: 0.8em;
            position: relative;
            top: 5px;
        }

        /* Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙŠÙ†ÙŠ */
        .abacus-container {
            background-color: #4682B4; /* Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
            border: 8px solid #36454F; /* Ø­Ø¯ÙˆØ¯ Ø£ØºÙ…Ù‚ */
            border-radius: 20px;
            padding: 25px 20px;
            box-shadow: 0 15px 0 #2C3A47, 0 20px 30px rgba(0, 0, 0, 0.3); /* Ø¸Ù„ Ø¹Ù…ÙŠÙ‚ */
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: relative;
            z-index: 5;
            animation: popIn 0.8s ease-out;
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .horizontal-bar {
            background-color: #FF69B4; /* ÙˆØ±Ø¯ÙŠ Ø²Ø§Ù‡ÙŠ */
            height: 25px;
            width: 100%;
            border-radius: 10px;
            position: relative;
            z-index: 1;
            border: 3px solid #C71585;
            box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.2);
        }

        .deck {
            display: flex;
            justify-content: space-around;
            position: relative;
        }

        .upper-deck {
            background-color: #6A5ACD; /* Ø¨Ù†ÙØ³Ø¬ÙŠ ÙØ§ØªØ­ */
            padding: 15px 0;
            border-radius: 10px;
            box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.1);
        }

        .lower-deck {
            background-color: #32CD32; /* Ø£Ø®Ø¶Ø± Ø¹Ø´Ø¨ÙŠ */
            padding: 15px 0;
            border-radius: 10px;
            box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.1);
        }

        .rod-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .rod {
            width: 8px;
            background-color: #D3D3D3; /* Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
            border-radius: 5px;
            position: absolute;
            z-index: 0;
        }
        .upper-deck .rod {
            height: 60px; /* Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ */
            top: 0;
        }
        .lower-deck .rod {
            height: 120px; /* Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³ÙÙ„ÙŠ */
            top: 0;
        }

        .bead-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 50px; /* Ø¹Ø±Ø¶ ÙƒÙ„ Ø¹Ù…ÙˆØ¯ ÙˆÙ‡Ù…ÙŠ */
            z-index: 2; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø®Ø±Ø²Ø§Øª ÙÙˆÙ‚ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© */
        }

        .bead-upper, .bead-lower {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: #FFD700; /* Ø°Ù‡Ø¨ÙŠ */
            border: 3px solid #DAA520;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2), inset 0 2px 5px rgba(255,255,255,0.5);
            transition: transform 0.1s ease, background-color 0.3s ease;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            user-select: none; /* Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ */
        }

        .bead-upper {
            background-color: #FF6347; /* Ø£Ø­Ù…Ø± Ø·Ù…Ø§Ø·Ù… */
            border-color: #CD5C5C;
            top: 5px; /* Ù„ØªÙƒÙˆÙ† ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        }

        .bead-lower {
            background-color: #00BFFF; /* Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ Ø¹Ù…ÙŠÙ‚ */
            border-color: #1E90FF;
            position: absolute; /* ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø¨Ø§Ù„Ù€ JS */
        }

        .bead-lower.moved-up {
            transform: translateX(-50%) translateY(-50px); /* Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø­Ø±ÙƒØ© */
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø®Ø±Ø²Ø§Øª Ø§Ù„Ø³ÙÙ„Ù‰ Ø§Ù„Ù…ØªÙ†ÙˆØ¹Ø© */
        .bead-lower:nth-child(1) { background-color: #FF6347; border-color: #CD5C5C; } /* Ø£Ø­Ù…Ø± */
        .bead-lower:nth-child(2) { background-color: #FFD700; border-color: #DAA520; } /* Ø£ØµÙØ± */
        .bead-lower:nth-child(3) { background-color: #32CD32; border-color: #228B22; } /* Ø£Ø®Ø¶Ø± */
        .bead-lower:nth-child(4) { background-color: #4169E1; border-color: #191970; } /* Ø£Ø²Ø±Ù‚ Ù…Ù„ÙƒÙŠ */
        .bead-lower:nth-child(5) { background-color: #FF8C00; border-color: #E68A00; } /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ø¯Ø§ÙƒÙ† */

        .controls {
            margin-top: 30px;
            display: flex;
            gap: 20px;
            position: relative;
            z-index: 10;
        }

        .button {
            background-color: #98FB98; /* Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ */
            color: #3CB371;
            padding: 15px 30px;
            border: 5px solid #3CB371;
            border-radius: 15px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 8px 0 #2E8B57;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.1);
            position: relative;
            top: 0;
            outline: none;
        }

        .button:hover {
            background-color: #7CFC00; /* Ø£Ø®Ø¶Ø± Ø£ÙƒØ«Ø± Ø¥Ø´Ø±Ø§Ù‚Ø§Ù‹ */
            box-shadow: 0 5px 0 #2E8B57;
            top: 3px;
        }

        .button:active {
            background-color: #6B8E23; /* Ø£Ø®Ø¶Ø± Ø²ÙŠØªÙˆÙ†ÙŠ */
            box-shadow: 0 2px 0 #2E8B57;
            top: 6px;
        }

        .value-display {
            background-color: #FFFFFF;
            border: 4px solid #4682B4;
            border-radius: 15px;
            padding: 15px 30px;
            font-size: 2em;
            color: #4682B4;
            min-width: 150px;
            text-align: center;
            box-shadow: 0 5px 0 #A9A9A9;
            margin-top: 20px;
            font-weight: bold;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ´Ø¬ÙŠØ¹ */
        .encouragement {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px 30px;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-size: 2.5em;
            color: #FF4500;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
            z-index: 100;
            white-space: nowrap;
            border: 3px solid #FF6347;
            animation: bounceIn 0.5s ease-out forwards;
        }
        .encouragement.show {
            opacity: 1;
            visibility: visible;
            animation: bounceIn 0.5s ease-out forwards;
        }
        @keyframes bounceIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            70% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

    </style>
</head>
<body>
    <div class="header">
        <h1>Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙŠÙ†ÙŠ Ø§Ù„Ù…Ù…ØªØ¹!</h1>
        <div class="character"></div>
    </div>

    <div class="abacus-container">
        <div class="deck upper-deck">
            <div class="bead-container">
                <div class="rod upper-deck-rod" style="top: 0; height: 60px;"></div>
                <div class="bead-upper" data-rod="0" data-value="5"></div>
            </div>
            <div class="bead-container">
                <div class="rod upper-deck-rod" style="top: 0; height: 60px;"></div>
                <div class="bead-upper" data-rod="1" data-value="5"></div>
            </div>
            <div class="bead-container">
                <div class="rod upper-deck-rod" style="top: 0; height: 60px;"></div>
                <div class="bead-upper" data-rod="2" data-value="5"></div>
            </div>
            <div class="bead-container">
                <div class="rod upper-deck-rod" style="top: 0; height: 60px;"></div>
                <div class="bead-upper" data-rod="3" data-value="5"></div>
            </div>
            <div class="bead-container">
                <div class="rod upper-deck-rod" style="top: 0; height: 60px;"></div>
                <div class="bead-upper" data-rod="4" data-value="5"></div>
            </div>
             </div>

        <div class="horizontal-bar"></div>

        <div class="deck lower-deck">
            <div class="bead-container">
                <div class="rod lower-deck-rod" style="top: 0; height: 120px;"></div>
                <div class="bead-lower" data-rod="0" data-bead-index="0" data-value="1"></div>
                <div class="bead-lower" data-rod="0" data-bead-index="1" data-value="1"></div>
                <div class="bead-lower" data-rod="0" data-bead-index="2" data-value="1"></div>
                <div class="bead-lower" data-rod="0" data-bead-index="3" data-value="1"></div>
                <div class="bead-lower" data-rod="0" data-bead-index="4" data-value="1"></div>
            </div>
            <div class="bead-container">
                <div class="rod lower-deck-rod" style="top: 0; height: 120px;"></div>
                <div class="bead-lower" data-rod="1" data-bead-index="0" data-value="1"></div>
                <div class="bead-lower" data-rod="1" data-bead-index="1" data-value="1"></div>
                <div class="bead-lower" data-rod="1" data-bead-index="2" data-value="1"></div>
                <div class="bead-lower" data-rod="1" data-bead-index="3" data-value="1"></div>
                <div class="bead-lower" data-rod="1" data-bead-index="4" data-value="1"></div>
            </div>
            <div class="bead-container">
                <div class="rod lower-deck-rod" style="top: 0; height: 120px;"></div>
                <div class="bead-lower" data-rod="2" data-bead-index="0" data-value="1"></div>
                <div class="bead-lower" data-rod="2" data-bead-index="1" data-value="1"></div>
                <div class="bead-lower" data-rod="2" data-bead-index="2" data-value="1"></div>
                <div class="bead-lower" data-rod="2" data-bead-index="3" data-value="1"></div>
                <div class="bead-lower" data-rod="2" data-bead-index="4" data-value="1"></div>
            </div>
            <div class="bead-container">
                <div class="rod lower-deck-rod" style="top: 0; height: 120px;"></div>
                <div class="bead-lower" data-rod="3" data-bead-index="0" data-value="1"></div>
                <div class="bead-lower" data-rod="3" data-bead-index="1" data-value="1"></div>
                <div class="bead-lower" data-rod="3" data-bead-index="2" data-value="1"></div>
                <div class="bead-lower" data-rod="3" data-bead-index="3" data-value="1"></div>
                <div class="bead-lower" data-rod="3" data-bead-index="4" data-value="1"></div>
            </div>
            <div class="bead-container">
                <div class="rod lower-deck-rod" style="top: 0; height: 120px;"></div>
                <div class="bead-lower" data-rod="4" data-bead-index="0" data-value="1"></div>
                <div class="bead-lower" data-rod="4" data-bead-index="1" data-value="1"></div>
                <div class="bead-lower" data-rod="4" data-bead-index="2" data-value="1"></div>
                <div class="bead-lower" data-rod="4" data-bead-index="3" data-value="1"></div>
                <div class="bead-lower" data-rod="4" data-bead-index="4" data-value="1"></div>
            </div>
            </div>
    </div>

    <div class="value-display">Ø§Ù„Ù‚ÙŠÙ…Ø©: <span id="abacusValue">0</span></div>

    <div class="controls">
        <button class="button" id="resetButton">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
        <button class="button" id="learnButton">ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ø¯Ø§Ø¯</button>
    </div>

    <div class="encouragement" id="encouragementMessage">Ø£Ø­Ø³Ù†Øª!</div>

    <audio id="beadSound" src="https://www.soundjay.com/buttons/beep-01a.mp3"></audio> <audio id="resetSound" src="https://www.soundjay.com/misc/sounds/ding-01.mp3"></audio> <script>
        // JavaScript Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ø¯Ø§Ø¯ ØªÙØ§Ø¹Ù„ÙŠÙ‹Ø§
        const lowerBeads = document.querySelectorAll('.bead-lower');
        const upperBeads = document.querySelectorAll('.bead-upper');
        const horizontalBar = document.querySelector('.horizontal-bar');
        const abacusValueDisplay = document.getElementById('abacusValue');
        const resetButton = document.getElementById('resetButton');
        const learnButton = document.getElementById('learnButton');
        const beadSound = document.getElementById('beadSound');
        const resetSound = document.getElementById('resetSound');
        const encouragementMessage = document.getElementById('encouragementMessage');

        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø®Ø±Ø²Ø§Øª
        const initialLowerBeadPositions = {}; // Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„ÙƒÙ„ Ø®Ø±Ø²Ø© Ø³ÙÙ„Ù‰
        const lowerBeadHeight = 45; // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø®Ø±Ø²Ø©
        const lowerBeadSpacing = 5; // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø®Ø±Ø²Ø§Øª

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        function initializeAbacus() {
            let abacusState = {}; // Ù„ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© ÙƒÙ„ Ø®Ø±Ø²Ø© (up/down)

            lowerBeads.forEach(bead => {
                const rod = bead.dataset.rod;
                const index = parseInt(bead.dataset.beadIndex);

                if (!initialLowerBeadPositions[rod]) {
                    initialLowerBeadPositions[rod] = [];
                }

                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø®Ø±Ø²Ø© (ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„)
                const initialTop = (index * (lowerBeadHeight + lowerBeadSpacing)) + 10; // 10px Ù‡Ø§Ù…Ø´ Ø¹Ù„ÙˆÙŠ
                bead.style.top = `${initialTop}px`;
                initialLowerBeadPositions[rod][index] = initialTop;

                // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ù„Ù„Ø®Ø±Ø²Ø© (ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„)
                if (!abacusState[rod]) abacusState[rod] = { upper: false, lower: Array(5).fill(false) };
                abacusState[rod].lower[index] = false; // false ØªØ¹Ù†ÙŠ ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
            });

            upperBeads.forEach(bead => {
                bead.style.top = `5px`; // Ø§Ù„Ø®Ø±Ø²Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© ØªØ¨Ø¯Ø£ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
                const rod = bead.dataset.rod;
                if (!abacusState[rod]) abacusState[rod] = { upper: false, lower: Array(5).fill(false) };
                abacusState[rod].upper = false; // false ØªØ¹Ù†ÙŠ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰
            });

            return abacusState;
        }

        let currentAbacusState = initializeAbacus();
        updateAbacusValue(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©

        // ÙˆØ¸ÙŠÙØ© ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        function playSound(audioElement) {
            audioElement.currentTime = 0; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            audioElement.play().catch(e => console.error("Error playing sound:", e));
        }

        // ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯
        function updateAbacusValue() {
            let totalValue = 0;
            // ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ ØªØ·Ø¨ÙŠÙ‚ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙŠÙ†ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
            // Ø­Ø§Ù„ÙŠÙ‹Ø§ØŒ Ù‡Ø°Ø§ Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ· ÙŠØ¬Ù…Ø¹ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©

            Object.keys(currentAbacusState).forEach(rodIndex => {
                let rodValue = 0;
                // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ (ÙƒÙ„ Ø®Ø±Ø²Ø© Ø¹Ù„ÙˆÙŠØ© = 5)
                if (currentAbacusState[rodIndex].upper) {
                    rodValue += 5;
                }
                // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø³ÙÙ„ÙŠ (ÙƒÙ„ Ø®Ø±Ø²Ø© Ø³ÙÙ„ÙŠØ© = 1)
                currentAbacusState[rodIndex].lower.forEach(isUp => {
                    if (isUp) {
                        rodValue += 1;
                    }
                });
                // ÙŠÙ…ÙƒÙ†Ù†Ø§ ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ø¹Ø´Ø±ÙŠØ© Ù‡Ù†Ø§
                // Ù…Ø«Ù„Ø§Ù‹ØŒ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£Ø®ÙŠØ± Ù‡Ùˆ Ø§Ù„Ø¢Ø­Ø§Ø¯ØŒ Ø§Ù„Ø°ÙŠ Ù‚Ø¨Ù„Ù‡ Ø§Ù„Ø¹Ø´Ø±Ø§Øª ÙˆÙ‡ÙƒØ°Ø§.
                // Ù„ØªØ¨Ø³ÙŠØ· Ø§Ù„Ù…Ø«Ø§Ù„ØŒ Ø³Ù†Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø¨Ø³Ø§Ø·Ø©.
                totalValue += rodValue;
            });

            abacusValueDisplay.textContent = totalValue;
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø®Ø±Ø²Ø§Øª Ø§Ù„Ø³ÙÙ„ÙŠØ©
        lowerBeads.forEach(bead => {
            bead.addEventListener('click', () => {
                const rod = bead.dataset.rod;
                const index = parseInt(bead.dataset.beadIndex);
                const isUp = currentAbacusState[rod].lower[index];

                playSound(beadSound);

                if (isUp) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø±Ø²Ø© Ù…Ø±ØªÙØ¹Ø©ØŒ Ø£Ù†Ø²Ù„Ù‡Ø§
                    bead.style.top = `${initialLowerBeadPositions[rod][index]}px`;
                    currentAbacusState[rod].lower[index] = false;
                    showEncouragement("Ø¬ÙŠØ¯!");
                } else {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø±Ø²Ø© Ù…Ù†Ø®ÙØ¶Ø©ØŒ Ø§Ø±ÙØ¹Ù‡Ø§
                    // Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù„Ø®Ø±Ø²Ø§Øª Ø§Ù„Ø³ÙÙ„ÙŠØ© ÙŠØ­Ø¯Ø¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø§Ø±Ø¶Ø© Ø§Ù„Ø£ÙÙ‚ÙŠØ©
                    // Ù†Ø­ØªØ§Ø¬ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ø¹Ø§Ø±Ø¶Ø©
                    const barBottom = horizontalBar.offsetTop + horizontalBar.offsetHeight;
                    const topPosition = barBottom + (index * (lowerBeadHeight + lowerBeadSpacing)) - (lowerBeadHeight * 5) - (lowerBeadSpacing * 4) + 10; // Ø¶Ø¨Ø· Ø§Ù„Ù…ÙˆØ¶Ø¹
                    bead.style.top = `${topPosition}px`;
                    currentAbacusState[rod].lower[index] = true;
                    showEncouragement("Ø±Ø§Ø¦Ø¹!");
                }
                updateAbacusValue();
            });
        });

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø®Ø±Ø²Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
        upperBeads.forEach(bead => {
            bead.addEventListener('click', () => {
                const rod = bead.dataset.rod;
                const isUp = currentAbacusState[rod].upper;

                playSound(beadSound);

                if (isUp) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø±Ø²Ø© Ù…Ø±ØªÙØ¹Ø© (Ù…Ù„ØªØµÙ‚Ø© Ø¨Ø§Ù„Ø¹Ø§Ø±Ø¶Ø©)ØŒ Ø£Ù†Ø²Ù„Ù‡Ø§ Ù„Ø£Ø¹Ù„Ù‰
                    bead.style.top = `5px`;
                    currentAbacusState[rod].upper = false;
                    showEncouragement("ÙÙ‡Ù…Øª!");
                } else {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø±Ø²Ø© Ù…Ù†Ø®ÙØ¶Ø© (ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰)ØŒ Ø§Ø±ÙØ¹Ù‡Ø§ Ù„Ù…Ù„Ø§Ù…Ø³Ø© Ø§Ù„Ø¹Ø§Ø±Ø¶Ø©
                    const barTop = horizontalBar.offsetTop;
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù„Ø®Ø±Ø²Ø© Ø¨Ø­ÙŠØ« ØªÙ„Ø§Ù…Ø³ Ø§Ù„Ø¹Ø§Ø±Ø¶Ø© Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„
                    const topPosition = barTop - bead.offsetHeight - 5; // 5px Ù‡Ø§Ù…Ø´ Ø¨Ø³ÙŠØ·
                    bead.style.top = `${topPosition}px`;
                    currentAbacusState[rod].upper = true;
                    showEncouragement("Ù…Ø¯Ù‡Ø´!");
                }
                updateAbacusValue();
            });
        });


        // Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
        resetButton.addEventListener('click', () => {
            playSound(resetSound);
            currentAbacusState = initializeAbacus(); // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø±Ø²Ø§Øª Ù„Ù…ÙˆØ§Ø¶Ø¹Ù‡Ø§ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
            updateAbacusValue();
            lowerBeads.forEach(bead => {
                const rod = bead.dataset.rod;
                const index = parseInt(bead.dataset.beadIndex);
                bead.style.top = `${initialLowerBeadPositions[rod][index]}px`;
            });
            upperBeads.forEach(bead => {
                bead.style.top = `5px`;
            });
            showEncouragement("Ù„Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯!");
        });

        // Ø²Ø± ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ø¯Ø§Ø¯ (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø£Ùˆ ØªÙˆØ¬ÙŠÙ‡ Ù„ØµÙØ­Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©)
        learnButton.addEventListener('click', () => {
            alert('Ù‚Ø±ÙŠØ¨Ù‹Ø§: Ø¯Ø±ÙˆØ³ ØªÙØ§Ø¹Ù„ÙŠØ© Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙŠÙ†ÙŠ!');
        });

        // ÙˆØ¸ÙŠÙØ© Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ´Ø¬ÙŠØ¹
        function showEncouragement(message) {
            encouragementMessage.textContent = message;
            encouragementMessage.classList.add('show');
            setTimeout(() => {
                encouragementMessage.classList.remove('show');
            }, 1500); // ØªØ®ØªÙÙŠ Ø¨Ø¹Ø¯ 1.5 Ø«Ø§Ù†ÙŠØ©
        }

    </script>
</body>
</html>