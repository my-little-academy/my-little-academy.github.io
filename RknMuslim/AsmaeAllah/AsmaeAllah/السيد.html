<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اسم الله السيد - درس تفاعلي للأطفال</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
        
        :root {
            --primary-color: #5a3d7c;
            --secondary-color: #8a5a44;
            --accent-color: #f8c537;
            --light-color: #f9f3e9;
            --dark-color: #333;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--light-color);
            color: var(--dark-color);
            margin: 0;
            padding: 0;
            background-image: radial-gradient(circle, #f0e6ff 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .title {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.1);
            animation: bounce 2s ease infinite;
            display: inline-block;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .subtitle {
            font-size: 1.5rem;
            color: var(--secondary-color);
            margin-top: 0;
        }
        
        .section {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--accent-color);
            position: relative;
            overflow: hidden;
        }
        
        .section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 10px;
            height: 100%;
            background-color: var(--primary-color);
        }
        
        .section-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-top: 0;
            border-bottom: 2px dashed var(--accent-color);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-left: 10px;
            color: var(--accent-color);
        }
        
        .story {
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        .character {
            display: inline-block;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .moral {
            background-color: #f0f7ff;
            padding: 15px;
            border-radius: 10px;
            border-right: 5px solid var(--primary-color);
            margin: 20px 0;
            font-style: italic;
        }
        
        .moral-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .activity {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .game-card {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            width: 120px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        
        .game-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .quiz-question {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .quiz-option {
            background-color: #f5f5f5;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            background-color: #e0e0e0;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            background-color: #4a2d6c;
        }
        
        .btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(45deg);
            transition: all 0.3s ease;
        }
        
        .btn:hover::after {
            left: 100%;
        }
        
        .btn-accent {
            background-color: var(--accent-color);
            color: var(--dark-color);
        }
        
        .btn-accent:hover {
            background-color: #e6b52b;
        }
        
        .prayer {
            font-size: 1.2rem;
            line-height: 1.8;
            text-align: center;
            padding: 20px;
            background-color: #f0f7ff;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .hidden {
            display: none;
        }
        
        .feedback {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }
        
        .correct {
            background-color: #d4edda;
            color: #155724;
        }
        
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .character-img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            margin: 0 auto;
            display: block;
        }
        
        /* أنماط خاصة بلعبة الذاكرة المعدلة */
        #memory-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px auto;
            max-width: 600px;
        }
        
        .memory-card {
            height: 100px;
            background-color: var(--primary-color);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            perspective: 1000px;
            position: relative;
        }
        
        .memory-card .front,
        .memory-card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            padding: 10px;
            box-sizing: border-box;
        }
        
        .memory-card .front {
            background-color: var(--primary-color);
            color: white;
            transform: rotateY(0deg);
        }
        
        .memory-card .back {
            background-color: white;
            color: var(--primary-color);
            transform: rotateY(180deg);
            border: 2px solid var(--primary-color);
        }
        
        .memory-card.flipped .front {
            transform: rotateY(180deg);
        }
        
        .memory-card.flipped .back {
            transform: rotateY(0deg);
        }
        
        .memory-card.matched {
            background-color: var(--accent-color);
            color: var(--dark-color);
            cursor: default;
        }
        
        .memory-card i {
            font-size: 2rem;
        }
        
        /* أنماط خاصة بلعبة التوصيل */
        #matching-game {
            margin: 20px auto;
            max-width: 600px;
        }
        
        .matching-pairs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .matching-item {
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .matching-item:hover {
            background-color: #e0e0e0;
        }
        
        .matching-item.selected {
            background-color: var(--accent-color);
        }
        
        .matching-item.matched {
            background-color: #d4edda;
            cursor: default;
        }
        
        /* أنماط خاصة بلعبة التلوين */
        #coloring-area {
            margin: 20px auto;
            text-align: center;
        }
        
        #coloring-canvas {
            max-width: 100%;
            height: auto;
            border: 2px solid #ddd;
            border-radius: 10px;
        }
        
        .color-palette {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            #memory-board {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .matching-pairs {
                grid-template-columns: 1fr;
            }
            
            .memory-card {
                height: 80px;
                font-size: 0.9rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 class="title">اسم الله السيد</h1>
            <p class="subtitle">تعلم معنى السيادة الحقيقية</p>
</header>
        
        <div class="section" id="intro">
            <h2 class="section-title"><i class="fas fa-book-open"></i> قصة وعبرة</h2>
            <div class="story">
                <p>في مملكة جميلة، كان هناك أمير صغير اسمه <span class="character">فيصل</span>. كان <span class="character">فيصل</span> يحب أن يأمر الخدم وينادي عليهم: "أنا سيدكم، يجب أن تطيعوني في كل شيء!"</p>
                
                <p>ذات يوم، زار <span class="character">فيصل</span> حديقة المملكة ورأى بستانياً عجوزاً يعتني بالأشجار بحب وصبر. سأله <span class="character">فيصل</span>: "لماذا تعمل بهذا الجهد؟ أنت لست سيداً مثلما أنا سيد!"</p>
                
                <p>ابتسم البستاني وقال: "يا أميري، السيد الحقيقي ليس من يأمر فقط، بل من يحسن القيادة ويهتم بمن تحت رعايته. انظر إلى هذه الأشجار، أعتني بها لأنني مسؤول عنها."</p>
                
                <p>عاد <span class="character">فيصل</span> إلى القصر متفكراً في كلام البستاني. سأل معلمه: "من هو السيد الحقيقي؟" فأجابه المعلم: "الله هو السيد الحقيقي، لأنه يحكم بالعدل ويرحم عباده ويهتم بهم."</p>
                
                <div class="moral">
                    <div class="moral-title">العبرة:</div>
                    <p>الله هو السيد الحقيقي لأنه يحكم بالعدل والرحمة، ويهتم بكل خلقه. سيادته ليست استبداداً بل حكمة ورحمة. نحن نطيع الله لأنه يستحق الطاعة بحكمته ورحمته.</p>
                </div>
            </div>
            
            <div class="text-center">
                <button class="btn btn-accent" onclick="showSection('lesson')">تابع الدرس <i class="fas fa-arrow-down"></i></button>
            </div>
        </div>
        
        <div class="section hidden" id="lesson">
            <h2 class="section-title"><i class="fas fa-star"></i> معنى اسم الله السيد</h2>
            <p>اسم الله "السيد" يعني أن الله تعالى هو:</p>
            <ul class="story">
                <li>الحاكم المطلق الذي لا معقب لحكمه</li>
                <li>الذي له السيادة الكاملة على الكون</li>
                <li>الذي يستحق الطاعة المطلقة</li>
                <li>الذي يجمع بين القوة والرحمة في حكمه</li>
            </ul>
            
            <div class="activity">
                <h3><i class="fas fa-puzzle-piece"></i> نشاط تكميل الجمل:</h3>
                <p>أكمل الجمل التالية بكلمة مناسبة:</p>
                <p>1. الله هو السيد الحقيقي لأنه ______ (يحكم بالعدل، يعطي المال، يعيش في القصور).</p>
                <p>2. من صفات السيد الحقيقي ______ (الرحمة، القسوة، الأنانية).</p>
                <p>3. نطيع الله لأنه ______ (سيدنا الحقيقي، يهددنا، يعطينا المال).</p>
            </div>
            
            <div class="text-center">
                <button class="btn" onclick="showSection('intro')"><i class="fas fa-arrow-up"></i> العودة للقصة</button>
                <button class="btn btn-accent" onclick="showSection('games')">العب معنا <i class="fas fa-gamepad"></i></button>
            </div>
        </div>
        
        <div class="section hidden" id="games">
            <h2 class="section-title"><i class="fas fa-gamepad"></i> ألعاب تفاعلية</h2>
            <p>العب وتعلم مع هذه الألعاب الممتعة عن اسم الله السيد:</p>
            
            <div class="game-container">
                <div class="game-card" onclick="startMemoryGame()">
                    <div class="game-icon"><i class="fas fa-brain"></i></div>
                    <div>لعبة الذاكرة</div>
                </div>
                
                <div class="game-card" onclick="startMatchingGame()">
                    <div class="game-icon"><i class="fas fa-puzzle-piece"></i></div>
                    <div>لعبة التوصيل</div>
                </div>
                
                <div class="game-card" onclick="startColoringGame()">
                    <div class="game-icon"><i class="fas fa-palette"></i></div>
                    <div>التلوين</div>
                </div>
            </div>
            
            <div id="memory-game" class="hidden">
                <h3>لعبة الذاكرة: ابحث عن الآيات التي تتحدث عن سيادة الله</h3>
                <div id="memory-board"></div>
                <button class="btn" onclick="hideGame('memory-game')">إغلاق اللعبة</button>
            </div>
            
            <div id="matching-game" class="hidden">
                <h3>لعبة التوصيل: صل كل اسم من أسماء الله بمعناه</h3>
                <div class="matching-pairs" id="matching-pairs"></div>
                <button class="btn" onclick="hideGame('matching-game')">إغلاق اللعبة</button>
            </div>
            
            <div id="coloring-game" class="hidden">
                <h3>لوّن الصورة:</h3>
                <div id="coloring-area">
                    <canvas id="coloring-canvas" width="500" height="400" style="border:1px solid #000; background-color: white;"></canvas>
                    <div class="color-palette">
                        <div class="color-option" style="background-color: #f8c537;" onclick="selectColor('#f8c537')"></div>
                        <div class="color-option" style="background-color: #5a3d7c;" onclick="selectColor('#5a3d7c')"></div>
                        <div class="color-option" style="background-color: #8a5a44;" onclick="selectColor('#8a5a44')"></div>
                        <div class="color-option" style="background-color: #2ecc71;" onclick="selectColor('#2ecc71')"></div>
                        <div class="color-option" style="background-color: #e74c3c;" onclick="selectColor('#e74c3c')"></div>
                        <div class="color-option" style="background-color: #3498db;" onclick="selectColor('#3498db')"></div>
                    </div>
                    <button class="btn" onclick="clearCanvas()">مسح اللوحة</button>
                    <button class="btn" onclick="hideGame('coloring-game')">إغلاق اللعبة</button>
                </div>
            </div>
            
            <div class="text-center">
                <button class="btn" onclick="showSection('lesson')"><i class="fas fa-arrow-up"></i> العودة للدرس</button>
                <button class="btn btn-accent" onclick="showSection('quiz')">اختبر معلوماتك <i class="fas fa-question"></i></button>
            </div>
        </div>
        
        <div class="section hidden" id="quiz">
            <h2 class="section-title"><i class="fas fa-question-circle"></i> اختبر معلوماتك</h2>
            <p>اختر الإجابة الصحيحة في الأسئلة التالية:</p>
            
            <div class="quiz-question">
                <p>1. ماذا يعني اسم الله "السيد"؟</p>
                <div class="quiz-option" onclick="checkAnswer(this, 'correct')">الحاكم المطلق الذي له السيادة الكاملة</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">الشخص الغني الذي يملك المال</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">الملك الذي يعيش في القصور</div>
            </div>
            
            <div class="quiz-question">
                <p>2. كيف تظهر سيادة الله في الكون؟</p>
                <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">بأنه يجبر الناس على الطاعة</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'correct')">بحكمته وعدله ورحمته في تدبير الأمور</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">بأنه يعطي المال لمن يطيعه</div>
            </div>
            
            <div class="quiz-question">
                <p>3. ما الفرق بين سيادة الله وسيادة البشر؟</p>
                <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">لا يوجد فرق بينهما</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'correct')">سيادة الله كاملة وعادلة ورحيمة</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">سيادة البشر أفضل لأنهم يفهمون احتياجات الناس</div>
            </div>
            
            <div id="quiz-feedback" class="feedback hidden"></div>
            
            <div class="text-center">
                <button class="btn" onclick="showSection('games')"><i class="fas fa-arrow-up"></i> العودة للألعاب</button>
                <button class="btn btn-accent" onclick="showSection('prayer')">الدعاء الختامي <i class="fas fa-hands-praying"></i></button>
            </div>
        </div>
        
        <div class="section hidden" id="prayer">
            <h2 class="section-title"><i class="fas fa-hands-praying"></i> دعاء ختامي</h2>
            <div class="prayer">
                <p>اللهم يا سيد السادات، ويا ملك الملوك، ويا رب الأرباب،</p>
                <p>أسألك بأسمائك الحسنى وصفاتك العلى،</p>
                <p>أن تجعلنا من عبادك المخلصين،</p>
                <p>الذين يعرفون قدر سيادتك،</p>
                <p>ويخضعون لحكمتك،</p>
                <p>ويستسلمون لعدلك،</p>
                <p>ويأنسون برحمتك.</p>
                <p>آمين يا رب العالمين.</p>
            </div>
            
            <div class="text-center">
                <button class="btn" onclick="showSection('quiz')"><i class="fas fa-arrow-up"></i> العودة للاختبار</button>
                <button class="btn btn-accent" onclick="showSection('intro')">ابدأ من جديد <i class="fas fa-redo"></i></button>
            </div>
        </div>
    </div>

    <script>
        // متغيرات الألعاب
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let selectedColor = '#000000';
        let canvas, ctx;
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let selectedItems = [];
        
        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            // تهيئة لوحة التلوين
            canvas = document.getElementById('coloring-canvas');
            ctx = canvas.getContext('2d');
            drawColoringImage();
            
            // إضافة أحداث لوحة التلوين
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
        });
        
        function showSection(sectionId) {
            // إخفاء جميع الأقسام أولاً
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // إظهار القسم المطلوب
            document.getElementById(sectionId).classList.remove('hidden');
            
            // التمرير لأعلى الصفحة
            window.scrollTo({top: 0, behavior: 'smooth'});
        }
        
        function checkAnswer(selectedOption, answerType) {
            // إزالة التحديد من جميع الخيارات
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.style.backgroundColor = '#f5f5f5';
            });
            
            // تحديد الخيار المختار
            selectedOption.style.backgroundColor = answerType === 'correct' ? '#d4edda' : '#f8d7da';
            
            // عرض التغذية الراجعة
            const feedback = document.getElementById('quiz-feedback');
            feedback.classList.remove('hidden');
            
            if(answerType === 'correct') {
                feedback.textContent = 'إجابة صحيحة! أحسنت!';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'إجابة غير صحيحة، حاول مرة أخرى!';
                feedback.className = 'feedback incorrect';
            }
        }
        
        function hideGame(gameId) {
            document.getElementById(gameId).classList.add('hidden');
        }
        
        // لعبة الذاكرة المعدلة
        function startMemoryGame() {
            document.getElementById('memory-game').classList.remove('hidden');
            const memoryBoard = document.getElementById('memory-board');
            memoryBoard.innerHTML = '';
            
            // آيات عن سيادة الله
            const verses = [
                "هو الله الملك",
                "له الملك وله الحمد",
                "يقلب الليل والنهار",
                "يدبر الأمر",
                "الله لا إله إلا هو",
                "له الخلق والأمر",
                "تبارك الله رب العالمين",
                "وهو على كل شيء قدير"
            ];
            
            // مضاعفة البطاقات وخلطها
            memoryCards = [...verses, ...verses];
            memoryCards = shuffleArray(memoryCards);
            
            flippedCards = [];
            matchedPairs = 0;
            
            // إنشاء بطاقات اللعبة
            memoryCards.forEach((verse, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.index = index;
                
                card.innerHTML = `
                    <div class="front">
                        <i class="fas fa-question"></i>
                    </div>
                    <div class="back">
                        ${verse}
                    </div>
                `;
                
                card.addEventListener('click', flipMemoryCard);
                memoryBoard.appendChild(card);
            });
        }
        
        function flipMemoryCard() {
            // إذا كانت البطاقة مقلوبة بالفعل أو متطابقة، لا تفعل شيئاً
            if (this.classList.contains('flipped') || this.classList.contains('matched')) {
                return;
            }
            
            // إذا كان هناك بطاقتين مقلوبتين بالفعل، لا تفعل شيئاً
            if (flippedCards.length === 2) {
                return;
            }
            
            // قلب البطاقة
            this.classList.add('flipped');
            
            // إضافة البطاقة إلى قائمة البطاقات المقلوبة
            flippedCards.push(this);
            
            // إذا كان هناك بطاقتين مقلوبتين، تحقق من تطابقهما
            if (flippedCards.length === 2) {
                setTimeout(checkMemoryMatch, 1000);
            }
        }
        
        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            const verse1 = memoryCards[parseInt(card1.dataset.index)];
            const verse2 = memoryCards[parseInt(card2.dataset.index)];
            
            if (verse1 === verse2) {
                // تطابق
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                
                // تحقق إذا انتهت اللعبة
                if (matchedPairs === memoryCards.length / 2) {
                    setTimeout(() => {
                        alert('مبروك! لقد أكملت اللعبة بنجاح!');
                    }, 500);
                }
            } else {
                // لا تطابق
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
            }
            
            // إفراغ قائمة البطاقات المقلوبة
            flippedCards = [];
        }
        
        // لعبة التوصيل
        function startMatchingGame() {
            document.getElementById('matching-game').classList.remove('hidden');
            const matchingPairs = document.getElementById('matching-pairs');
            matchingPairs.innerHTML = '';
            
            const pairs = [
                {name: "السيد", meaning: "الحاكم المطلق الذي له السيادة الكاملة"},
                {name: "الملك", meaning: "الذي له الملك الكامل"},
                {name: "الحكيم", meaning: "الذي يضع الأشياء في مواضعها"},
                {name: "الرحمن", meaning: "الذي وسعت رحمته كل شيء"}
            ];
            
            // خلط الأزواج
            const shuffledPairs = shuffleArray([...pairs, ...pairs]);
            
            // إنشاء عناصر اللعبة
            shuffledPairs.forEach((pair, index) => {
                const item = document.createElement('div');
                item.className = 'matching-item';
                item.dataset.index = index;
                item.dataset.name = pair.name;
                item.dataset.meaning = pair.meaning;
                item.textContent = pair.name.length < pair.meaning.length ? pair.name : pair.meaning;
                item.addEventListener('click', selectMatchingItem);
                matchingPairs.appendChild(item);
            });
            
            selectedItems = [];
        }
        
        function selectMatchingItem() {
            // إذا كان العنصر متطابقاً بالفعل، لا تفعل شيئاً
            if (this.classList.contains('matched')) {
                return;
            }
            
            // إذا كان العنصر محدداً بالفعل، قم بإلغاء تحديده
            if (this.classList.contains('selected')) {
                this.classList.remove('selected');
                selectedItems = selectedItems.filter(item => item !== this);
                return;
            }
            
            // إذا كان هناك عنصرين محددين بالفعل، لا تفعل شيئاً
            if (selectedItems.length === 2) {
                return;
            }
            
            // تحديد العنصر
            this.classList.add('selected');
            selectedItems.push(this);
            
            // إذا كان هناك عنصرين محددين، تحقق من تطابقهما
            if (selectedItems.length === 2) {
                setTimeout(checkMatchingPair, 1000);
            }
        }
        
        function checkMatchingPair() {
            const [item1, item2] = selectedItems;
            
            // تحقق إذا كان العنصرين يشكلان زوجاً متطابقاً
            if ((item1.dataset.name === item2.dataset.name && item1.dataset.meaning === item2.dataset.meaning) ||
                (item1.dataset.name && item2.dataset.meaning && item1.dataset.name === item2.dataset.meaning.split(' ')[0].replace('ال', '')) ||
                (item2.dataset.name && item1.dataset.meaning && item2.dataset.name === item1.dataset.meaning.split(' ')[0].replace('ال', ''))) {
                
                item1.classList.add('matched');
                item2.classList.add('matched');
                item1.classList.remove('selected');
                item2.classList.remove('selected');
                
                // تحقق إذا انتهت اللعبة
                const allMatched = document.querySelectorAll('.matching-item:not(.matched)').length === 0;
                if (allMatched) {
                    setTimeout(() => {
                        alert('أحسنت! لقد أكملت التوصيل بنجاح!');
                    }, 500);
                }
            } else {
                // لا تطابق
                item1.classList.remove('selected');
                item2.classList.remove('selected');
            }
            
            // إفراغ قائمة العناصر المحددة
            selectedItems = [];
        }
        
        // لعبة التلوين
        function startColoringGame() {
            document.getElementById('coloring-game').classList.remove('hidden');
            drawColoringImage();
        }
        
        function drawColoringImage() {
            // مسح اللوحة
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // رسم صورة بسيطة للتلوين (تاج وكتابة "الله السيد")
            ctx.font = '30px Tajawal';
            ctx.textAlign = 'center';
            ctx.fillText('', canvas.width/2, 50);
            
            // رسم تاج بسيط
            ctx.beginPath();
            ctx.moveTo(200, 100);
            ctx.lineTo(300, 100);
            ctx.lineTo(325, 150);
            ctx.lineTo(275, 200);
            ctx.lineTo(225, 200);
            ctx.lineTo(175, 150);
            ctx.closePath();
            ctx.stroke();
            
            // رسم تفاصيل التاج
            ctx.beginPath();
            ctx.moveTo(225, 100);
            ctx.lineTo(225, 70);
            ctx.lineTo(250, 90);
            ctx.lineTo(275, 70);
            ctx.lineTo(275, 100);
            ctx.stroke();
        }
        
        function selectColor(color) {
            selectedColor = color;
        }
        
        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            ctx.strokeStyle = selectedColor;
            ctx.lineWidth = 5;
            ctx.lineCap = 'round';
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawColoringImage();
        }
        
        // دالة لخلط المصفوفة
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>