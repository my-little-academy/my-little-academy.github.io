<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­ØµÙ† Ø§Ù„Ø£Ø³Ø±Ø§Ø± - Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯</title>
    <style>
        :root {
            --fortress-dark: #5D4037;
            --fortress-light: #8D6E63;
            --fortress-gold: #FFD700;
            --fortress-red: #D32F2F;
            --fortress-blue: #1976D2;
            --fortress-bg: #EFEBE9;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--fortress-bg);
            margin: 0;
            padding: 0;
            background-image: url('https://i.imgur.com/YbJqW3a.png');
            background-size: 40%;
            background-blend-mode: overlay;
        }
        
        .fortress-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .game-title {
            font-size: 2.8em;
            color: var(--fortress-dark);
            margin: 0;
            position: relative;
            display: inline-block;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }
        
        .game-title:after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--fortress-red), var(--fortress-blue));
            border-radius: 5px;
        }
        
        .game-subtitle {
            color: var(--fortress-light);
            font-size: 1.2em;
            margin-top: 15px;
            line-height: 1.6;
        }
        
        .fortress-map {
            background-color: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 3px solid var(--fortress-dark);
            position: relative;
            overflow: hidden;
        }
        
        .map-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 0 auto;
            max-width: 600px;
        }
        
        .map-cell {
            aspect-ratio: 1/1;
            background-color: var(--fortress-bg);
            border: 2px solid var(--fortress-light);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .map-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .map-cell.disabled {
            background-color: #BDBDBD;
            cursor: not-allowed;
        }
        
        .map-cell.trap {
            background-color: rgba(211, 47, 47, 0.1);
        }
        
        .map-cell.clue {
            background-color: rgba(25, 118, 210, 0.1);
        }
        
        .map-cell.treasure {
            background-color: rgba(255, 215, 0, 0.2);
        }
        
        .cell-icon {
            font-size: 1.5em;
            display: none;
        }
        
        .cell-number {
            font-weight: bold;
            color: var(--fortress-light);
        }
        
        .game-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .game-info {
            background-color: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--fortress-dark);
            display: flex;
            gap: 20px;
        }
        
        .info-item {
            text-align: center;
        }
        
        .info-label {
            font-size: 0.9em;
            color: var(--fortress-light);
        }
        
        .info-value {
            font-weight: bold;
            font-size: 1.2em;
            color: var(--fortress-dark);
        }
        
        .action-btn {
            background: linear-gradient(45deg, var(--fortress-red), var(--fortress-blue));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-family: 'Tajawal', sans-serif;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .action-btn:disabled {
            background: #BDBDBD;
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }
        
        .message-box {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-right: 5px solid var(--fortress-blue);
            display: none;
        }
        
        .message-title {
            font-weight: bold;
            color: var(--fortress-dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .message-title:before {
            content: "ğŸ’¬";
            margin-left: 10px;
        }
        
        .message-text {
            line-height: 1.7;
        }
        
        .khalid-tip {
            background-color: rgba(255, 215, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid var(--fortress-gold);
            display: none;
        }
        
        .khalid-tip:before {
            content: "Ù†ØµÙŠØ­Ø© Ù…Ù† Ø®Ø§Ù„Ø¯:";
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
            color: var(--fortress-dark);
        }
        
        .result-screen {
            text-align: center;
            padding: 30px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 30px;
            display: none;
            border: 3px solid var(--fortress-gold);
        }
        
        .result-title {
            font-size: 2em;
            color: var(--fortress-dark);
            margin-bottom: 20px;
        }
        
        .result-image {
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            background-image: url('https://i.imgur.com/JR8lQ7W.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            border: 5px solid var(--fortress-gold);
        }
        
        .result-message {
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 30px;
        }
        
        .restart-btn {
            background: linear-gradient(45deg, var(--fortress-blue), var(--fortress-red));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-family: 'Tajawal', sans-serif;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        @media (max-width: 768px) {
            .map-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .game-title {
                font-size: 2em;
            }
            
            .game-controls {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="fortress-container">
        <div class="game-header">
            <h1 class="game-title">Ø­ØµÙ† Ø§Ù„Ø£Ø³Ø±Ø§Ø±</h1>
            <p class="game-subtitle">Ø³Ø§Ø¹Ø¯ Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ ÙÙŠ Ø§Ø®ØªØ±Ø§Ù‚ Ø­ØµÙ† Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡ ÙˆØ§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ø³Ù„ÙˆØ¨Ø©!</p>
        </div>
        
        <div class="game-controls">
            <div class="game-info">
                <div class="info-item">
                    <div class="info-label">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</div>
                    <div class="info-value" id="attempts">5</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Ø§Ù„Ø£Ø¯Ù„Ø©</div>
                    <div class="info-value" id="clues">0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Ø§Ù„Ù…ØµØ§Ø¦Ø¯</div>
                    <div class="info-value" id="traps">0</div>
                </div>
            </div>
            <button class="action-btn" id="hint-btn" onclick="showHint()">Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø©</button>
        </div>
        
        <div class="khalid-tip" id="khalid-tip">
            Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ ÙƒØ§Ù† ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ ÙˆØ§Ù„ØªØ®Ø·ÙŠØ· ÙÙŠ Ø­Ø±ÙˆØ¨Ù‡ØŒ Ø­Ø§ÙˆÙ„ Ø£Ù† ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¯Ù„Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù…ØµØ§Ø¦Ø¯!
        </div>
        
        <div class="message-box" id="message-box">
            <div class="message-title">Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø®Ø§Ù„Ø¯</div>
            <div class="message-text" id="message-text"></div>
        </div>
        
        <div class="fortress-map">
            <div class="map-grid" id="map-grid">
                <!-- Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
        
        <button class="action-btn" id="restart-btn" onclick="restartGame()" style="display: none;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
        
        <div class="result-screen" id="result-screen">
            <div class="result-title" id="result-title"></div>
            <div class="result-image"></div>
            <div class="result-message" id="result-message"></div>
            <button class="restart-btn" onclick="restartGame()">Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
        </div>
    </div>

    <script>
        // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        const gameState = {
            attempts: 5,
            cluesFound: 0,
            trapsTriggered: 0,
            revealedCells: 0,
            totalClues: 3,
            totalTraps: 4,
            treasureLocation: null,
            gameOver: false
        };
        
        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        function generateMap() {
            const grid = document.getElementById('map-grid');
            grid.innerHTML = '';
            
            // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ØµØ§Ø¦Ø¯ ÙˆØ§Ù„Ø£Ø¯Ù„Ø© ÙˆØ§Ù„ÙƒÙ†Ø² Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
            const totalCells = 25;
            const cellIndices = Array.from({length: totalCells}, (_, i) => i);
            
            // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙƒÙ†Ø²
            gameState.treasureLocation = Math.floor(Math.random() * totalCells);
            
            // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ØµØ§Ø¦Ø¯
            const trapIndices = [];
            while (trapIndices.length < gameState.totalTraps) {
                const randomIndex = Math.floor(Math.random() * totalCells);
                if (randomIndex !== gameState.treasureLocation && !trapIndices.includes(randomIndex)) {
                    trapIndices.push(randomIndex);
                }
            }
            
            // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø£Ø¯Ù„Ø©
            const clueIndices = [];
            while (clueIndices.length < gameState.totalClues) {
                const randomIndex = Math.floor(Math.random() * totalCells);
                if (randomIndex !== gameState.treasureLocation && 
                    !trapIndices.includes(randomIndex) && 
                    !clueIndices.includes(randomIndex)) {
                    clueIndices.push(randomIndex);
                }
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ù„Ø§ÙŠØ§
            for (let i = 0; i < totalCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'map-cell';
                cell.dataset.index = i;
                
                if (i === gameState.treasureLocation) {
                    cell.dataset.type = 'treasure';
                } else if (trapIndices.includes(i)) {
                    cell.dataset.type = 'trap';
                } else if (clueIndices.includes(i)) {
                    cell.dataset.type = 'clue';
                } else {
                    cell.dataset.type = 'empty';
                }
                
                const cellNumber = document.createElement('div');
                cellNumber.className = 'cell-number';
                cellNumber.textContent = i + 1;
                cell.appendChild(cellNumber);
                
                const cellIcon = document.createElement('div');
                cellIcon.className = 'cell-icon';
                cell.appendChild(cellIcon);
                
                cell.addEventListener('click', () => exploreCell(i));
                grid.appendChild(cell);
            }
        }
        
        // Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø®Ù„ÙŠØ©
        function exploreCell(index) {
            if (gameState.gameOver || gameState.attempts <= 0) return;
            
            const cell = document.querySelector(`.map-cell[data-index="${index}"]`);
            if (cell.classList.contains('disabled')) return;
            
            cell.classList.add('disabled');
            const cellType = cell.dataset.type;
            const icon = cell.querySelector('.cell-icon');
            icon.style.display = 'block';
            
            // Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ù„ÙŠØ©
            switch (cellType) {
                case 'treasure':
                    icon.textContent = 'ğŸ†';
                    cell.classList.add('treasure');
                    showMessage('Ù„Ù‚Ø¯ ÙˆØ¬Ø¯Øª Ø§Ù„ÙƒÙ†Ø²! Ù„Ù‚Ø¯ Ù†Ø¬Ø­Øª ÙÙŠ Ù…Ù‡Ù…ØªÙƒ ÙˆØ§Ø³ØªØ¹Ø¯Øª Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ø³Ù„ÙˆØ¨Ø©.', 'Ù…Ø¨Ø±ÙˆÙƒ!');
                    gameState.gameOver = true;
                    showResult(true);
                    break;
                    
                case 'trap':
                    icon.textContent = 'ğŸ’¥';
                    cell.classList.add('trap');
                    gameState.attempts--;
                    gameState.trapsTriggered++;
                    showMessage('Ù„Ù‚Ø¯ ÙˆÙ‚Ø¹Øª ÙÙŠ Ù…ØµÙŠØ¯Ø©! Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ ÙƒØ§Ù† ÙŠØ­Ø°Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…Ù† Ø§Ù„ØªØ³Ø±Ø¹ ÙÙŠ Ø§Ù„Ù‡Ø¬ÙˆÙ….', 'Ø§Ù†ØªØ¨Ù‡!');
                    updateStats();
                    break;
                    
                case 'clue':
                    icon.textContent = 'ğŸ”';
                    cell.classList.add('clue');
                    gameState.cluesFound++;
                    showMessage('Ù„Ù‚Ø¯ ÙˆØ¬Ø¯Øª Ø¯Ù„ÙŠÙ„Ø§Ù‹! Ù‡Ø°Ø§ Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙƒÙ†Ø² ÙˆØªØ¬Ù†Ø¨ Ø§Ù„Ù…ØµØ§Ø¦Ø¯.', 'Ø£Ø­Ø³Ù†Øª!');
                    updateStats();
                    break;
                    
                default:
                    icon.textContent = 'ğŸ•³ï¸';
                    gameState.attempts--;
                    showMessage('Ù„Ø§ Ø´ÙŠØ¡ Ù‡Ù†Ø§. Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ ÙƒØ§Ù† ÙŠÙ‚ÙˆÙ„: "Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Ø¬Ø§Ø­".', 'ØªØ­Ù„Ù‰ Ø¨Ø§Ù„ØµØ¨Ø±');
                    updateStats();
            }
            
            gameState.revealedCells++;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
            if (gameState.attempts <= 0 && !gameState.gameOver) {
                showMessage('Ù„Ù‚Ø¯ Ù†ÙØ°Øª Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ! Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ ÙƒØ§Ù† ÙŠØ¹Ù„Ù… Ø£Ù† Ø§Ù„Ù‡Ø²ÙŠÙ…Ø© Ù…Ø¤Ù‚ØªØ© ÙˆØ§Ù„Ø¹Ø¨Ø±Ø© ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡.', 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª');
                showResult(false);
                gameState.gameOver = true;
            }
        }
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
        function showMessage(text, title = 'Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø®Ø§Ù„Ø¯') {
            const messageBox = document.getElementById('message-box');
            const messageTitle = document.querySelector('.message-title');
            const messageText = document.getElementById('message-text');
            
            messageTitle.textContent = title;
            messageText.textContent = text;
            messageBox.style.display = 'block';
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, 5000);
        }
        
        // Ø¹Ø±Ø¶ ØªÙ„Ù…ÙŠØ­
        function showHint() {
            const tip = document.getElementById('khalid-tip');
            tip.style.display = 'block';
            
            setTimeout(() => {
                tip.style.display = 'none';
            }, 5000);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            document.getElementById('attempts').textContent = gameState.attempts;
            document.getElementById('clues').textContent = gameState.cluesFound;
            document.getElementById('traps').textContent = gameState.trapsTriggered;
            
            if (gameState.attempts <= 0 || gameState.gameOver) {
                document.getElementById('hint-btn').disabled = true;
                document.getElementById('restart-btn').style.display = 'block';
            }
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function showResult(success) {
            const resultScreen = document.getElementById('result-screen');
            const resultTitle = document.getElementById('result-title');
            const resultMessage = document.getElementById('result-message');
            
            if (success) {
                resultTitle.textContent = 'Ù…Ù‡Ù…Ø© Ù†Ø§Ø¬Ø­Ø©!';
                resultMessage.textContent = `Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø«Ù„ Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯! ÙˆØ¬Ø¯Øª ${gameState.cluesFound} Ø£Ø¯Ù„Ø© ÙˆØªØ¬Ù†Ø¨Øª ${gameState.totalTraps - gameState.trapsTriggered} Ù…ØµØ§Ø¦Ø¯.`;
            } else {
                resultTitle.textContent = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
                resultMessage.textContent = `Ù„Ù… ØªÙ†Ø¬Ø­ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø©ØŒ ÙˆÙ„ÙƒÙ† ÙƒÙ…Ø§ ÙƒØ§Ù† Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ ÙŠÙ‚ÙˆÙ„: "Ø§Ù„ÙØ´Ù„ Ù‡Ùˆ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Ø¬Ø§Ø­". ÙˆØ¬Ø¯Øª ${gameState.cluesFound} Ø£Ø¯Ù„Ø© Ù…Ù† Ø£ØµÙ„ ${gameState.totalClues}.`;
            }
            
            resultScreen.style.display = 'block';
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function restartGame() {
            gameState.attempts = 5;
            gameState.cluesFound = 0;
            gameState.trapsTriggered = 0;
            gameState.revealedCells = 0;
            gameState.gameOver = false;
            
            document.getElementById('hint-btn').disabled = false;
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('message-box').style.display = 'none';
            document.getElementById('khalid-tip').style.display = 'none';
            
            updateStats();
            generateMap();
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        generateMap();
        updateStats();
    </script>
</body>
</html>