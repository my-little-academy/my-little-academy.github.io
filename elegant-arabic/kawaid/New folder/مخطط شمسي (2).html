<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>مخطط تشعبي مع تأثير Pulse عند المرور</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Baloo+2&display=swap');

  /* تنسيق عام للجسم */
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at center, #ffefba, #ffffff);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Baloo 2', cursive, Arial, sans-serif;
  }

  /* الحاوية الرئيسية للمخطط */
  .container {
    position: relative;
    width: 650px;
    height: 650px;
  }

  /* تعريف خطوط svg فوق البطاقات */
  .svg-lines {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  /* تنسيق الخطوط */
  .svg-lines line {
    stroke: #f57c00;            /* لون الخط */
    stroke-width: 6;            /* سمك الخط */
    stroke-linecap: round;      /* نهايات دائرية */
    filter: drop-shadow(0 0 5px #ffa726); /* ظل خفيف */
    transition: stroke-width 0.3s ease;
  }
  /* عند المرور بالماوس على الخط */
  .svg-lines line:hover {
    stroke-width: 10;
    stroke: #ffb300;
  }

  /* تنسيق البطاقة العامة */
  .card {
    position: absolute;
    width: 140px;
    height: 100px;
    border-radius: 20px;
    background: linear-gradient(135deg, #ffd54f, #ffb300);
    border: 4px solid #ff6f00;
    cursor: pointer;
    color: #4a2700;
    font-weight: 900;
    font-size: 1.1rem;
    user-select: none;

    /* تمركز الكتابة وسط البطاقة */
    display: flex;
    justify-content: center;
    align-items: center;

    /* تدرج ظلي خفيف */
    box-shadow: 0 10px 15px rgba(255, 180, 0, 0.3);

    /* تعيين حركة pulse عند المرور فقط */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  /* حركة pulse عند hover */
  .card:hover {
    animation: pulse 1.5s ease-in-out infinite;
  }

  /* حركة نبض pulse */
  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 10px 15px rgba(255, 180, 0, 0.3);
    }
    50% {
      transform: scale(1.07);
      box-shadow: 0 15px 25px rgba(255, 180, 0, 0.6);
    }
  }

  /* البطاقة المركزية */
  .center {
    top: 50%;
    left: 50%;
    margin-left: -70px;
    margin-top: -50px;
    background: linear-gradient(135deg, #64b5f6, #1976d2);
    border-color: #0d47a1;
    color: #fff;
    font-size: 1.3rem;
    user-select: none;

    /* مركزية الكتابة */
    display: flex;
    justify-content: center;
    align-items: center;

    /* ضوء توهج ثابت وليس متحرك */
    box-shadow: 0 0 25px 8px #42a5f5cc;
  }

  /* نص داخل كل بطاقة يمكن تعديله */
  .card textarea {
    width: 90%;
    height: 70%;
    resize: none;
    border: none;
    background: transparent;
    font-family: inherit;
    font-weight: 900;
    font-size: 1.1rem;
    color: inherit;
    text-align: center;
    outline: none;
    padding: 10px 8px;
    border-radius: 12px;
    box-shadow: inset 0 0 6px rgba(255 255 255 / 0.7);

    /* تمركز النص عمودياً وأفقياً */
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .card textarea::placeholder {
    color: #ffe082;
    font-weight: 700;
  }

  /* ألوان ومواقع خاصة لكل بطاقة ثانوية */
  .card1 {
    top: 12%;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #ffcc80, #ffb300);
  }
  .card2 {
    top: 30%;
    left: 85%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #ffab91, #ff6f00);
  }
  .card3 {
    top: 70%;
    left: 85%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #ce93d8, #7b1fa2);
  }
  .card4 {
    top: 88%;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #81d4fa, #0288d1);
    color: #fff;
  }
  .card5 {
    top: 70%;
    left: 15%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #a5d6a7, #2e7d32);
  }
  .card6 {
    top: 30%;
    left: 15%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #fff59d, #fbc02d);
  }

</style>
</head>
<body>

<div class="container" id="diagram">
  <!-- خطوط الربط باستخدام svg -->
  <svg class="svg-lines">
    <line id="line1" />
    <line id="line2" />
    <line id="line3" />
    <line id="line4" />
    <line id="line5" />
    <line id="line6" />
  </svg>

  <!-- البطاقة المركزية -->
  <div class="card center" id="center">
    <textarea placeholder="الفكرة الرئيسية"></textarea>
  </div>

  <!-- البطاقات الفرعية -->
  <div class="card card1" id="card1"><textarea placeholder="فرع 1"></textarea></div>
  <div class="card card2" id="card2"><textarea placeholder="فرع 2"></textarea></div>
  <div class="card card3" id="card3"><textarea placeholder="فرع 3"></textarea></div>
  <div class="card card4" id="card4"><textarea placeholder="فرع 4"></textarea></div>
  <div class="card card5" id="card5"><textarea placeholder="فرع 5"></textarea></div>
  <div class="card card6" id="card6"><textarea placeholder="فرع 6"></textarea></div>
</div>

<script>
  // دالة للحصول على مركز عنصر معين في الصفحة
  function getCenter(el) {
    const rect = el.getBoundingClientRect();
    return {
      x: rect.left + rect.width / 2,
      y: rect.top + rect.height / 2
    };
  }

  // دالة لحساب نقطة على حافة العنصر بناء على الاتجاه
  function adjustToEdge(from, to, size) {
    const dx = to.x - from.x;
    const dy = to.y - from.y;
    const angle = Math.atan2(dy, dx);
    const offsetX = Math.cos(angle) * size.width / 2;
    const offsetY = Math.sin(angle) * size.height / 2;
    return {
      x: from.x + offsetX,
      y: from.y + offsetY
    };
  }

  // رسم الخطوط بين البطاقة المركزية وباقي البطاقات بحيث لا تتجاوز حواف البطاقات
  function drawLines() {
    const centerEl = document.getElementById("center");
    const centerRect = centerEl.getBoundingClientRect();
    const centerPoint = getCenter(centerEl);
    const containerRect = document.getElementById("diagram").getBoundingClientRect();

    for (let i = 1; i <= 6; i++) {
      const cardEl = document.getElementById("card" + i);
      const cardRect = cardEl.getBoundingClientRect();
      const cardCenter = getCenter(cardEl);
      const line = document.getElementById("line" + i);

      // بداية الخط عند حافة البطاقة المركزية باتجاه البطاقة الفرعية
      const fromEdge = adjustToEdge(centerPoint, cardCenter, centerRect);

      // نهاية الخط عند حافة البطاقة الفرعية باتجاه البطاقة المركزية
      const toEdge = adjustToEdge(cardCenter, centerPoint, cardRect);

      // ضبط إحداثيات الخط داخل الحاوية النسبية
      line.setAttribute("x1", fromEdge.x - containerRect.left);
      line.setAttribute("y1", fromEdge.y - containerRect.top);
      line.setAttribute("x2", toEdge.x - containerRect.left);
      line.setAttribute("y2", toEdge.y - containerRect.top);
    }
  }

  // نرسم الخطوط عند تحميل الصفحة وعند تغيير حجم النافذة
  window.addEventListener("load", drawLines);
  window.addEventListener("resize", drawLines);
</script>

</body>
</html>
