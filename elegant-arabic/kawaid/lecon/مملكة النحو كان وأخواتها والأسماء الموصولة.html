<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مملكة النحو: كان وأخواتها والأسماء الموصولة</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
            color: #333;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #2a6496, #4CAF50);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        h1 {
            margin: 0;
            font-size: 2.2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .tab-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .tab {
            padding: 12px 25px;
            background-color: #e0e0e0;
            border: none;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            border-radius: 8px 8px 0 0;
            margin: 0 5px;
        }
        
        .tab:hover {
            background-color: #d0d0d0;
        }
        
        .tab.active {
            background-color: #4CAF50;
            color: white;
        }
        
        .content-section {
            background-color: white;
            padding: 25px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-height: 400px;
            display: none;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* تصميم القصة */
        .story-content {
            line-height: 1.8;
            font-size: 18px;
        }
        
        .story-image {
            text-align: center;
            margin: 20px 0;
        }
        
        .story-image img {
            max-width: 80%;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        /* تصميم الأسئلة */
        .question {
            font-size: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 10px;
            border-right: 5px solid #4CAF50;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .option {
            padding: 12px;
            background-color: #e9f7ef;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            text-align: center;
        }
        
        .option:hover {
            background-color: #d4edda;
            transform: translateY(-3px);
        }
        
        .feedback {
            font-size: 18px;
            font-weight: bold;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }
        
        .correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .explanation {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 5px solid #ffc107;
            display: none;
        }
        
        .next-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 8px;
            display: none;
            margin: 10px auto;
        }
        
        .next-btn:hover {
            background-color: #45a049;
        }
        
        /* تصميم اللعبة */
        .game-container {
            text-align: center;
        }
        
        .game-board {
            display: inline-block;
            background-color: #e9f7ef;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .sentence-part {
            display: inline-block;
            padding: 10px 15px;
            margin: 5px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .sentence-part:hover {
            background-color: #d4edda;
            transform: translateY(-3px);
        }
        
        .sentence-part.selected {
            background-color: #4CAF50;
            color: white;
        }
        
        .drop-area {
            min-height: 60px;
            background-color: #f8f9fa;
            border: 2px dashed #6c757d;
            border-radius: 8px;
            margin: 20px 0;
            padding: 15px;
        }
        
        .drop-area.highlight {
            border-color: #4CAF50;
            background-color: #e9f7ef;
        }
        
        .check-btn {
            background-color: #ffc107;
            color: #212529;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .check-btn:hover {
            background-color: #e0a800;
        }
        
        .score-display {
            font-size: 20px;
            font-weight: bold;
            margin: 15px 0;
            color: #2a6496;
        }
        
        /* تصميم الاستنتاج */
        .summary-box {
            background-color: #e9f7ef;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #4CAF50;
        }
        
        .summary-title {
            color: #2a6496;
            font-size: 22px;
            margin-bottom: 15px;
        }
        
        .summary-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #d4edda;
        }
        
        .summary-item:last-child {
            border-bottom: none;
        }
        
        .example {
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        
        /* تصميم متجاوب */
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>مملكة النحو: كان وأخواتها والأسماء الموصولة</h1>
            <p>تعلّم قواعد اللغة العربية بطريقة ممتعة وتفاعلية</p>
        </header>
        
        <div class="tab-container">
            <button class="tab active" onclick="openTab('story')">القصة التعليمية</button>
            <button class="tab" onclick="openTab('questions')">أسئلة الفهم</button>
            <button class="tab" onclick="openTab('summary')">الاستنتاج</button>
            <button class="tab" onclick="openTab('game')">اللعبة المبدعة</button>
        </div>
        
        <!-- قسم القصة التعليمية -->
        <div id="story" class="content-section active">
            <div class="story-content">
                <h2>مغامرات كان في بلدة النحو</h2>
                
                <div class="story-image">
                    <img src="https://via.placeholder.com/600x300?text=صورة+القصة" alt="صورة القصة">
                </div>
                
                <p>في بلدة النحو السعيدة، كانت تعيش الأميرات النحويات: <strong>كان</strong> وأخواتها <strong>أصبح، أضحى، ظل، بات، صار، ليس، ما زال، ما انفك، ما فتئ، ما برح، ما دام</strong>.</p>
                
                <p>كان لكل أخت قدرة سحرية خاصة على تغيير معاني الجمل. الأميرة "كان" تستطيع تحويل الجمل الاسمية إلى جمل في الماضي، والأميرة "أصبح" تحولها إلى جمل تدل على التحول، وهكذا.</p>
                
                <p>ذات يوم، اختفت الأميرة "كان" فجأة من البلدة! وبدأت المشاكل تظهر في جميع أنحاء المملكة:</p>
                
                <ul>
                    <li>الجملة "الجو جميل" فقدت معناها الزمني!</li>
                    <li>الجملة "الطالب مجتهد" لم تعد توضح هل هو ما زال مجتهدًا أم لا!</li>
                </ul>
                
                <p>قررت الأخوات النحويات الاستعانة بك - أيها البطل - لمساعدتهم في إيجاد "كان" وإعادة النظام إلى بلدة النحو.</p>
                
                <p>في رحلتك، ستتعلم:</p>
                <ol>
                    <li>كيف تعمل كان وأخواتها</li>
                    <li>كيف تنصب الخبر وترفع المبتدأ</li>
                    <li>متى تستخدم كل أخت</li>
                    <li>كيف تميز بين أخوات كان</li>
                </ol>
                
                <p>هل أنت مستعد للمغامرة؟ هيا بنا!</p>
            </div>
        </div>
        
        <!-- قسم أسئلة الفهم -->
        <div id="questions" class="content-section">
            <h2>أسئلة فهم القصة</h2>
            
            <div id="question1" class="question-container">
                <div class="question">
                    ما هي الوظيفة الأساسية للأميرة "كان" في بلدة النحو؟
                </div>
                
                <div class="options">
                    <div class="option" onclick="checkAnswer(1, 0)">تحويل الجمل الاسمية إلى جمل في الماضي</div>
                    <div class="option" onclick="checkAnswer(1, 1)">جعل الخبر مرفوعًا</div>
                    <div class="option" onclick="checkAnswer(1, 2)">حذف المبتدأ من الجملة</div>
                    <div class="option" onclick="checkAnswer(1, 3)">تحويل الفعل إلى اسم</div>
                </div>
                
                <div id="feedback1" class="feedback"></div>
                <div id="explanation1" class="explanation">
                    الوظيفة الأساسية لـ "كان" هي تحويل الجمل الاسمية إلى جمل في الماضي، حيث ترفع المبتدأ ويسمى اسمها، وتنصب الخبر ويسمى خبرها.
                </div>
                
                <button id="next1" class="next-btn" onclick="nextQuestion(1)">السؤال التالي</button>
            </div>
            
            <div id="question2" class="question-container" style="display:none;">
                <div class="question">
                    ماذا حدث عندما اختفت الأميرة "كان" من بلدة النحو؟
                </div>
                
                <div class="options">
                    <div class="option" onclick="checkAnswer(2, 0)">فقدت الجمل معناها الزمني</div>
                    <div class="option" onclick="checkAnswer(2, 1)">اختفت جميع الأفعال</div>
                    <div class="option" onclick="checkAnswer(2, 2)">أصبحت الجمل كلها فعلية</div>
                    <div class="option" onclick="checkAnswer(2, 3)">تحولت البلدة إلى بلدة الصرف</div>
                </div>
                
                <div id="feedback2" class="feedback"></div>
                <div id="explanation2" class="explanation">
                    عندما اختفت "كان"، فقدت الجمل الاسمية معناها الزمني، فمثلاً الجملة "الجو جميل" لم تعد توضح هل هذا في الماضي أم الحاضر.
                </div>
                
                <button id="next2" class="next-btn" onclick="nextQuestion(2)">السؤال التالي</button>
            </div>
            
            <div id="question3" class="question-container" style="display:none;">
                <div class="question">
                    أي من الجمل التالية تحتاج إلى "كان" لتصبح صحيحة؟
                </div>
                
                <div class="options">
                    <div class="option" onclick="checkAnswer(3, 0)">الطالب مجتهد</div>
                    <div class="option" onclick="checkAnswer(3, 1)">ذهب الطالب إلى المدرسة</div>
                    <div class="option" onclick="checkAnswer(3, 2)">الكتاب على الطاولة</div>
                    <div class="option" onclick="checkAnswer(3, 3)">يذاكر الطالب دروسه</div>
                </div>
                
                <div id="feedback3" class="feedback"></div>
                <div id="explanation3" class="explanation">
                    الجملة "الطالب مجتهد" تحتاج إلى "كان" إذا أردنا التعبير عن الماضي: "كان الطالب مجتهدًا". أما الجمل الأخرى فهي إما فعلية أو اسمية لا تحتاج إلى "كان".
                </div>
                
                <button id="next3" class="next-btn" onclick="nextQuestion(3)">الانتقال إلى الاستنتاج</button>
            </div>
        </div>
        
        <!-- قسم الاستنتاج -->
        <div id="summary" class="content-section">
            <h2>الاستنتاج: قواعد كان وأخواتها</h2>
            
            <div class="summary-box">
                <div class="summary-title">ما هي كان وأخواتها؟</div>
                <p>كان وأخواتها هي أفعال ناسخة تدخل على الجملة الاسمية فترفع المبتدأ ويسمى اسمها، وتنصب الخبر ويسمى خبرها.</p>
            </div>
            
            <div class="summary-box">
                <div class="summary-title">أخوات كان</div>
                
                <div class="summary-item">
                    <strong>كان:</strong> للدلالة على الزمن الماضي
                    <div class="example">كان الطالبُ مجتهدًا</div>
                </div>
                
                <div class="summary-item">
                    <strong>أصبح، أضحى، صار:</strong> للدلالة على التحول
                    <div class="example">أصبح الجوُّ جميلًا</div>
                </div>
                
                <div class="summary-item">
                    <strong>ظل، بات، أمسى:</strong> للدلالة على الوقت
                    <div class="example">ظلَّ المطرُ غزيرًا</div>
                </div>
                
                <div class="summary-item">
                    <strong>ليس، ما زال، ما انفك، ما فتئ، ما برح:</strong> للنفي
                    <div class="example">ليس الكسلُ محمودًا</div>
                </div>
                
                <div class="summary-item">
                    <strong>ما دام:</strong> للدلالة على الظرفية
                    <div class="example">سأظل أحترمك ما دامَ الاحترامُ موجودًا</div>
                </div>
            </div>
            
            <div class="summary-box">
                <div class="summary-title">قاعدة إعرابية</div>
                <p>تدخل كان وأخواتها على الجملة الاسمية فترفع المبتدأ ويسمى اسمها، وتنصب الخبر ويسمى خبرها.</p>
                <div class="example">
                    كان الطالبُ مجتهدًا<br>
                    كان: فعل ماض ناقص مبني على الفتح<br>
                    الطالب: اسم كان مرفوع وعلامة رفعه الضمة<br>
                    مجتهدًا: خبر كان منصوب وعلامة نصبه الفتحة
                </div>
            </div>
        </div>
        
        <!-- قسم اللعبة المبدعة -->
        <div id="game" class="content-section">
            <h2>اللعبة المبدعة: مملكة الأخوات الناقصة</h2>
            
            <div class="game-container">
                <div class="score-display" id="score">النقاط: 0</div>
                
                <div id="game-level1" class="game-level">
                    <h3>المرحلة 1: برج كان</h3>
                    <p>اختر المكان الصحيح لإضافة "كان" أو إحدى أخواتها</p>
                    
                    <div class="game-board">
                        <div class="sentence-part" onclick="selectWord(0)">الطالب</div>
                        <div class="sentence-part" onclick="selectWord(1)">مجتهدًا</div>
                        <div class="sentence-part" onclick="selectWord(2)">في</div>
                        <div class="sentence-part" onclick="selectWord(3)">المدرسة</div>
                        
                        <div class="drop-area" id="drop-area" ondragover="allowDrop(event)" ondrop="drop(event)">
                            اسحب "كان" أو إحدى أخواتها هنا
                        </div>
                        
                        <div class="word-options">
                            <div class="sentence-part draggable" draggable="true" ondragstart="drag(event)" id="word-kan">كان</div>
                            <div class="sentence-part draggable" draggable="true" ondragstart="drag(event)" id="word-asbah">أصبح</div>
                            <div class="sentence-part draggable" draggable="true" ondragstart="drag(event)" id="word-zal">ظل</div>
                        </div>
                    </div>
                    
                    <button class="check-btn" onclick="checkGameAnswer()">تحقق</button>
                    <div id="game-feedback" class="feedback"></div>
                </div>
                
                <div id="game-level2" class="game-level" style="display:none;">
                    <h3>المرحلة 2: معركة الأخوات</h3>
                    <p>اختر الأخت المناسبة لكل جملة</p>
                    
                    <div class="game-board">
                        <div class="question">___ الليلُ هادئًا</div>
                        
                        <div class="options">
                            <div class="option" onclick="checkGameLevel2Answer(0)">كان</div>
                            <div class="option" onclick="checkGameLevel2Answer(1)">أصبح</div>
                            <div class="option" onclick="checkGameLevel2Answer(2)">ظل</div>
                            <div class="option" onclick="checkGameLevel2Answer(3)">ليس</div>
                        </div>
                    </div>
                    
                    <div id="game-feedback2" class="feedback"></div>
                </div>
                
                <div id="game-level3" class="game-level" style="display:none;">
                    <h3>المرحلة 3: التحدي النهائي</h3>
                    <p>أكمل الجملة باستخدام الأداة المناسبة</p>
                    
                    <div class="game-board">
                        <div id="scrambled-sentence"></div>
                        
                        <div class="word-options" id="word-options3"></div>
                    </div>
                    
                    <button class="check-btn" onclick="checkGameLevel3Answer()">تحقق</button>
                    <div id="game-feedback3" class="feedback"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // تبويب الصفحة
        function openTab(tabName) {
            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            const contents = document.getElementsByClassName('content-section');
            for (let i = 0; i < contents.length; i++) {
                contents[i].classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        // أسئلة الفهم
        let currentQ = 1;
        const correctAnswers = {
            1: 0,
            2: 0,
            3: 0
        };
        
        function checkAnswer(qNum, selected) {
            const feedback = document.getElementById(`feedback${qNum}`);
            const explanation = document.getElementById(`explanation${qNum}`);
            const nextBtn = document.getElementById(`next${qNum}`);
            
            if (selected === correctAnswers[qNum]) {
                feedback.textContent = 'إجابة صحيحة! أحسنت!';
                feedback.className = 'feedback correct';
                feedback.style.display = 'block';
            } else {
                feedback.textContent = 'إجابة خاطئة! حاول مرة أخرى.';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
            }
            
            explanation.style.display = 'block';
            nextBtn.style.display = 'block';
        }
        
        function nextQuestion(current) {
            document.getElementById(`question${current}`).style.display = 'none';
            document.getElementById(`question${current + 1}`).style.display = 'block';
            currentQ = current + 1;
        }
        
        // اللعبة
        let gameScore = 0;
        let selectedWord = null;
        let currentGameLevel = 1;
        
        function selectWord(index) {
            const words = document.querySelectorAll('.sentence-part:not(.draggable)');
            words.forEach(word => word.classList.remove('selected'));
            
            if (selectedWord !== index) {
                words[index].classList.add('selected');
                selectedWord = index;
            } else {
                selectedWord = null;
            }
        }
        
        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('highlight');
        }
        
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }
        
        function drop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.remove('highlight');
            
            const data = ev.dataTransfer.getData("text");
            const word = document.getElementById(data).textContent;
            
            if (selectedWord !== null && currentGameLevel === 1) {
                const words = document.querySelectorAll('.sentence-part:not(.draggable)');
                words[selectedWord].textContent = word;
                words[selectedWord].classList.add('placed');
            }
        }
        
        function checkGameAnswer() {
            const feedback = document.getElementById('game-feedback');
            const sentenceParts = document.querySelectorAll('.sentence-part:not(.draggable)');
            
            if (sentenceParts[0].textContent === "كان" || 
                sentenceParts[0].textContent === "أصبح" || 
                sentenceParts[0].textContent === "ظل") {
                
                feedback.textContent = 'أحسنت! الجملة الصحيحة: "' + 
                    sentenceParts[0].textContent + ' الطالبُ مجتهدًا في المدرسة"';
                feedback.className = 'feedback correct';
                feedback.style.display = 'block';
                
                gameScore += 10;
                document.getElementById('score').textContent = 'النقاط: ' + gameScore;
                
                setTimeout(() => {
                    document.getElementById('game-level1').style.display = 'none';
                    document.getElementById('game-level2').style.display = 'block';
                    currentGameLevel = 2;
                }, 2000);
            } else {
                feedback.textContent = 'ليس صحيحًا، حاول مرة أخرى!';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
            }
        }
        
        function checkGameLevel2Answer(selected) {
            const feedback = document.getElementById('game-feedback2');
            
            if (selected === 0) { // كان
                feedback.textContent = 'أحسنت! "كان الليلُ هادئًا" هي الإجابة الصحيحة';
                feedback.className = 'feedback correct';
                feedback.style.display = 'block';
                
                gameScore += 15;
                document.getElementById('score').textContent = 'النقاط: ' + gameScore;
                
                setTimeout(() => {
                    document.getElementById('game-level2').style.display = 'none';
                    document.getElementById('game-level3').style.display = 'block';
                    currentGameLevel = 3;
                    setupLevel3();
                }, 2000);
            } else {
                feedback.textContent = 'ليس صحيحًا، حاول مرة أخرى!';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
            }
        }
        
        function setupLevel3() {
            const scrambled = document.getElementById('scrambled-sentence');
            scrambled.innerHTML = '___ الطقسُ جميلًا ___ الشمسُ ساطعة';
            
            const options = document.getElementById('word-options3');
            options.innerHTML = '';
            
            const words = ['كان', 'أصبح', 'و', 'لكن', 'فكانت', 'ظل'];
            
            words.forEach((word, index) => {
                const div = document.createElement('div');
                div.className = 'sentence-part draggable';
                div.textContent = word;
                div.draggable = true;
                div.id = 'l3-word-' + index;
                div.ondragstart = drag;
                options.appendChild(div);
            });
            
            const dropArea = document.createElement('div');
            dropArea.className = 'drop-area';
            dropArea.id = 'drop-area3';
            dropArea.ondragover = allowDrop;
            dropArea.ondrop = dropLevel3;
            dropArea.innerHTML = 'اسحب الكلمات هنا لتكوين الجملة';
            scrambled.appendChild(document.createElement('br'));
            scrambled.appendChild(dropArea);
        }
        
        function dropLevel3(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.remove('highlight');
            
            const data = ev.dataTransfer.getData("text");
            const word = document.getElementById(data).textContent;
            
            if (!ev.currentTarget.textContent.includes(word)) {
                ev.currentTarget.textContent += ' ' + word;
            }
        }
        
        function checkGameLevel3Answer() {
            const feedback = document.getElementById('game-feedback3');
            const answer = document.getElementById('drop-area3').textContent.trim();
            
            if (answer.includes('كان الطقسُ جميلًا وكانت الشمسُ ساطعة') || 
                answer.includes('أصبح الطقسُ جميلًا وأصبحت الشمسُ ساطعة')) {
                
                feedback.textContent = 'ممتاز! لقد أكملت الجملة بشكل صحيح!';
                feedback.className = 'feedback correct';
                feedback.style.display = 'block';
                
                gameScore += 25;
                document.getElementById('score').textContent = 'النقاط: ' + gameScore;
            } else {
                feedback.textContent = 'ليس صحيحًا بالكامل، حاول مرة أخرى!';
                feedback.className = 'feedback incorrect';
                feedback.style.display = 'block';
            }
        }
    </script>
</body>
</html>