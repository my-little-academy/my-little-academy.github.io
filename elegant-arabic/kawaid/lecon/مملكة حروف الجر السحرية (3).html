<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مملكة حروف الجر السحرية</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #4b6cb7, #182848);
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 15px 15px 0 0;
            margin-bottom: 30px;
        }
        
        h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .story-section {
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .chapter {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px dashed #4b6cb7;
        }
        
        .preposition-highlight {
            background-color: #fffacd;
            padding: 2px 5px;
            border-radius: 4px;
            font-weight: bold;
            color: #2575fc;
        }
        
        .game-container {
            background: linear-gradient(to bottom, #87CEEB, #1E90FF);
            height: 400px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            margin-top: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .fish {
            position: absolute;
            font-size: 30px;
            cursor: pointer;
            transition: transform 0.2s;
            user-select: none;
        }
        
        .fish:hover {
            transform: scale(1.2);
        }
        
        .score-board {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            background: linear-gradient(to right, #4b6cb7, #182848);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 0 10px;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .feedback {
            font-size: 1.3em;
            text-align: center;
            margin: 20px 0;
            min-height: 30px;
            font-weight: bold;
        }
        
        .correct {
            color: #28a745;
        }
        
        .incorrect {
            color: #dc3545;
        }
        
        @keyframes swim {
            0% { transform: translateX(100%) rotate(0deg); }
            100% { transform: translateX(-100%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>مملكة حروف الجر السحرية</h1>
            <p>رحلة تعليمية تفاعلية في عالم حروف الجر العربية</p>
        </header>
        
        <div class="story-section">
            <div class="chapter">
                <h2>الفصل الأول: اختفاء الحروف</h2>
                <p>في عالم سحري حيث كانت الكلمات تحيا وتتنفس، استيقظ سكان مملكة النحو على كارثة مروعة. لقد اختفت جميع <span class="preposition-highlight">حروف الجر</span> من كل الكتب والمخطوطات!</p>
                <p>تحولت الجمل إلى فوضى عارمة:</p>
                <ul>
                    <li>"ذهب أحمد ____ المدرسة" (بدون <span class="preposition-highlight">"إلى"</span>)</li>
                    <li>"الكتاب ____ الطاولة" (بدون <span class="preposition-highlight">"على"</span>)</li>
                    <li>"القط نائم ____ الكرسي" (بدون <span class="preposition-highlight">"تحت"</span>)</li>
                </ul>
            </div>
            
            <div class="chapter">
                <h2>الفصل الثاني: الرحلة الاستكشافية</h2>
                <p>الملك <span class="preposition-highlight">"في"</span> العظيم جمع مستشاريه وأمر بإرسال فرسان حروف الجر للبحث عن الحروف المفقودة:</p>
                <ul>
                    <li>الفارس <span class="preposition-highlight">"على"</span>: تسلق جبال الجمل المركبة</li>
                    <li>الفارس <span class="preposition-highlight">"في"</span>: غاص في بحور النصوص القديمة</li>
                    <li>الفارس <span class="preposition-highlight">"من"</span>: بحث في أصول الكلمات الأولى</li>
                </ul>
            </div>
            
            <div class="chapter">
                <h2>الفصل الثالث: معركة التحرير</h2>
                <p>اكتشف الفرسان أن الساحر الشرير <span class="preposition-highlight">"لّا"</span> قد سجن الحروف في برج عالٍ. فخاضوا معركة أسطورية:</p>
                <ul>
                    <li><span class="preposition-highlight">"إلى"</span> و<span class="preposition-highlight">"عن"</span> حاصرتا البرج من الجهتين</li>
                    <li><span class="preposition-highlight">"الباء"</span> و<span class="preposition-highlight">"الكاف"</span> فككتا الأقفال السحرية</li>
                    <li><span class="preposition-highlight">"حتى"</span> و<span class="preposition-highlight">"مذ"</span> نسفتا جدران الزمن</li>
                </ul>
                <p>أخيراً، عادت حروف الجر إلى أماكنها الصحيحة في الجمل، وعاد النظام إلى اللغة!</p>
            </div>
        </div>
        
        <h2 style="text-align: center; color: #2575fc;">لعبة صيد حروف الجر السابحة</h2>
        <p style="text-align: center;">ساعد الفرسان في جمع حروف الجر المفقودة عن طريق صيدها!</p>
        
        <div class="controls">
            <button id="start-btn">بدء اللعبة</button>
            <button id="reset-btn">إعادة المحاولة</button>
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="game-container" id="game-area">
            <!-- حروف الجر السابحة ستظهر هنا -->
        </div>
        
        <div class="score-board">
            النقاط: <span id="score">0</span> | الوقت المتبقي: <span id="timer">60</span> ثانية
        </div>
    </div>

    <script>
        const prepositions = ['في', 'على', 'من', 'إلى', 'عن', 'الباء', 'الكاف', 'حتى', 'مذ', 'عند', 'خلال', 'مثل'];
        let score = 0;
        let timeLeft = 60;
        let gameInterval;
        let timerInterval;
        const gameArea = document.getElementById('game-area');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const feedback = document.getElementById('feedback');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', resetGame);
        
        function startGame() {
            score = 0;
            timeLeft = 60;
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timeLeft;
            feedback.textContent = '';
            gameArea.innerHTML = '';
            startBtn.disabled = true;
            
            // بدء موقت اللعبة
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if(timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // إنشاء حروف جر سابحة
            gameInterval = setInterval(createSwimmingPreposition, 1000);
        }
        
        function createSwimmingPreposition() {
            if(timeLeft <= 0) return;
            
            const preposition = prepositions[Math.floor(Math.random() * prepositions.length)];
            const fish = document.createElement('div');
            fish.className = 'fish';
            fish.textContent = preposition;
            fish.style.top = Math.random() * 350 + 'px';
            fish.style.left = '100%';
            fish.style.color = getRandomColor();
            
            fish.addEventListener('click', () => {
                score++;
                scoreDisplay.textContent = score;
                fish.remove();
                feedback.textContent = `أحسنت! صيدت حرف الجر "${preposition}"`;
                feedback.className = 'feedback correct';
                
                // إظهار تأثير النجاح
                const effect = document.createElement('div');
                effect.textContent = '✓ +1';
                effect.style.position = 'absolute';
                effect.style.top = fish.style.top;
                effect.style.left = fish.style.left;
                effect.style.color = '#28a745';
                effect.style.fontSize = '24px';
                effect.style.fontWeight = 'bold';
                effect.style.animation = 'fadeUp 1s forwards';
                gameArea.appendChild(effect);
                
                setTimeout(() => effect.remove(), 1000);
            });
            
            gameArea.appendChild(fish);
            
            // حركة السمكة
            const duration = Math.random() * 10000 + 5000;
            fish.style.animation = `swim ${duration/1000}s linear forwards`;
            
            setTimeout(() => {
                if(fish.parentNode === gameArea) {
                    fish.remove();
                }
            }, duration);
        }
        
        function endGame() {
            clearInterval(gameInterval);
            clearInterval(timerInterval);
            startBtn.disabled = false;
            feedback.textContent = `انتهى الوقت! مجموع نقاطك: ${score}`;
            feedback.className = 'feedback';
        }
        
        function resetGame() {
            clearInterval(gameInterval);
            clearInterval(timerInterval);
            score = 0;
            timeLeft = 60;
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timeLeft;
            feedback.textContent = '';
            gameArea.innerHTML = '';
            startBtn.disabled = false;
        }
        
        function getRandomColor() {
            const colors = ['#4b6cb7', '#2575fc', '#182848', '#6a11cb', '#166088', '#1E90FF'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        // إضافة أنيميشن للفيديو
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeUp {
                0% { opacity: 1; transform: translateY(0); }
                100% { opacity: 0; transform: translateY(-50px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>