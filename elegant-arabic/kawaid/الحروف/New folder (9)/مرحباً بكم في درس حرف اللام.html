<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ¹Ù„Ù… Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… - Ø¹Ø§Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f9ff;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px 10px 0 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .section {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .letter-card {
            background-color: #e8f5e9;
            border: 3px solid #4CAF50;
            border-radius: 15px;
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            font-size: 80px;
            color: #2E7D32;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .letter-card:hover {
            transform: scale(1.1);
        }
        .word-examples {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        .word-card {
            background-color: #e3f2fd;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 10px 15px;
            text-align: center;
            width: 120px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .word-card:hover {
            background-color: #bbdefb;
            transform: translateY(-5px);
        }
        .word-card img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        .game-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .memory-card {
            height: 100px;
            background-color: #f8bbd0;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            perspective: 1000px;
        }
        .memory-card.flipped {
            background-color: #fce4ec;
            transform: rotateY(180deg);
        }
        .writing-area {
            background-color: #fff8e1;
            border: 2px dashed #ffc107;
            border-radius: 10px;
            height: 200px;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        #writing-canvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
        .clear-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .progress-container {
            background-color: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            margin-top: 20px;
            overflow: hidden;
        }
        .progress-bar {
            background-color: #4CAF50;
            height: 100%;
            width: 0%;
            transition: width 0.5s;
        }
        .feedback {
            text-align: center;
            font-size: 24px;
            margin-top: 10px;
            min-height: 40px;
        }
        .positive {
            color: #4CAF50;
        }
        .negative {
            color: #f44336;
        }
        .tajweed-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .tajweed-table th, .tajweed-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .tajweed-table th {
            background-color: #4CAF50;
            color: white;
        }
        .tajweed-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .tajweed-table tr:hover {
            background-color: #ddd;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #45a049;
        }
        .hidden {
            display: none;
        }
        .stars {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .star {
            font-size: 30px;
            color: #ffc107;
            margin: 0 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¯Ø±Ø³ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…!</h1>
            <p>Ù„Ù†ØªØ¹Ù„Ù… Ù…Ø¹Ø§Ù‹ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ØªØ¹Ø© ÙˆØ³Ù‡Ù„Ø©</p>
        </header>

        <section class="section" id="intro-section">
            <h2>ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h2>
            <div class="letter-card" onclick="playSound('laam')">Ù„</div>
            <p>Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ù‡Ùˆ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø«Ø§Ù„Ø« ÙˆØ§Ù„Ø¹Ø´Ø±ÙˆÙ† ÙÙŠ Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. Ù†Ù†Ø·Ù‚Ù‡ "Ù„Ø§Ù…" ÙˆÙ‡Ùˆ Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ù…ØªØ¹Ø© Ø§Ù„ØªÙŠ ØªØ¸Ù‡Ø± ÙÙŠ ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª.</p>
            <button class="btn" onclick="nextSection('intro-section', 'words-section')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </section>

        <section class="section hidden" id="words-section">
            <h2>ÙƒÙ„Ù…Ø§Øª ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h2>
            <p>Ø¯Ø¹ÙˆÙ†Ø§ Ù†ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¨Ø¹Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØªÙŠ ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…:</p>
            
            <div class="word-examples">
                <div class="word-card" onclick="playSound('lemon')">
                    <img src="https://cdn.pixabay.com/photo/2017/02/05/12/31/lemons-2039830_640.jpg" alt="Ù„ÙŠÙ…ÙˆÙ†">
                    <div>Ù„ÙŠÙ…ÙˆÙ†</div>
                </div>
                <div class="word-card" onclick="playSound('lion')">
                    <img src="https://cdn.pixabay.com/photo/2017/07/24/19/57/tiger-2535888_640.jpg" alt="Ø£Ø³Ø¯">
                    <div>Ø£Ø³Ø¯ (Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù„ÙŠÙ„)</div>
                </div>
                <div class="word-card" onclick="playSound('moon')">
                    <img src="https://cdn.pixabay.com/photo/2017/08/30/01/05/moon-2694769_640.jpg" alt="Ù‚Ù…Ø±">
                    <div>Ù‚Ù…Ø± (Ù„ÙŠÙ„)</div>
                </div>
                <div class="word-card" onclick="playSound('flower')">
                    <img src="https://cdn.pixabay.com/photo/2018/01/29/07/11/flower-3115353_640.jpg" alt="Ø²Ù‡Ø±Ø©">
                    <div>Ø²Ù‡Ø±Ø© (Ù„ÙˆØªØ³)</div>
                </div>
            </div>
            
            <button class="btn" onclick="nextSection('words-section', 'writing-section')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            <button class="btn" onclick="prevSection('words-section', 'intro-section')">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </section>

        <section class="section hidden" id="writing-section">
            <h2>Ù„Ù†ØªÙ…Ø±Ù† Ø¹Ù„Ù‰ ÙƒØªØ§Ø¨Ø© Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h2>
            <p>Ø§Ù†Ø¸Ø± ÙƒÙŠÙ ÙŠÙƒØªØ¨ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… ÙÙŠ Ø£ÙˆÙ„ Ø§Ù„ÙƒÙ„Ù…Ø© ÙˆÙˆØ³Ø·Ù‡Ø§ ÙˆØ¢Ø®Ø±Ù‡Ø§:</p>
            
            <div style="text-align: center; font-size: 40px; margin: 20px 0;">
                Ù„Ù€ Ù€Ù„Ù€ Ù€Ù„
            </div>
            
            <p>Ø­Ø§ÙˆÙ„ ÙƒØªØ§Ø¨Ø© Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ø¨Ù†ÙØ³Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
            
            <div class="writing-area">
                <button class="clear-btn" onclick="clearCanvas()">Ù…Ø³Ø­</button>
                <canvas id="writing-canvas"></canvas>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="writing-progress"></div>
            </div>
            <div class="feedback" id="writing-feedback"></div>
            
            <button class="btn" onclick="nextSection('writing-section', 'games-section')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            <button class="btn" onclick="prevSection('writing-section', 'words-section')">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </section>

        <section class="section hidden" id="games-section">
            <h2>Ø£Ù„Ø¹Ø§Ø¨ ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ø¹ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h2>
            
            <h3>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©: Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø²ÙˆØ§Ø¬ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h3>
            <div class="game-container" id="memory-game">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            <div class="feedback" id="memory-feedback"></div>
            
            <h3 style="margin-top: 30px;">Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØªÙŠ ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h3>
            <div class="word-examples" id="word-selection-game">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            <div class="feedback" id="selection-feedback"></div>
            
            <button class="btn" onclick="nextSection('games-section', 'tajweed-section')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            <button class="btn" onclick="prevSection('games-section', 'writing-section')">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </section>

        <section class="section hidden" id="tajweed-section">
            <h2>Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ù…Ø¹ Ø§Ù„Ø­Ø±ÙƒØ§Øª ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†</h2>
            <p>Ù„Ù†Ø±Ù‰ ÙƒÙŠÙ ÙŠØªØºÙŠØ± Ù†Ø·Ù‚ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ù…Ø¹ Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©:</p>
            
            <table class="tajweed-table">
                <tr>
                    <th>ØªÙ†ÙˆÙŠÙ† Ø§Ù„Ø¶Ù…</th>
                    <th>ØªÙ†ÙˆÙŠÙ† Ø§Ù„ÙƒØ³Ø±</th>
                    <th>ØªÙ†ÙˆÙŠÙ† Ø§Ù„ÙØªØ­</th>
                    <th>Ù…Ø¯ Ø§Ù„ÙŠØ§Ø¡ ÙÙŠ Ø§Ù„ÙˆØ³Ø·</th>
                    <th>Ù…Ø¯ Ø§Ù„ÙŠØ§Ø¡ ÙÙŠ Ø§Ù„Ø§Ø®Ø±</th>
                    <th>Ù…Ø¯ Ø§Ù„ÙˆØ§Ùˆ</th>
                    <th>Ù…Ø¯ Ø§Ù„Ø£Ù„Ù</th>
                    <th>Ø§Ù„ÙƒØ³Ø±Ø©</th>
                    <th>Ø§Ù„Ø¶Ù…Ø©</th>
                    <th>Ø§Ù„ÙØªØ­Ø©</th>
                    <th>Ø§Ù„ØµÙˆØª</th>
                </tr>
                <tr>
                    <td>Ù„ÙŒ</td>
                    <td>Ù„Ù</td>
                    <td>Ù„Ù‹Ø§</td>
                    <td>Ù„ÙŠÙ€</td>
                    <td>Ù„ÙŠ</td>
                    <td>Ù„Ùˆ</td>
                    <td>Ù„Ø§</td>
                    <td>Ù„Ù</td>
                    <td>Ù„Ù</td>
                    <td>Ù„Ù</td>
                    <td>[Ù„]</td>
                </tr>
            </table>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="playAllSounds()">Ø§Ø³ØªÙ…Ø¹ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙˆØ§Øª</button>
            </div>
            
            <button class="btn" onclick="nextSection('tajweed-section', 'assessment-section')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            <button class="btn" onclick="prevSection('tajweed-section', 'games-section')">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </section>

        <section class="section hidden" id="assessment-section">
            <h2>Ù„Ù†Ø®ØªØ¨Ø± Ù…Ø§ ØªØ¹Ù„Ù…Ù†Ø§Ù‡!</h2>
            <p>Ø£Ø¬Ø¨ Ø¹Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„ØªØªØ£ÙƒØ¯ Ù…Ù† ÙÙ‡Ù…Ùƒ Ù„Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…:</p>
            
            <div id="quiz-container">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
            
            <div class="feedback" id="quiz-feedback"></div>
            <div class="stars" id="stars-container"></div>
            
            <button class="btn" onclick="showResults()">Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
            <button class="btn" onclick="prevSection('assessment-section', 'tajweed-section')">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </section>

        <section class="section hidden" id="results-section">
            <h2>Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¯Ø±Ø³ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…</h2>
            <div style="text-align: center; font-size: 100px; color: #4CAF50;">ğŸ‰</div>
            <p id="final-message">Ù„Ù‚Ø¯ ØªØ¹Ù„Ù…Øª Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ø¨Ø´ÙƒÙ„ Ø±Ø§Ø¦Ø¹! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„ÙŠÙ‡ ÙˆÙƒØªØ§Ø¨ØªÙ‡ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª.</p>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="location.reload()">ÙƒØ±Ø± Ø§Ù„Ø¯Ø±Ø³ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
            </div>
        </section>
    </div>

    <script>
        // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©
        let currentSection = 'intro-section';
        let memoryCards = ['Ù„', 'Ù„ÙŠÙ…ÙˆÙ†', 'Ù„', 'Ø£Ø³Ø¯', 'Ù‚Ù…Ø±', 'Ù„ÙŠÙ…ÙˆÙ†', 'Ø£Ø³Ø¯', 'Ù‚Ù…Ø±'];
        let selectedWords = [
            {word: 'Ù„ÙŠÙ…ÙˆÙ†', correct: true},
            {word: 'ØªÙØ§Ø­', correct: false},
            {word: 'Ù„ÙˆØ²', correct: true},
            {word: 'Ù…ÙˆØ²', correct: false},
            {word: 'Ù„Ø¹Ø¨Ø©', correct: true},
            {word: 'Ø³ÙŠØ§Ø±Ø©', correct: false}
        ];
        let quizQuestions = [
            {
                question: 'Ù…Ø§ Ù‡Ùˆ Ø´ÙƒÙ„ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…ØŸ',
                options: ['Ø£', 'Ø¨', 'Ù„', 'Ù…'],
                answer: 2
            },
            {
                question: 'Ø£ÙŠ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…ØŸ',
                options: ['ØªÙØ§Ø­', 'Ù„ÙŠÙ…ÙˆÙ†', 'Ù…ÙˆØ²', 'Ø¨Ø±ØªÙ‚Ø§Ù„'],
                answer: 1
            },
            {
                question: 'ÙƒÙŠÙ Ù†Ù†Ø·Ù‚ Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù… Ù…Ø¹ Ø§Ù„ÙØªØ­Ø©ØŸ',
                options: ['Ù„Ù', 'Ù„Ù', 'Ù„Ù', 'Ù„Ù’'],
                answer: 2
            }
        ];
        let quizAnswers = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let correctSelections = 0;

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.onload = function() {
            initWritingCanvas();
            setupMemoryGame();
            setupWordSelectionGame();
            setupQuiz();
        };

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
        function nextSection(current, next) {
            document.getElementById(current).classList.add('hidden');
            document.getElementById(next).classList.remove('hidden');
            currentSection = next;
            
            if (next === 'assessment-section') {
                resetQuiz();
            }
        }

        function prevSection(current, prev) {
            document.getElementById(current).classList.add('hidden');
            document.getElementById(prev).classList.remove('hidden');
            currentSection = prev;
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª
        function playSound(type) {
            // ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø£ØµÙˆØ§Øª Ù…Ø³Ø¬Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
            console.log('ØªØ´ØºÙŠÙ„ ØµÙˆØª: ' + type);
        }

        function playAllSounds() {
            const sounds = ['Ù„Ù', 'Ù„Ù', 'Ù„Ù', 'Ù„Ù‹Ø§', 'Ù„Ù', 'Ù„ÙŒ', 'Ù„Ø§', 'Ù„Ùˆ', 'Ù„ÙŠ', 'Ù„ÙŠÙ€'];
            let i = 0;
            
            const playNext = () => {
                if (i < sounds.length) {
                    playSound(sounds[i]);
                    i++;
                    setTimeout(playNext, 1000);
                }
            };
            
            playNext();
        }

        // Ù‚Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨Ø©
        function initWritingCanvas() {
            const canvas = document.getElementById('writing-canvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let progress = 0;
            
            // Ø¶Ø¨Ø· Ø­Ø¬Ù… Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.offsetWidth;
                canvas.height = container.offsetHeight;
                ctx.lineWidth = 5;
                ctx.lineCap = 'round';
                ctx.strokeStyle = '#4CAF50';
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ø±Ø³Ù…
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('touchstart', startDrawing);
            
            // Ø§Ù„Ø±Ø³Ù…
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('touchmove', draw);
            
            // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø±Ø³Ù…
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('touchend', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            function startDrawing(e) {
                isDrawing = true;
                const pos = getPosition(e);
                ctx.beginPath();
                ctx.moveTo(pos.x, pos.y);
                e.preventDefault();
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const pos = getPosition(e);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
                
                // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯Ù…
                if (progress < 100) {
                    progress += 0.5;
                    document.getElementById('writing-progress').style.width = progress + '%';
                    
                    if (progress >= 100) {
                        showFeedback('Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª ÙƒØªØ§Ø¨Ø© Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…', 'positive');
                    }
                }
                
                e.preventDefault();
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            function getPosition(e) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: (e.clientX || e.touches[0].clientX) - rect.left,
                    y: (e.clientY || e.touches[0].clientY) - rect.top
                };
            }
        }

        function clearCanvas() {
            const canvas = document.getElementById('writing-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('writing-progress').style.width = '0%';
            document.getElementById('writing-feedback').textContent = '';
        }

        // Ù‚Ø³Ù… Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨
        function setupMemoryGame() {
            const gameContainer = document.getElementById('memory-game');
            gameContainer.innerHTML = '';
            flippedCards = [];
            matchedPairs = 0;
            
            // Ø®Ù„Ø· Ø§Ù„Ø£ÙˆØ±Ø§Ù‚
            const shuffledCards = [...memoryCards].sort(() => Math.random() - 0.5);
            
            shuffledCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.dataset.index = index;
                cardElement.dataset.value = card;
                cardElement.textContent = 'ØŸ';
                cardElement.addEventListener('click', flipCard);
                gameContainer.appendChild(cardElement);
            });
        }

        function flipCard() {
            if (flippedCards.length >= 2 || this.classList.contains('flipped')) return;
            
            this.classList.add('flipped');
            this.textContent = this.dataset.value;
            flippedCards.push(this);
            
            if (flippedCards.length === 2) {
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.value === card2.dataset.value) {
                matchedPairs++;
                flippedCards = [];
                
                if (matchedPairs === memoryCards.length / 2) {
                    showFeedback('Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²ÙˆØ§Ø¬', 'positive', 'memory-feedback');
                } else {
                    showFeedback('Ø£Ø­Ø³Ù†Øª! ÙˆØ¬Ø¯Øª Ø²ÙˆØ¬Ø§Ù‹ Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù‹', 'positive', 'memory-feedback');
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    card1.textContent = 'ØŸ';
                    card2.textContent = 'ØŸ';
                    flippedCards = [];
                    showFeedback('Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!', 'negative', 'memory-feedback');
                }, 1000);
            }
        }

        function setupWordSelectionGame() {
            const container = document.getElementById('word-selection-game');
            container.innerHTML = '';
            correctSelections = 0;
            
            // Ø®Ù„Ø· Ø§Ù„ÙƒÙ„Ù…Ø§Øª
            const shuffledWords = [...selectedWords].sort(() => Math.random() - 0.5);
            
            shuffledWords.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-card';
                wordElement.textContent = word.word;
                wordElement.addEventListener('click', () => selectWord(wordElement, word.correct));
                container.appendChild(wordElement);
            });
        }

        function selectWord(element, isCorrect) {
            if (element.classList.contains('selected')) return;
            
            element.classList.add('selected');
            
            if (isCorrect) {
                element.style.backgroundColor = '#c8e6c9';
                correctSelections++;
                showFeedback('Ø£Ø­Ø³Ù†Øª! Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…', 'positive', 'selection-feedback');
            } else {
                element.style.backgroundColor = '#ffcdd2';
                showFeedback('Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ù„Ø§ ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…', 'negative', 'selection-feedback');
            }
            
            if (correctSelections === selectedWords.filter(w => w.correct).length) {
                showFeedback('Ù…Ù…ØªØ§Ø²! Ù„Ù‚Ø¯ ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØªÙŠ ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…', 'positive', 'selection-feedback');
            }
        }

        // Ù‚Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        function setupQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            
            quizQuestions.forEach((question, qIndex) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'section';
                questionElement.style.marginBottom = '20px';
                questionElement.innerHTML = `
                    <h3>${qIndex + 1}. ${question.question}</h3>
                    <div id="options-${qIndex}"></div>
                `;
                
                container.appendChild(questionElement);
                
                const optionsContainer = document.getElementById(`options-${qIndex}`);
                question.options.forEach((option, oIndex) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'word-card';
                    optionElement.textContent = option;
                    optionElement.addEventListener('click', () => selectAnswer(qIndex, oIndex));
                    optionsContainer.appendChild(optionElement);
                });
            });
        }

        function selectAnswer(qIndex, oIndex) {
            quizAnswers[qIndex] = oIndex;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ¯
            const options = document.querySelectorAll(`#options-${qIndex} .word-card`);
            options.forEach((opt, idx) => {
                opt.style.backgroundColor = idx === oIndex ? '#c8e6c9' : '#e3f2fd';
            });
        }

        function resetQuiz() {
            quizAnswers = [];
            const options = document.querySelectorAll('#quiz-container .word-card');
            options.forEach(opt => {
                opt.style.backgroundColor = '#e3f2fd';
            });
            document.getElementById('quiz-feedback').textContent = '';
            document.getElementById('stars-container').innerHTML = '';
        }

        function showResults() {
            let correctCount = 0;
            
            quizQuestions.forEach((question, index) => {
                if (quizAnswers[index] === question.answer) {
                    correctCount++;
                }
            });
            
            const percentage = Math.round((correctCount / quizQuestions.length) * 100);
            let message = '';
            
            if (percentage >= 80) {
                message = 'Ù…Ù…ØªØ§Ø²! Ù„Ù‚Ø¯ Ø£ØªÙ‚Ù†Øª Ø­Ø±Ù Ø§Ù„Ù„Ø§Ù…';
            } else if (percentage >= 50) {
                message = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³Ù† Ø£ÙƒØ«Ø±';
            } else {
                message = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø³ØªØªØ­Ø³Ù† Ù…Ø¹ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©';
            }
            
            document.getElementById('quiz-feedback').textContent = `Ù„Ù‚Ø¯ Ø£Ø¬Ø¨Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ø¹Ù„Ù‰ ${correctCount} Ù…Ù† ${quizQuestions.length} Ø£Ø³Ø¦Ù„Ø©. ${message}`;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø¬ÙˆÙ…
            const starsContainer = document.getElementById('stars-container');
            starsContainer.innerHTML = '';
            const starCount = Math.max(1, Math.round(correctCount / quizQuestions.length * 5));
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = 'â˜…';
                starsContainer.appendChild(star);
            }
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
            setTimeout(() => {
                nextSection('assessment-section', 'results-section');
                document.getElementById('final-message').textContent = message;
            }, 3000);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
        function showFeedback(message, type, elementId = 'feedback') {
            const feedbackElement = document.getElementById(elementId);
            feedbackElement.textContent = message;
            feedbackElement.className = 'feedback ' + type;
        }
    </script>
</body>
</html>