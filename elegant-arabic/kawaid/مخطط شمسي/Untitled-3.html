<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" /> <!-- تحديد ترميز الصفحة ليكون UTF-8 لدعم اللغة العربية -->
  <title>مخطط تشعبي جمالي</title> <!-- عنوان الصفحة -->
  <style>
    body {
      margin: 0; /* إزالة هوامش المتصفح الافتراضية */
      height: 100vh; /* جعل ارتفاع الجسم يملأ ارتفاع نافذة العرض */
      background: linear-gradient(to bottom right, #e3f2fd, #bbdefb); /* خلفية متدرجة بألوان هادئة */
      display: flex; /* تفعيل flexbox لترتيب المحتوى */
      justify-content: center; /* تمركز المحتوى أفقياً */
      align-items: center; /* تمركز المحتوى عمودياً */
      font-family: 'Cairo', sans-serif; /* تعيين الخط للعربية */
    }

    .container {
      position: relative; /* تموضع نسبي لتحديد مواقع العناصر الفرعية مطلقًا */
      width: 600px; /* عرض الحاوية */
      height: 600px; /* ارتفاع الحاوية */
    }

    .card {
      position: absolute; /* تحديد مواقع البطاقات مطلقًا داخل الحاوية */
      width: 130px; /* عرض البطاقة */
      height: 90px; /* ارتفاع البطاقة */
      border-radius: 16px; /* تدوير زوايا البطاقة */
      box-shadow: 0 4px 8px rgba(0,0,0,0.15); /* ظل خفيف لجعل البطاقة بارزة */
      display: flex; /* تفعيل flexbox داخل البطاقة */
      justify-content: center; /* تمركز المحتوى داخل البطاقة أفقياً */
      align-items: center; /* تمركز المحتوى داخل البطاقة عمودياً */
      background: white; /* خلفية البطاقة بيضاء */
      border: 3px solid #4fc3f7; /* حدود البطاقة بلون أزرق فاتح */
      transition: transform 0.3s, background 0.3s; /* تأثيرات انتقال سلسة عند التحويم */
      text-align: center; /* تمركز النص داخل البطاقة أفقياً */
    }

    .card:hover {
      transform: scale(1.05); /* تكبير البطاقة عند تحويم الفأرة */
      background: #e1f5fe; /* تغيير لون الخلفية عند التحويم */
    }

    .card textarea {
      width: 90%; /* عرض مربع النص داخل البطاقة */
      height: 70%; /* ارتفاع مربع النص */
      resize: none; /* منع تغيير حجم مربع النص */
      border: none; /* إزالة حدود مربع النص */
      background: transparent; /* خلفية شفافة */
      font-size: 16px; /* حجم الخط */
      font-weight: bold; /* خط غليظ */
      outline: none; /* إزالة حدود التحديد عند التركيز */
      font-family: inherit; /* وراثة خط البطاقة */
      color: #0277bd; /* لون النص أزرق */
      text-align: center; /* تمركز النص أفقياً */
      padding-top: 20px; /* مسافة داخلية من الأعلى لتمركز عمودي أفضل */
      padding-bottom: 20px; /* مسافة داخلية من الأسفل */
      box-sizing: border-box; /* تضمين الحشوة ضمن الأبعاد */
      line-height: 1.2; /* ارتفاع السطر لتنسيق النص */
    }

    .center {
      top: 50%; /* تموضع البطاقة المركزية في منتصف الحاوية عمودياً */
      left: 50%; /* تموضع البطاقة المركزية في منتصف الحاوية أفقياً */
      margin-left: -65px; /* تحريك البطاقة لليسار نصف عرضها لتعويض النقطة المرجعية */
      margin-top: -45px; /* تحريك البطاقة لأعلى نصف ارتفاعها */
      background: #81d4fa; /* لون خلفية البطاقة المركزية */
      color: white; /* لون نص البطاقة المركزية */
      border: 3px solid #0288d1; /* حدود البطاقة المركزية */
      z-index: 2; /* رفع البطاقة فوق البطاقات الأخرى */
      animation: glow 2s infinite alternate; /* تأثير توهج متكرر للبطاقة المركزية */
    }

    @keyframes glow {
      from {
        box-shadow: 0 0 10px #4fc3f7; /* بداية التوهج */
      }
      to {
        box-shadow: 0 0 20px #0288d1; /* نهاية التوهج */
      }
    }

    .svg-lines {
      position: absolute; /* تموضع نسبي لتداخل مع الحاوية */
      width: 100%; /* تغطية كامل الحاوية عرضاً */
      height: 100%; /* تغطية كامل الحاوية ارتفاعاً */
      z-index: 1; /* وضع خلف البطاقات */
    }

    .svg-lines line {
      stroke: #0288d1; /* لون الخط */
      stroke-width: 4; /* سمك الخط */
      stroke-linecap: round; /* نهايات الخطوط مستديرة */
    }

    /* مواضع البطاقات المحيطة (الست) */
    .card1 { 
      top: 20px; /* قرب أعلى الحاوية */
      left: 50%; /* وسط عرض الحاوية */
      transform: translateX(-50%); /* تعويض نصف عرض البطاقة */
      background: #fff8e1; /* لون خلفية مميز */
    }
    .card2 { 
      top: 100px; /* قريب من الأعلى */
      left: 88%; /* قرب الحافة اليمنى */
      transform: translate(-50%, -50%);
      background: #e8f5e9;
    }
    .card3 { 
      bottom: 100px; /* قريب من الأسفل */
      left: 88%; /* قرب الحافة اليمنى */
      transform: translate(-50%, 50%);
      background: #fce4ec;
    }
    .card4 { 
      bottom: 20px; /* قرب أسفل الحاوية */
      left: 50%; /* وسط عرض الحاوية */
      transform: translateX(-50%);
      background: #ede7f6;
    }
    .card5 { 
      bottom: 100px; /* قريب من الأسفل */
      left: 12%; /* قرب الحافة اليسرى */
      transform: translate(-50%, 50%);
      background: #f3e5f5;
    }
    .card6 { 
      top: 100px; /* قريب من الأعلى */
      left: 12%; /* قرب الحافة اليسرى */
      transform: translate(-50%, -50%);
      background: #fff3e0;
    }
  </style>
</head>
<body>

  <div class="container" id="diagram">
    <!-- عنصر SVG لرسم الخطوط بين البطاقات -->
    <svg class="svg-lines">
      <line id="line1" /> <!-- خط 1 -->
      <line id="line2" /> <!-- خط 2 -->
      <line id="line3" /> <!-- خط 3 -->
      <line id="line4" /> <!-- خط 4 -->
      <line id="line5" /> <!-- خط 5 -->
      <line id="line6" /> <!-- خط 6 -->
    </svg>

    <!-- البطاقة المركزية -->
    <div class="card center" id="center">
      <textarea placeholder="الفكرة الرئيسية"></textarea> <!-- مربع نص قابل للكتابة -->
    </div>

    <!-- البطاقات الست المحيطة -->
    <div class="card card1" id="card1"><textarea placeholder="فرع 1"></textarea></div>
    <div class="card card2" id="card2"><textarea placeholder="فرع 2"></textarea></div>
    <div class="card card3" id="card3"><textarea placeholder="فرع 3"></textarea></div>
    <div class="card card4" id="card4"><textarea placeholder="فرع 4"></textarea></div>
    <div class="card card5" id="card5"><textarea placeholder="فرع 5"></textarea></div>
    <div class="card card6" id="card6"><textarea placeholder="فرع 6"></textarea></div>

  </div>

  <script>
    // دالة لحساب مركز عنصر معين (البطاقة)
    function getCenter(el) {
      const rect = el.getBoundingClientRect(); // الحصول على موقع وحجم العنصر
      return {
        x: rect.left + rect.width / 2, // إحداثي مركز العرض
        y: rect.top + rect.height / 2  // إحداثي مركز الارتفاع
      };
    }

    // دالة لحساب نقطة بداية أو نهاية الخط بحيث يكون على حافة البطاقة وليس مركزها
    // 'from' و 'to' إحداثيات مركزي العنصرين، 'size' أبعاد البطاقة (العرض والارتفاع)
    function adjustToEdge(from, to, size) {
      const dx = to.x - from.x; // فرق إحداثي x
      const dy = to.y - from.y; // فرق إحداثي y
      const angle = Math.atan2(dy, dx); // زاوية الخط بين النقطتين
      const offsetX = Math.cos(angle) * size.width / 2; // إزاحة عرضية بنصف العرض حسب الاتجاه
      const offsetY = Math.sin(angle) * size.height / 2; // إزاحة طولية بنصف الارتفاع حسب الاتجاه
      return {
        x: from.x + offsetX, // نقطة بداية/نهاية الخط على حافة البطاقة في محور x
        y: from.y + offsetY  // نقطة بداية/نهاية الخط على حافة البطاقة في محور y
      };
    }

    // دالة رسم الخطوط بين البطاقة المركزية وباقي البطاقات
    function drawLines() {
      const centerEl = document.getElementById("center"); // العنصر المركزي
      const centerRect = centerEl.getBoundingClientRect(); // أبعاده وموقعه
      const centerPoint = getCenter(centerEl); // مركزه
      const containerRect = document.getElementById("diagram").getBoundingClientRect(); // أبعاد الحاوية

      for (let i = 1; i <= 6; i++) {
        const cardEl = document.getElementById("card" + i); // العنصر المحيط i
        const cardRect = cardEl.getBoundingClientRect(); // أبعاده وموقعه
        const cardCenter = getCenter(cardEl); // مركزه
        const line = document.getElementById("line" + i); // خط الربط المناسب

        // حساب نقطة بداية الخط من حافة البطاقة المركزية باتجاه البطاقة i
        const fromEdge = adjustToEdge(centerPoint, cardCenter, centerRect);
        // حساب نقطة نهاية الخط عند حافة البطاقة i باتجاه البطاقة المركزية
        const toEdge = adjustToEdge(cardCenter, centerPoint, cardRect);

        // ضبط إحداثيات الخط داخل عنصر svg (مقارنةً بإحداثيات الحاوية)
        line.setAttribute("x1", fromEdge.x - containerRect.left);
        line.setAttribute("y1", fromEdge.y - containerRect.top);
        line.setAttribute("x2", toEdge.x - containerRect.left);
        line.setAttribute("y2", toEdge.y - containerRect.top);
      }
    }

    // عند تحميل الصفحة وأيضاً عند تغيير حجم النافذة، نقوم برسم الخطوط
    window.addEventListener("load", drawLines);
    window.addEventListener("resize", drawLines);
  </script>

</body>
</html>
