<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù‚Ø°ÙŠÙØ© Ø§Ù„Ù†Ø­ÙˆÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #3498db;
            --secondary-green: #2ecc71;
            --red-error: #e74c3c;
            --yellow-noun: #f1c40f;
            --blue-verb: #3498db;
            --light-bg: #ecf0f1;
            --dark-text: #2c3e50;
            --score-bg: #2c3e50;
        }

        body {
            font-family: 'Amiri', serif;
            background-color: var(--light-bg);
            color: var(--dark-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            direction: rtl;
        }

        .game-container {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            padding: 30px;
            width: 800px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 {
            font-family: 'Cairo', sans-serif;
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .how-to-play {
            background-color: #f0f8ff;
            border: 1px solid #cceeff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: right;
        }

        .how-to-play h3 {
            font-family: 'Cairo', sans-serif;
            color: var(--primary-blue);
            margin-top: 0;
            font-size: 1.5em;
            text-align: center;
        }

        .how-to-play ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .how-to-play li {
            margin-bottom: 8px;
            font-size: 1.1em;
            position: relative;
            padding-right: 25px;
        }

        .how-to-play li::before {
            content: 'ğŸ‘‰'; /* Arrow emoji */
            position: absolute;
            right: 0;
            font-size: 0.9em;
            top: 50%;
            transform: translateY(-50%);
        }

        .score-board {
            background-color: var(--score-bg);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 1.2em;
            display: inline-block;
        }

        .game-area {
            position: relative;
            width: 100%;
            height: 400px;
            border: 2px dashed var(--primary-blue);
            border-radius: 10px;
            margin: 0 auto;
            overflow: hidden;
            background-color: #f9fbfb;
        }

        .target-zone {
            position: absolute;
            top: 10px;
            width: 48%;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8em;
            font-weight: bold;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .target-Ø§Ø³Ù…ÙŠØ© {
            right: 1%;
            background-color: var(--yellow-noun);
        }

        .target-ÙØ¹Ù„ÙŠØ© {
            left: 1%;
            background-color: var(--blue-verb);
        }

        .falling-item {
            position: absolute;
            top: -50px;
            background-color: #8e44ad;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            text-align: center;
            min-width: 100px;
            transition: transform 0.1s ease-out;
        }

        .falling-item.launched {
            animation: launchItem 0.5s ease-out forwards;
        }

        @keyframes launchItem {
            from { transform: translateY(0); opacity: 1; }
            to { transform: translateY(-350px); opacity: 0; }
        }
        
        .cannon {
            position: absolute;
            bottom: 10px;
            width: 120px;
            height: 60px;
            background-color: var(--primary-blue);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            color: white;
            box-shadow: 0 -3px 8px rgba(0,0,0,0.3);
            transition: left 0.05s linear; /* Smooth and quick movement */
        }

        .controls {
            margin-top: 20px;
            display: flex;
            flex-direction: column; /* Stack controls vertically */
            align-items: center;
            gap: 15px;
        }

        .control-button {
            background-color: var(--secondary-green);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
        }

        .control-button:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }

        .slider-container {
            width: 80%; /* Adjust slider width */
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .cannon-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 15px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
            border-radius: 8px;
        }

        .cannon-slider:hover {
            opacity: 1;
        }

        .cannon-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            cursor: grab;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .cannon-slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: var(--primary-blue);
            border-radius: 50%;
            cursor: grab;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .feedback-message {
            margin-top: 15px;
            font-size: 1.3em;
            font-weight: bold;
            min-height: 1.5em;
        }
        .feedback-message.correct { color: var(--secondary-green); }
        .feedback-message.incorrect { color: var(--red-error); }
        .game-over-message {
            font-size: 2em;
            font-family: 'Cairo', sans-serif;
            color: var(--primary-blue);
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>ğŸš€ Ø§Ù„Ù‚Ø°ÙŠÙØ© Ø§Ù„Ù†Ø­ÙˆÙŠØ©: ØµÙ†Ù Ø§Ù„Ø¬Ù…Ù„! ğŸš€</h1>

        <div class="how-to-play">
            <h3>ÙƒÙŠÙ ØªÙ„Ø¹Ø¨ØŸ</h3>
            <ul>
                <li>**Ø§Ù„Ù…Ù‡Ù…Ø©:** Ø¹Ù„ÙŠÙƒ ØªØµÙ†ÙŠÙ Ø§Ù„ÙƒÙ„Ù…Ø§Øª/Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ù…ØªØ³Ø§Ù‚Ø·Ø© Ø¥Ù„Ù‰ "Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©" Ø£Ùˆ "Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©" Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù‚Ø°ÙŠÙØ© Ø¹Ù„ÙŠÙ‡Ø§.</li>
                <li>**Ø­Ø±Ùƒ Ø§Ù„Ù‚Ø§Ø°ÙØ©:** Ø§Ø³ØªØ®Ø¯Ù… **Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ±** Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„Ø£Ø³ÙÙ„ Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù‚Ø§Ø°ÙØ© ÙŠÙ…ÙŠÙ†Ù‹Ø§ ÙˆÙŠØ³Ø§Ø±Ù‹Ø§ Ø£Ø³ÙÙ„ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ØªØ³Ø§Ù‚Ø·Ø©.</li>
                <li>**Ø£Ø·Ù„Ù‚ Ø§Ù„Ù‚Ø°ÙŠÙØ©:** Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ø§Ù„ÙƒÙ„Ù…Ø© ÙÙˆÙ‚ Ø§Ù„Ù‚Ø§Ø°ÙØ©ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø£Ø·Ù„Ù‚!" (Ø£Ùˆ Ø²Ø± Ø§Ù„Ù…Ø³Ø§ÙØ© Space) Ù„Ø¥Ø·Ù„Ø§Ù‚Ù‡Ø§.</li>
                <li>**Ø§Ù„ØªØµÙ†ÙŠÙ:**
                    <ul>
                        <li>Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ÙƒÙ„Ù…Ø©/Ø§Ù„Ø¬Ù…Ù„Ø© ØªØ¨Ø¯Ø£ **Ø¨Ø§Ø³Ù…**ØŒ ÙÙ‡ÙŠ **Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©**. ÙˆØ¬Ù‡ Ø§Ù„Ù‚Ø§Ø°ÙØ© Ù„ØªØ±Ø³Ù„Ù‡Ø§ Ù†Ø­Ùˆ Ù‡Ø¯Ù "Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©" (Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†).</li>
                        <li>Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ÙƒÙ„Ù…Ø©/Ø§Ù„Ø¬Ù…Ù„Ø© ØªØ¨Ø¯Ø£ **Ø¨ÙØ¹Ù„**ØŒ ÙÙ‡ÙŠ **Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©**. ÙˆØ¬Ù‡ Ø§Ù„Ù‚Ø§Ø°ÙØ© Ù„ØªØ±Ø³Ù„Ù‡Ø§ Ù†Ø­Ùˆ Ù‡Ø¯Ù "Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©" (Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±).</li>
                    </ul>
                </li>
                <li>**Ø§Ù„Ù†Ù‚Ø§Ø·:** ØªØ±Ø¨Ø­ Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ ØªØµÙ†ÙŠÙ ØµØ­ÙŠØ­ØŒ ÙˆØªØ®Ø³Ø± Ù†Ù‚Ø·Ø© Ø¥Ø°Ø§ Ø£Ø®Ø·Ø£Øª Ø£Ùˆ ÙØ§ØªØª Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù‚Ø§Ø°ÙØ©.</li>
            </ul>
        </div>

        <div class="score-board">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>

        <div class="game-area">
            <div class="target-zone target-Ø§Ø³Ù…ÙŠØ©" data-category="Ø§Ø³Ù…ÙŠØ©">Ø¬Ù…Ù„Ø© Ø§Ø³Ù…ÙŠØ©</div>
            <div class="target-zone target-ÙØ¹Ù„ÙŠØ©" data-category="ÙØ¹Ù„ÙŠØ©">Ø¬Ù…Ù„Ø© ÙØ¹Ù„ÙŠØ©</div>

            <div id="falling-item" class="falling-item">Ø§Ù„ÙƒÙ„Ù…Ø©/Ø§Ù„Ø¬Ù…Ù„Ø©</div>
            <div id="cannon" class="cannon">Ù‚Ø§Ø°ÙØ©</div>
        </div>

        <div class="controls">
            <div class="slider-container">
                <input type="range" min="0" max="100" value="50" class="cannon-slider" id="cannonSlider">
            </div>
            <button class="control-button" id="fireButton">Ø£Ø·Ù„Ù‚! ğŸ”¥</button>
        </div>
        <p id="feedback" class="feedback-message"></p>
    </div>

    <script>
        const gameItems = [
            { text: "Ø§Ù„Ø´Ù…Ø³ Ù…Ø´Ø±Ù‚Ø©", type: "Ø§Ø³Ù…ÙŠØ©" },
            { text: "ÙŠÙ„Ø¹Ø¨ Ø§Ù„ÙˆÙ„Ø¯", type: "ÙØ¹Ù„ÙŠØ©" },
            { text: "Ø§Ù„Ù‚Ø·Ø© Ù†Ø§Ø¦Ù…Ø©", type: "Ø§Ø³Ù…ÙŠØ©" },
            { text: "ØªØ¬Ø±ÙŠ Ø§Ù„Ø³ÙŠØ§Ø±Ø©", type: "ÙØ¹Ù„ÙŠØ©" },
            { text: "Ø§Ù„Ø¹ØµÙÙˆØ± Ø¬Ù…ÙŠÙ„", type: "Ø§Ø³Ù…ÙŠØ©" },
            { text: "Ø³Ø§ÙØ± Ø§Ù„Ø±Ø¬Ù„", type: "ÙØ¹Ù„ÙŠØ©" },
            { text: "Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠØ´Ø±Ø­", type: "Ø§Ø³Ù…ÙŠØ©" },
            { text: "ØªØ£ÙƒÙ„ Ø§Ù„ÙØªØ§Ø©", type: "ÙØ¹Ù„ÙŠØ©" },
            { text: "Ø§Ù„Ø¨ÙŠØª ÙƒØ¨ÙŠØ±", type: "Ø§Ø³Ù…ÙŠØ©" },
            { text: "Ù‚Ø±Ø£ Ø§Ù„Ø·Ø§Ù„Ø¨", type: "ÙØ¹Ù„ÙŠØ©" }
        ];

        let score = 0;
        let currentItem = null;
        let itemFallInterval;
        const gameAreaWidth = 800; // Matches CSS width

        // DOM Elements
        const scoreSpan = document.getElementById('score');
        const gameArea = document.querySelector('.game-area');
        const fallingItemDiv = document.getElementById('falling-item');
        const cannonDiv = document.getElementById('cannon');
        const fireButton = document.getElementById('fireButton');
        const cannonSlider = document.getElementById('cannonSlider');
        const feedbackDiv = document.getElementById('feedback');

        function startGame() {
            score = 0;
            scoreSpan.textContent = score;
            feedbackDiv.textContent = '';
            fireButton.disabled = false;
            cannonSlider.disabled = false;
            resetFallingItem();
            startFalling();
        }

        function resetFallingItem() {
            const randomIndex = Math.floor(Math.random() * gameItems.length);
            currentItem = gameItems[randomIndex];
            fallingItemDiv.textContent = currentItem.text;
            fallingItemDiv.setAttribute('data-type', currentItem.type);
            fallingItemDiv.style.top = '-50px';
            // Random X position, ensuring the item is fully within game area
            fallingItemDiv.style.left = `${Math.random() * (gameArea.clientWidth - fallingItemDiv.offsetWidth)}px`;
            fallingItemDiv.classList.remove('launched');
            fallingItemDiv.style.opacity = '1'; // Ensure it's visible
        }

        function startFalling() {
            let itemTop = -50;
            const fallSpeed = 2;
            const maxTop = gameArea.clientHeight - cannonDiv.offsetHeight - fallingItemDiv.offsetHeight - 10; 

            clearInterval(itemFallInterval);
            itemFallInterval = setInterval(() => {
                if (fallingItemDiv.classList.contains('launched')) {
                    clearInterval(itemFallInterval);
                    return;
                }

                itemTop += fallSpeed;
                fallingItemDiv.style.top = `${itemTop}px`;

                if (itemTop >= maxTop) {

                    clearInterval(itemFallInterval);
                    showFeedback("ÙØ§ØªØªÙƒ! Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹.", false);
                    setTimeout(() => {
                        resetFallingItem();
                        startFalling();
                    }, 1000);
                }
            }, 50);
        }

        function updateCannonPosition() {
            // Slider value is 0-100, map it to game area width
            const sliderValue = parseInt(cannonSlider.value);
            const cannonWidth = cannonDiv.offsetWidth;
            const gameAreaVisibleWidth = gameArea.clientWidth;

            // Calculate max left position for the cannon (so it doesn't go off screen)
            const maxLeft = gameAreaVisibleWidth - cannonWidth;
            
            // Map slider value (0-100) to actual pixel position (0-maxLeft)
            const newLeftPx = (sliderValue / 100) * maxLeft;

            cannonDiv.style.left = `${newLeftPx}px`;
            // No transform needed if using direct pixel positioning for left
        }

        function fireItem() {
            if (fallingItemDiv.classList.contains('launched') || !currentItem) return;

            const itemRect = fallingItemDiv.getBoundingClientRect();
            const cannonRect = cannonDiv.getBoundingClientRect();

            // Check if falling item is horizontally aligned with cannon and low enough
            const horizontalMatch = (itemRect.right > cannonRect.left && itemRect.left < cannonRect.right);
            const verticalMatch = (itemRect.bottom > cannonRect.top - 50 && itemRect.top < cannonRect.bottom);

            if (horizontalMatch && verticalMatch) {
                 fallingItemDiv.classList.add('launched');
                 clearInterval(itemFallInterval);
                 checkShot();
            } else {
                showFeedback("Ø£Ø·Ù„Ù‚ ÙÙŠ Ø§Ù„ÙØ±Ø§Øº! Ø­Ø§ÙˆÙ„ ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù‚Ø§Ø°ÙØ© Ø£Ø³ÙÙ„ Ø§Ù„ÙƒÙ„Ù…Ø©.", false);
            }
        }

        function checkShot() {
            const launchedType = fallingItemDiv.dataset.type;
            
            // Determine which target zone the cannon is "aiming" towards based on its current position
            const cannonCenterPx = cannonDiv.offsetLeft + (cannonDiv.offsetWidth / 2);
            
            // Get target zone center positions
            const targetIsmiya = document.querySelector('.target-Ø§Ø³Ù…ÙŠØ©');
            const targetFealiya = document.querySelector('.target-ÙØ¹Ù„ÙŠØ©');
            
            const targetIsmiyaCenter = targetIsmiya.offsetLeft + (targetIsmiya.offsetWidth / 2);
            const targetFealiyaCenter = targetFealiya.offsetLeft + (targetFealiya.offsetWidth / 2);

            let aimedAtCategory = '';
            // Simple check: which target is the cannon closer to?
            if (Math.abs(cannonCenterPx - targetIsmiyaCenter) < Math.abs(cannonCenterPx - targetFealiyaCenter)) {
                aimedAtCategory = 'Ø§Ø³Ù…ÙŠØ©';
            } else {
                aimedAtCategory = 'ÙØ¹Ù„ÙŠØ©';
            }

            if (launchedType === aimedAtCategory) {
                score++;
                scoreSpan.textContent = score;
                showFeedback("Ø£Ø­Ø³Ù†Øª! ØªØµÙ†ÙŠÙ ØµØ­ÙŠØ­! ğŸ‰", true);
            } else {
                score = Math.max(0, score - 1);
                scoreSpan.textContent = score;
                showFeedback(`Ø®Ø·Ø£! Ù‡Ø°Ù‡ ${launchedType} ÙˆÙ„ÙŠØ³Øª ${aimedAtCategory}.`, false);
            }

            setTimeout(() => {
                resetFallingItem();
                startFalling();
            }, 1000);
        }

        // Event Listeners
        fireButton.addEventListener('click', fireItem);
        cannonSlider.addEventListener('input', updateCannonPosition); // Listen to slider changes

        // Initial setup and start the game when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            updateCannonPosition(); // Set initial cannon position based on slider default value
            startGame();
        });

        // Keyboard controls for fire (spacebar)
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                e.preventDefault();
                fireItem();
            }
        });
    </script>
</body>
</html>