<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯Ø© ğŸŒ»</title>
    <style>
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… - Ø£Ù„ÙˆØ§Ù† Ø²Ø§Ù‡ÙŠØ© */
        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: #5a3e36;
            overflow-x: hidden;
        }
        
        .main-container {
            max-width: 100%;
            width: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }
        
        .scroll-container {
            width: 100%;
            max-width: 800px;
            overflow-y: auto;
            max-height: 90vh;
            padding: 10px;
        }
        
        .game-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            padding: 25px;
            text-align: center;
            border: 5px solid #f8a5c2;
            margin-bottom: 20px;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
            padding: 10px;
            background: rgba(248, 165, 194, 0.1);
            border-radius: 20px;
            min-height: 300px;
        }
        
        .farm-plot {
            background: #e0f7c2;
            border-radius: 15px;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px dashed #a5d6a7;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 10px;
            border: 3px solid rgba(255, 255, 255, 0.5);
        }
        
        /* Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚ ... */
        
        /* Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± */
        .force-show {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="scroll-container">
            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
            <div class="game-container start-screen force-show" id="start-screen">
                <h1 class="game-title">Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯Ø© ğŸŒ»</h1>
                <p class="game-subtitle">Ø§Ù†Ø·Ù„Ù‚ ÙÙŠ Ù…ØºØ§Ù…Ø±Ø© Ø²Ø±Ø§Ø¹ÙŠØ© Ù…Ù…ØªØ¹Ø©! Ø§Ø²Ø±Ø¹ ÙˆØ­ØµØ¯ ÙˆØ§Ø±Ø¨Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø²Ø±Ø¹ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</p>
                <button class="start-btn" onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
            </div>
            
            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div class="game-container" id="game-container" style="display: none;">
                <button class="help-btn" onclick="showHelp()">ØŸ</button>
                
                <h2 style="color: #f5576c; margin-bottom: 5px;">Ù…Ø²Ø±Ø¹ØªÙŠ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©</h2>
                <div style="color: #888; margin-bottom: 15px;">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ <span id="level">1</span></div>
                
                <div class="game-info">
                    <div class="info-item">
                        <div class="info-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                        <div class="info-value" id="points">0</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ø§Ù„Ù…Ø§Ù„</div>
                        <div class="info-value" id="money">50</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Ø§Ù„ÙˆÙ‚Øª</div>
                        <div class="info-value" id="time">03:00</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                
                <div class="farm" id="farm">
                    <!-- Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚Ø·Ø¹ Ø§Ù„Ø£Ø±Ø¶ Ù‡Ù†Ø§ -->
                </div>
                
                <div class="toolbar">
                    <button class="tool" onclick="plant('carrot')">ğŸ¥• Ø¬Ø²Ø± (5ğŸ’°)</button>
                    <button class="tool" onclick="plant('tomato')">ğŸ… Ø·Ù…Ø§Ø·Ù… (8ğŸ’°)</button>
                    <button class="tool" onclick="plant('wheat')">ğŸŒ¾ Ù‚Ù…Ø­ (3ğŸ’°)</button>
                    <button class="tool" onclick="addAnimal('cow')">ğŸ„ Ø¨Ù‚Ø±Ø© (20ğŸ’°)</button>
                    <button class="tool" onclick="addAnimal('chicken')">ğŸ“ Ø¯Ø¬Ø§Ø¬Ø© (15ğŸ’°)</button>
                </div>
            </div>
            
            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
            <div class="game-container result-screen" id="result-screen" style="display: none;">
                <h2 class="result-title" id="result-title">ğŸ‰ Ø£Ø­Ø³Ù†Øª! ğŸ‰</h2>
                
                <div class="result-stats">
                    <div class="stat-item">
                        <span>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ©:</span>
                        <span class="stat-value" id="final-points">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                        <span class="stat-value" id="final-money">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</span>
                        <span class="stat-value" id="final-time">00:00</span>
                    </div>
                    <div class="stat-item">
                        <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</span>
                        <span class="stat-value" id="final-level">1</span>
                    </div>
                </div>
                
                <button class="start-btn" onclick="nextLevel()">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <div class="popup instruction-popup" id="help-popup">
        <h2 class="popup-title">ğŸ® ÙƒÙŠÙ ØªÙ„Ø¹Ø¨</h2>
        <div class="popup-content">
            <p><strong>Ø§Ù„Ù‡Ø¯Ù:</strong> Ø¨Ù†Ø§Ø¡ Ù…Ø²Ø±Ø¹Ø© Ù†Ø§Ø¬Ø­Ø© Ø¨ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…Ø§Ù„</p>
            <p>1. Ø§Ø®ØªØ± Ù…Ø­ØµÙˆÙ„Ø§Ù‹ Ø£Ùˆ Ø­ÙŠÙˆØ§Ù†Ø§Ù‹ Ù…Ù† Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª</p>
            <p>2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø±Ø¶ ÙØ§Ø±ØºØ© Ù„Ù„Ø²Ø±Ø§Ø¹Ø© Ø£Ùˆ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†</p>
            <p>3. Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙ†Ù…Ùˆ Ø§Ù„Ù…Ø­ØµÙˆÙ„</p>
            <p>4. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØµÙˆÙ„ Ø§Ù„Ù†Ø§Ø¶Ø¬ Ù„Ø¨ÙŠØ¹Ù‡</p>
            <p>5. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø²ÙŠØ¯</p>
            <p>6. Ø­Ù‚Ù‚ Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù„Ù„ØªÙ‚Ø¯Ù…</p>
        </div>
        <button class="popup-btn" onclick="hidePopup('help-popup')">Ø­Ø³Ù†Ø§Ù‹!</button>
    </div>
    
    <!-- Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ... -->

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        const gameData = {
            level: 1,
            points: 0,
            money: 50,
            timeLeft: 180,
            plants: [],
            animals: [],
            prices: { carrot: 5, tomato: 8, wheat: 3, cow: 20, chicken: 15 },
            rewards: { carrot: 10, tomato: 15, wheat: 7, cow: 30, chicken: 20 },
            growthTime: { carrot: 5, tomato: 7, wheat: 3 },
            levelGoals: [
                { points: 100, money: 200 },
                { points: 250, money: 400 },
                { points: 500, money: 800 }
            ],
            timerInterval: null,
            growthInterval: null
        };

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            initFarm();
            updateUI();
            startTimer();
            
            // Ø¨Ø¯Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù…Ùˆ
            gameData.growthInterval = setInterval(updatePlantsGrowth, 1000);
            
            // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            document.querySelectorAll('.farm-plot, .tool, .info-item').forEach(el => {
                el.classList.add('force-show');
            });
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
        function initFarm() {
            const farm = document.getElementById('farm');
            farm.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const plot = document.createElement('div');
                plot.className = 'farm-plot force-show';
                plot.dataset.index = i;
                plot.onclick = function() { harvest(this.dataset.index); };
                farm.appendChild(plot);
            }
        }

        // Ø²Ø±Ø¹ Ù…Ø­ØµÙˆÙ„ (Ù…Ø¹Ø¯Ù„Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„ÙÙˆØ±ÙŠ)
        function plant(type) {
            if (gameData.money < gameData.prices[type]) {
                showWarning('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„!');
                return;
            }
            
            gameData.money -= gameData.prices[type];
            const emptyPlots = document.querySelectorAll('.farm-plot:empty');
            
            if (emptyPlots.length > 0) {
                const randomPlot = emptyPlots[Math.floor(Math.random() * emptyPlots.length)];
                const plantEmoji = type === 'carrot' ? 'ğŸ¥•' : type === 'tomato' ? 'ğŸ…' : 'ğŸŒ¾';
                
                randomPlot.innerHTML = `
                    <div class="plant force-show" style="animation: plantGrow 0.5s;">
                        ${plantEmoji}
                        <div class="growth-animation force-show"></div>
                    </div>
                `;
                
                gameData.plants.push({
                    type: type,
                    plotIndex: randomPlot.dataset.index,
                    growth: 0,
                    growthTime: gameData.growthTime[type]
                });
                
                updateUI();
                showCoins(randomPlot, -gameData.prices[type]);
                showSuccess(`ØªÙ… Ø²Ø±Ø¹ ${type === 'carrot' ? 'Ø¬Ø²Ø±' : type === 'tomato' ? 'Ø·Ù…Ø§Ø·Ù…' : 'Ù‚Ù…Ø­'} Ø¨Ù†Ø¬Ø§Ø­!`);
                
                // Ø¥Ø²Ø§Ù„Ø© ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ù…Ùˆ Ø¨Ø¹Ø¯ ÙØªØ±Ø©
                setTimeout(() => {
                    const growthEffect = randomPlot.querySelector('.growth-animation');
                    if (growthEffect) growthEffect.remove();
                }, 2000);
            } else {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¶ ÙØ§Ø±ØºØ©!');
                gameData.money += gameData.prices[type];
            }
        }

        // Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ø¹ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ø³ÙŠØ·Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¸Ù‡ÙˆØ±
        function addAnimal(type) {
            if (gameData.money < gameData.prices[type]) {
                showWarning('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„!');
                return;
            }
            
            gameData.money -= gameData.prices[type];
            const emptyPlots = document.querySelectorAll('.farm-plot:empty');
            
            if (emptyPlots.length > 0) {
                const randomPlot = emptyPlots[Math.floor(Math.random() * emptyPlots.length)];
                const animalEmoji = type === 'cow' ? 'ğŸ„' : 'ğŸ“';
                
                randomPlot.innerHTML = `
                    <div class="animal force-show" style="animation: plantGrow 0.5s;">
                        ${animalEmoji}
                        <div class="growth-animation force-show"></div>
                    </div>
                `;
                
                gameData.animals.push({
                    type: type,
                    plotIndex: randomPlot.dataset.index
                });
                
                updateUI();
                showCoins(randomPlot, -gameData.prices[type]);
                showSuccess(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${type === 'cow' ? 'Ø¨Ù‚Ø±Ø©' : 'Ø¯Ø¬Ø§Ø¬Ø©'} Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©!`);
                
                setTimeout(() => {
                    const growthEffect = randomPlot.querySelector('.growth-animation');
                    if (growthEffect) growthEffect.remove();
                }, 2000);
            } else {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¶ ÙØ§Ø±ØºØ©!');
                gameData.money += gameData.prices[type];
            }
        }

        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ±
        document.querySelector('.scroll-container').addEventListener('scroll', function() {
            document.querySelectorAll('.farm-plot, .plant, .animal, .tool').forEach(el => {
                el.classList.add('force-show');
            });
        });

        // Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ (updatePlantsGrowth, harvest, startTimer, endGame, nextLevel, ...)
        // ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ø¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© 'force-show' Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        
        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
        function showCoins(element, amount) {
            const coins = document.createElement('div');
            coins.className = 'coins force-show';
            coins.textContent = amount >= 0 ? `+${amount}ğŸ’°` : `${amount}ğŸ’°`;
            coins.style.color = amount >= 0 ? 'green' : 'red';
            
            const rect = element.getBoundingClientRect();
            coins.style.left = (rect.left + rect.width / 2) + 'px';
            coins.style.top = (rect.top + rect.height / 2) + 'px';
            
            document.body.appendChild(coins);
            
            setTimeout(() => {
                coins.remove();
            }, 2000);
        }
    </script>
</body>
</html>