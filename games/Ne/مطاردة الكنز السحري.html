<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø³Ø­Ø±ÙŠ</title>
    <style>
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            color: white;
            text-align: center;
        }
        
        .game-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        h1 {
            color: #f9d423;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
        .map {
            width: 800px;
            height: 500px;
            background-color: #5d3a1a;
            border: 10px solid #3d2813;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            background-image: url('https://i.imgur.com/JYQ3q8a.png');
            background-size: cover;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
        }
        
        /* Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
        .location {
            width: 80px;
            height: 80px;
            position: absolute;
            cursor: pointer;
            transition: all 0.3s;
            background-size: contain;
            background-repeat: no-repeat;
            filter: drop-shadow(0 0 5px gold);
        }
        
        .location:hover {
            transform: scale(1.1);
        }
        
        .forest {
            top: 100px;
            left: 100px;
            background-image: url('https://i.imgur.com/tQ8v9JF.png');
        }
        
        .cave {
            top: 300px;
            left: 350px;
            background-image: url('https://i.imgur.com/7nLkY9z.png');
        }
        
        .beach {
            top: 400px;
            left: 150px;
            background-image: url('https://i.imgur.com/5XvJQqT.png');
        }
        
        .castle {
            top: 150px;
            left: 600px;
            background-image: url('https://i.imgur.com/Kj3Vv9G.png');
        }
        
        /* Ø§Ù„Ø´Ø®ØµÙŠØ© */
        .character {
            width: 50px;
            height: 50px;
            position: absolute;
            background-image: url('https://i.imgur.com/pX8vQ9E.png');
            background-size: contain;
            transition: all 1s ease-in-out;
            z-index: 10;
        }
        
        /* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø¯ÙŠ */
        .challenge-window {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            padding: 20px;
            border-radius: 15px;
            border: 3px solid gold;
            z-index: 100;
            width: 80%;
            max-width: 500px;
            color: white;
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        
        .challenge-content {
            margin: 20px 0;
            font-size: 18px;
        }
        
        button {
            background: linear-gradient(to right, #f9d423, #f83600);
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px gold;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª */
        .info-bar {
            display: flex;
            justify-content: space-between;
            width: 800px;
            margin-bottom: 10px;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 10px;
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ */
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: #f00;
            border-radius: 50%;
            animation: fall 3s linear forwards;
            z-index: 5;
        }
        
        @keyframes fall {
            to { transform: translateY(1000px) rotate(360deg); }
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }
        
        .start-screen h1 {
            font-size: 3em;
            color: gold;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255,215,0,0.7);
        }
        
        .start-screen p {
            font-size: 1.2em;
            margin-bottom: 30px;
            max-width: 600px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="start-screen" id="start-screen">
        <h1>Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø³Ø­Ø±ÙŠ</h1>
        <p>Ø§Ù†Ø·Ù„Ù‚ ÙÙŠ Ù…ØºØ§Ù…Ø±Ø© Ù…Ù…ØªØ¹Ø© Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø³Ø­Ø±ÙŠ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯! Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø­Ù„ Ø§Ù„Ø£Ù„ØºØ§Ø² ÙˆØ§Ø¬ØªÙŠØ§Ø² Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ÙÙŠ Ø£Ø±Ø¨Ø¹ Ù…Ù†Ø§Ø·Ù‚ ØºØ§Ù…Ø¶Ø©.</p>
        <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©</button>
    </div>

    <div class="game-container" id="game-container" style="display: none;">
        <h1>Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø³Ø­Ø±ÙŠ</h1>
        
        <div class="info-bar">
            <div>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
            <div>Ø§Ù„Ø£Ø¯ÙˆØ§Øª: <span id="tools">0/3</span></div>
        </div>
        
        <div class="map">
            <div class="character" id="character"></div>
            <div class="location forest" onclick="enterLocation('forest')"></div>
            <div class="location cave" onclick="enterLocation('cave')"></div>
            <div class="location beach" onclick="enterLocation('beach')"></div>
            <div class="location castle" onclick="enterLocation('castle')"></div>
        </div>
        
        <div class="challenge-window" id="challenge-window">
            <h2 id="challenge-title">ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</h2>
            <div class="challenge-content" id="challenge-content"></div>
            <div id="answer-section"></div>
            <button onclick="submitAnswer()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        const gameData = {
            locations: {
                forest: {
                    name: "Ø§Ù„ØºØ§Ø¨Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ©",
                    challenges: [
                        {
                            question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØ§Ø­Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¬Ø±Ø©ØŸ",
                            image: "ğŸğŸğŸ",
                            answer: 3,
                            type: "number"
                        },
                        {
                            question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°ÙŠ ØªØ±Ø§Ù‡ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©ØŸ",
                            image: "ğŸ¦Š",
                            options: ["Ø£Ø³Ø¯", "Ø«Ø¹Ù„Ø¨", "Ø¯Ø¨", "Ø°Ø¦Ø¨"],
                            answer: 1,
                            type: "multiple"
                        }
                    ],
                    completed: false
                },
                cave: {
                    name: "Ø§Ù„ÙƒÙ‡Ù Ø§Ù„Ù…Ø¸Ù„Ù…",
                    challenges: [
                        {
                            question: "Ø±ØªØ¨ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ØªØµØ§Ø¹Ø¯ÙŠØ§Ù‹:",
                            numbers: [5, 2, 7, 1],
                            answer: "1,2,5,7",
                            type: "sequence"
                        }
                    ],
                    completed: false
                },
                beach: {
                    name: "Ø§Ù„Ø´Ø§Ø·Ø¦ Ø§Ù„Ø°Ù‡Ø¨ÙŠ",
                    challenges: [
                        {
                            question: "Ù…Ø§ Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø¨Ø­Ø±ØŸ",
                            options: ["Ø£Ø­Ù…Ø±", "Ø£Ø²Ø±Ù‚", "Ø£Ø®Ø¶Ø±", "Ø£ØµÙØ±"],
                            answer: 1,
                            type: "multiple"
                        }
                    ],
                    completed: false
                },
                castle: {
                    name: "Ø§Ù„Ù‚Ù„Ø¹Ø© Ø§Ù„Ù…Ø³Ø­ÙˆØ±Ø©",
                    challenges: [
                        {
                            question: "Ù…Ø§ Ù‡Ùˆ Ø­Ø§ØµÙ„ Ø¬Ù…Ø¹ 3 + 4ØŸ",
                            answer: 7,
                            type: "number"
                        }
                    ],
                    completed: false
                }
            },
            currentLocation: null,
            currentChallenge: 0,
            score: 0,
            tools: 0
        };

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'flex';
            updateScore();
        }

        // Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ù…Ø¹ÙŠÙ†
        function enterLocation(location) {
            gameData.currentLocation = location;
            const locData = gameData.locations[location];
            
            // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©
            const character = document.getElementById('character');
            const target = document.querySelector(`.${location}`);
            
            character.style.top = target.style.top;
            character.style.left = target.style.left;
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£ÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹
            gameData.currentChallenge = 0;
            showChallenge();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ø¯ÙŠ
        function showChallenge() {
            const location = gameData.currentLocation;
            const challenge = gameData.locations[location].challenges[gameData.currentChallenge];
            const window = document.getElementById('challenge-window');
            const title = document.getElementById('challenge-title');
            const content = document.getElementById('challenge-content');
            const answerSection = document.getElementById('answer-section');
            
            window.style.display = 'block';
            title.textContent = `${gameData.locations[location].name} - Ø§Ù„ØªØ­Ø¯ÙŠ ${gameData.currentChallenge + 1}`;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„ØµÙˆØ±Ø©
            content.innerHTML = `
                <p>${challenge.question}</p>
                <div style="font-size: 50px; margin: 20px 0;">${challenge.image || ''}</div>
            `;
            
            // Ø¹Ø±Ø¶ Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
            answerSection.innerHTML = '';
            
            if (challenge.type === 'multiple') {
                challenge.options.forEach((option, index) => {
                    const btn = document.createElement('button');
                    btn.textContent = option;
                    btn.onclick = function() {
                        document.querySelectorAll('#answer-section button').forEach(b => {
                            b.style.background = 'linear-gradient(to right, #f9d423, #f83600)';
                        });
                        this.style.background = 'green';
                        this.dataset.selected = 'true';
                    };
                    answerSection.appendChild(btn);
                });
            } 
            else if (challenge.type === 'number') {
                answerSection.innerHTML = `
                    <input type="number" id="number-answer" style="padding: 10px; font-size: 18px; text-align: center;">
                `;
            }
            else if (challenge.type === 'sequence') {
                answerSection.innerHTML = `
                    <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px;">
                        ${challenge.numbers.map(num => `
                            <div class="sequence-item" style="padding: 10px 15px; background: gold; color: black; border-radius: 5px; cursor: pointer;">${num}</div>
                        `).join('')}
                    </div>
                    <p>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: <span id="sequence-answer"></span></p>
                `;
                
                // Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨
                const items = document.querySelectorAll('.sequence-item');
                let answerSpan = document.getElementById('sequence-answer');
                
                items.forEach(item => {
                    item.addEventListener('click', function() {
                        answerSpan.textContent += this.textContent + ',';
                        this.style.visibility = 'hidden';
                    });
                });
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        function submitAnswer() {
            const location = gameData.currentLocation;
            const challenge = gameData.locations[location].challenges[gameData.currentChallenge];
            let isCorrect = false;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            if (challenge.type === 'multiple') {
                const selected = document.querySelector('#answer-section button[data-selected="true"]');
                if (selected && selected.textContent === challenge.options[challenge.answer]) {
                    isCorrect = true;
                }
            } 
            else if (challenge.type === 'number') {
                const answer = parseInt(document.getElementById('number-answer').value);
                if (answer === challenge.answer) {
                    isCorrect = true;
                }
            }
            else if (challenge.type === 'sequence') {
                const answer = document.getElementById('sequence-answer').textContent.trim();
                if (answer === challenge.answer + ',' || answer === challenge.answer) {
                    isCorrect = true;
                }
            }
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
            if (isCorrect) {
                alert('Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ù„Ù‚Ø¯ Ø±Ø¨Ø­Øª 10 Ù†Ù‚Ø§Ø·');
                gameData.score += 10;
                createConfetti();
                
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØªØ­Ø¯ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ Ø£Ùˆ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
                gameData.currentChallenge++;
                if (gameData.currentChallenge >= gameData.locations[location].challenges.length) {
                    gameData.locations[location].completed = true;
                    gameData.tools++;
                    updateScore();
                    alert(`ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª ${gameData.locations[location].name} ÙˆØ­ØµÙ„Øª Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø© Ø¬Ø¯ÙŠØ¯Ø©!`);
                    document.getElementById('challenge-window').style.display = 'none';
                    
                    // ÙØ­Øµ Ø¥Ø°Ø§ ØªÙ… ÙÙˆØ² Ø§Ù„Ù„Ø§Ø¹Ø¨
                    checkWin();
                } else {
                    showChallenge();
                }
            } else {
                alert('Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª
        function updateScore() {
            document.getElementById('score').textContent = gameData.score;
            document.getElementById('tools').textContent = `${gameData.tools}/3`;
        }

        // ÙØ­Øµ Ø¥Ø°Ø§ ÙØ§Ø² Ø§Ù„Ù„Ø§Ø¹Ø¨
        function checkWin() {
            const allCompleted = Object.values(gameData.locations).every(loc => loc.completed);
            if (allCompleted) {
                setTimeout(() => {
                    alert('ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ ÙˆØ¬Ø¯Øª Ø§Ù„ÙƒÙ†Ø² Ø§Ù„Ø³Ø­Ø±ÙŠ! Ø£Ù†Øª Ø¨Ø·Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©!');
                    createConfetti(100);
                }, 500);
            }
        }

        // ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ
        function createConfetti(count = 30) {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }
    </script>
</body>
</html>