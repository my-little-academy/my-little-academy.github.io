<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„Ø¹Ø¨Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯ ğŸ´</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(#fdf6e3, #fce4ec);
      text-align: center;
      padding: 40px 20px;
      user-select: none;
    }
    #quiz-box {
      background-color: #fff;
      border-radius: 20px;
      padding: 30px 20px 40px;
      max-width: 650px;
      margin: auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    h2 {
      color: #6a1b9a;
      margin-bottom: 25px;
      font-size: 28px;
    }
    .options-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
    }
    .quiz-card {
      flex: 1 1 40%;
      max-width: 280px;
      background-color: #fff;
      border: 3px solid #ba68c8;
      border-radius: 20px;
      padding: 20px;
      cursor: pointer;
      font-size: 22px;
      color: #6a1b9a;
      box-shadow: 0 6px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
    }
    .quiz-card:hover {
      background-color: #f3e5f5;
      transform: scale(1.05);
    }
    .quiz-card.correct {
      background-color: #c8e6c9 !important;
      border-color: #388e3c !important;
      color: #2e7d32 !important;
      transform: scale(1.1);
      font-weight: bold;
      cursor: default;
    }
    .quiz-card.wrong {
      background-color: #ffcdd2 !important;
      border-color: #d32f2f !important;
      color: #b71c1c !important;
      transform: scale(1.1);
      cursor: default;
    }
    .nav-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    button.nav-btn {
      background-color: #7c3aed;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 12px;
      font-size: 18px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
      min-width: 100px;
    }
    button.nav-btn:disabled {
      background-color: #b39ddb;
      cursor: not-allowed;
    }
    button.nav-btn:hover:not(:disabled) {
      background-color: #5e35b1;
    }
    #level-msg {
      font-size: 22px;
      color: #ff1493;
      margin-top: 25px;
      min-height: 28px;
    }
  </style>
</head>
<body>

  <div id="quiz-box">
    <h2 id="question-text">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„...</h2>
    <div class="options-container" id="options-container"></div>
    <div class="nav-buttons">
      <button class="nav-btn" id="prev-btn" onclick="loadPrevQuestion()" disabled>Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚ â—€</button>
      <button class="nav-btn" id="next-btn" onclick="loadNextQuestion()" disabled>Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â–¶</button>
    </div>
    <div id="level-msg"></div>
  </div>

  <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
  <script id="quiz-data" type="application/json">
  [
    {
      "q": "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…ØºØ±Ø¨ØŸ",
      "options": ["Ø§Ù„Ø±Ø¨Ø§Ø·", "Ù…Ø±Ø§ÙƒØ´", "Ø·Ù†Ø¬Ø©", "Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡"],
      "answer": 0
    },
    {
      "q": "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±Ø¬Ù„ Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØªØŸ",
      "options": ["6", "8", "10", "4"],
      "answer": 1
    },
    {
      "q": "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ù… ÙˆØ§Ù‚ÙÙ‹Ø§ØŸ",
      "options": ["Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø§Ù„Ø­ØµØ§Ù†", "Ø§Ù„Ù‚Ø·Ø©", "Ø§Ù„Ø¯Ù„ÙÙŠÙ†"],
      "answer": 1
    },
    {
      "q": "Ø£ÙŠÙ‘ ÙƒÙˆÙƒØ¨ ÙŠÙÙ„Ù‚Ø¨ Ø¨Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø£Ø­Ù…Ø±ØŸ",
      "options": ["Ø§Ù„Ù…Ø±ÙŠØ®", "Ø§Ù„Ù…Ø´ØªØ±ÙŠ", "Ø§Ù„Ø²Ù‡Ø±Ø©", "Ø¹Ø·Ø§Ø±Ø¯"],
      "answer": 0
    },
    {
      "q": "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ",
      "options": ["5", "6", "7", "8"],
      "answer": 2
    }
  ]
  </script>

  <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    const rawData = document.getElementById('quiz-data').textContent;

    const questions = JSON.parse(rawData);

    let currentQuestion = 0;
    let score = 0;

    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const levelMsg = document.getElementById('level-msg');

    // Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬Ø§Ø¨Ø§Øª Ù„Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªÙ†Ù‚Ù„
    const answersState = new Array(questions.length).fill(null);

    function loadQuestion(index) {
      currentQuestion = index;
      const q = questions[index];
      questionText.innerText = `â“ ${q.q}`;
      optionsContainer.innerHTML = '';
      levelMsg.innerText = '';

      q.options.forEach((optText, i) => {
        const card = document.createElement('div');
        card.className = 'quiz-card';
        card.innerText = optText;

        // Ø¥Ø°Ø§ Ø£Ø¬Ø§Ø¨ Ø§Ù„Ø·ÙÙ„ Ø³Ø§Ø¨Ù‚Ù‹Ø§ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù†Ù„ÙˆÙ‘Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        if (answersState[index] !== null) {
          card.classList.add(i === q.answer ? 'correct' : (answersState[index] === i ? 'wrong' : ''));
          card.style.cursor = 'default';
        } else {
          card.onclick = () => selectAnswer(card, i);
        }

        optionsContainer.appendChild(card);
      });

      // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
      prevBtn.disabled = (index === 0);
      // Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ù…ÙØ¹Ù‘Ù„ ÙÙ‚Ø· Ø¥Ø°Ø§ Ø£Ø¬Ø§Ø¨ Ø§Ù„Ø·ÙÙ„
      nextBtn.disabled = (answersState[index] === null);
    }

    function selectAnswer(card, chosenIndex) {
      const q = questions[currentQuestion];
      const cards = optionsContainer.querySelectorAll('.quiz-card');

      // Ù…Ù†Ø¹ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø©
      cards.forEach(c => c.onclick = null);

      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
      answersState[currentQuestion] = chosenIndex;

      if (chosenIndex === q.answer) {
        card.classList.add('correct');
        score++;
        launchConfetti();
      } else {
        card.classList.add('wrong');
        cards[q.answer].classList.add('correct');
      }

      // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
      nextBtn.disabled = false;
    }

    function loadNextQuestion() {
      if (currentQuestion < questions.length -1) {
        loadQuestion(currentQuestion +1);
      } else {
        showResult();
      }
    }

    function loadPrevQuestion() {
      if (currentQuestion > 0) {
        loadQuestion(currentQuestion -1);
      }
    }

    function showResult() {
      quizBox = document.getElementById('quiz-box');
      quizBox.innerHTML = `
        <h2>ğŸ† Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
        <p>Ù†ØªÙŠØ¬ØªÙƒ: <strong>${score} Ù…Ù† ${questions.length}</strong></p>
        <p>Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„! ğŸ‘</p>
        <button onclick="location.reload()">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
      `;
    }

    function launchConfetti() {
      confetti({
        particleCount: 80,
        spread: 60,
        origin: { y: 0.6 },
        colors: ['#ff0a54', '#ff477e', '#ff85a1', '#fbb1bd']
      });
    }

    loadQuestion(currentQuestion);
  </script>

</body>
</html>
