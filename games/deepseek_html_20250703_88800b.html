<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯Ø© ğŸŒ»</title>
    <style>
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… - Ø£Ù„ÙˆØ§Ù† Ø²Ø§Ù‡ÙŠØ© */
        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #5a3e36;
            overflow: hidden;
        }
        
        .game-container {
            width: 95%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            padding: 25px;
            text-align: center;
            position: relative;
            border: 5px solid #f8a5c2;
            overflow: hidden;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 25px 0;
            padding: 10px;
            background: rgba(248, 165, 194, 0.1);
            border-radius: 20px;
        }
        
        .farm-plot {
            background: #e0f7c2;
            border-radius: 15px;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px dashed #a5d6a7;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }
        
        .farm-plot:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            background: #d4f1b1;
        }
        
        /* Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© */
        .plant, .animal {
            font-size: 50px;
            transition: all 0.5s;
            cursor: pointer;
            text-shadow: 0 0 5px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .toolbar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .tool {
            background: linear-gradient(145deg, #f8d57e, #f9c449);
            border: none;
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 0 #e0c15a, 0 5px 15px rgba(0,0,0,0.1);
            font-weight: bold;
            color: #5a3e36;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool:hover {
            background: linear-gradient(145deg, #f9c449, #f8d57e);
            transform: translateY(-3px);
            box-shadow: 0 7px 0 #e0c15a, 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .tool:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #e0c15a;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container {
            width: 100%;
            height: 25px;
            background: #e0e0e0;
            border-radius: 15px;
            margin: 25px 0;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            border: 2px solid #d0d0d0;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #a8edea, #fed6e3);
            width: 0%;
            transition: width 0.7s;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                            rgba(255,255,255,0.3) 0%, 
                            rgba(255,255,255,0.8) 50%, 
                            rgba(255,255,255,0.3) 100%);
            animation: shine 2s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© */
        .coins {
            position: absolute;
            font-size: 24px;
            animation: coinFly 2s forwards;
            z-index: 10;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        
        @keyframes coinFly {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(0.5); opacity: 0; }
        }
        
        .celebration {
            position: absolute;
            font-size: 40px;
            animation: celebration 3s forwards;
            z-index: 5;
            pointer-events: none;
        }
        
        @keyframes celebration {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }
        
        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 25px;
            padding: 30px;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(0,0,0,0.2);
            max-width: 90%;
            width: 400px;
            text-align: center;
            border: 5px solid;
            animation: popIn 0.5s;
            display: none;
        }
        
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .popup-title {
            font-size: 28px;
            margin-bottom: 15px;
            color: #5a3e36;
        }
        
        .popup-content {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .popup-btn {
            background: linear-gradient(145deg, #f8a5c2, #f86cb5);
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-size: 18px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 0 #d45d9d;
            font-weight: bold;
        }
        
        .popup-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 0 #d45d9d;
        }
        
        .popup-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #d45d9d;
        }
        
        /* Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© */
        .instruction-popup {
            border-color: #f8d57e;
            background: linear-gradient(135deg, #fff9e6, #fff);
        }
        
        .success-popup {
            border-color: #a8edea;
            background: linear-gradient(135deg, #e6fff9, #fff);
        }
        
        .warning-popup {
            border-color: #fed6e3;
            background: linear-gradient(135deg, #ffe6f3, #fff);
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .start-screen {
            text-align: center;
            animation: fadeIn 1s;
            padding: 20px;
        }
        
        .game-title {
            font-size: 42px;
            color: #f5576c;
            margin-bottom: 15px;
            text-shadow: 3px 3px 0px rgba(248, 165, 194, 0.5);
            background: linear-gradient(135deg, #f5576c, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .game-subtitle {
            font-size: 20px;
            color: #5a3e36;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 50px;
            padding: 15px 40px;
            font-size: 22px;
            color: white;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 8px 20px rgba(245, 87, 108, 0.3);
            transition: all 0.3s;
            font-weight: bold;
            border: 3px solid white;
        }
        
        .start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 13px 25px rgba(245, 87, 108, 0.4);
        }
        
        .start-btn:active {
            transform: translateY(2px);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .result-screen {
            display: none;
            animation: fadeIn 1s;
            text-align: center;
        }
        
        .result-title {
            font-size: 36px;
            color: #f5576c;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0px rgba(248, 165, 194, 0.5);
        }
        
        .result-stats {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 18px;
        }
        
        .stat-value {
            font-weight: bold;
            color: #f5576c;
        }
        
        /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© */
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .info-label {
            font-size: 14px;
            color: #888;
        }
        
        .info-value {
            font-size: 20px;
            font-weight: bold;
            color: #5a3e36;
        }
        
        /* Ø²Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© */
        .help-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: #f8a5c2;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 3px 0 #d48fa8;
            transition: all 0.3s;
            border: none;
            font-size: 20px;
        }
        
        .help-btn:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div class="start-screen" id="start-screen">
        <h1 class="game-title">Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯Ø© ğŸŒ»</h1>
        <p class="game-subtitle">Ø§Ù†Ø·Ù„Ù‚ ÙÙŠ Ù…ØºØ§Ù…Ø±Ø© Ø²Ø±Ø§Ø¹ÙŠØ© Ù…Ù…ØªØ¹Ø©! Ø§Ø²Ø±Ø¹ ÙˆØ­ØµØ¯ ÙˆØ§Ø±Ø¨Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø²Ø±Ø¹ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©</p>
        <button class="start-btn" onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="game-container" id="game-container" style="display: none;">
        <button class="help-btn" onclick="showHelp()">ØŸ</button>
        
        <h2 style="color: #f5576c; margin-bottom: 5px;">Ù…Ø²Ø±Ø¹ØªÙŠ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©</h2>
        <div style="color: #888; margin-bottom: 15px;">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ <span id="level">1</span></div>
        
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <div class="info-value" id="points">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Ø§Ù„Ù…Ø§Ù„</div>
                <div class="info-value" id="money">50</div>
            </div>
            <div class="info-item">
                <div class="info-label">Ø§Ù„ÙˆÙ‚Øª</div>
                <div class="info-value" id="time">03:00</div>
            </div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="farm" id="farm">
            <!-- Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚Ø·Ø¹ Ø§Ù„Ø£Ø±Ø¶ Ù‡Ù†Ø§ -->
        </div>
        
        <div class="toolbar">
            <button class="tool" onclick="plant('carrot')">ğŸ¥• Ø¬Ø²Ø± (5ğŸ’°)</button>
            <button class="tool" onclick="plant('tomato')">ğŸ… Ø·Ù…Ø§Ø·Ù… (8ğŸ’°)</button>
            <button class="tool" onclick="plant('wheat')">ğŸŒ¾ Ù‚Ù…Ø­ (3ğŸ’°)</button>
            <button class="tool" onclick="addAnimal('cow')">ğŸ„ Ø¨Ù‚Ø±Ø© (20ğŸ’°)</button>
            <button class="tool" onclick="addAnimal('chicken')">ğŸ“ Ø¯Ø¬Ø§Ø¬Ø© (15ğŸ’°)</button>
        </div>
    </div>
    
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="result-screen" id="result-screen">
        <h2 class="result-title" id="result-title">ğŸ‰ Ø£Ø­Ø³Ù†Øª! ğŸ‰</h2>
        
        <div class="result-stats">
            <div class="stat-item">
                <span>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠØ©:</span>
                <span class="stat-value" id="final-points">0</span>
            </div>
            <div class="stat-item">
                <span>Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                <span class="stat-value" id="final-money">0</span>
            </div>
            <div class="stat-item">
                <span>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</span>
                <span class="stat-value" id="final-time">00:00</span>
            </div>
            <div class="stat-item">
                <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</span>
                <span class="stat-value" id="final-level">1</span>
            </div>
        </div>
        
        <button class="start-btn" onclick="nextLevel()">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>
    
    <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <div class="popup instruction-popup" id="help-popup">
        <h2 class="popup-title">ğŸ® ÙƒÙŠÙ ØªÙ„Ø¹Ø¨</h2>
        <div class="popup-content">
            <p><strong>Ø§Ù„Ù‡Ø¯Ù:</strong> Ø¨Ù†Ø§Ø¡ Ù…Ø²Ø±Ø¹Ø© Ù†Ø§Ø¬Ø­Ø© Ø¨ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…Ø§Ù„</p>
            <p>1. Ø§Ø®ØªØ± Ù…Ø­ØµÙˆÙ„Ø§Ù‹ Ø£Ùˆ Ø­ÙŠÙˆØ§Ù†Ø§Ù‹ Ù…Ù† Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª</p>
            <p>2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£Ø±Ø¶ ÙØ§Ø±ØºØ© Ù„Ù„Ø²Ø±Ø§Ø¹Ø© Ø£Ùˆ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†</p>
            <p>3. Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠÙ†Ù…Ùˆ Ø§Ù„Ù…Ø­ØµÙˆÙ„</p>
            <p>4. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØµÙˆÙ„ Ø§Ù„Ù†Ø§Ø¶Ø¬ Ù„Ø¨ÙŠØ¹Ù‡</p>
            <p>5. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø²ÙŠØ¯</p>
            <p>6. Ø­Ù‚Ù‚ Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù„Ù„ØªÙ‚Ø¯Ù…</p>
        </div>
        <button class="popup-btn" onclick="hidePopup('help-popup')">Ø­Ø³Ù†Ø§Ù‹!</button>
    </div>
    
    <div class="popup success-popup" id="success-popup">
        <h2 class="popup-title" id="success-title">ğŸ‰ Ø£Ø­Ø³Ù†Øª! ğŸ‰</h2>
        <div class="popup-content" id="success-content">
            Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!
        </div>
        <button class="popup-btn" onclick="hidePopup('success-popup')">Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </div>
    
    <div class="popup warning-popup" id="warning-popup">
        <h2 class="popup-title" id="warning-title">âš ï¸ Ø§Ù†ØªØ¨Ù‡!</h2>
        <div class="popup-content" id="warning-content">
            Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„!
        </div>
        <button class="popup-btn" onclick="hidePopup('warning-popup')">Ø­Ø³Ù†Ø§Ù‹</button>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        const gameData = {
            level: 1,
            points: 0,
            money: 50,
            timeLeft: 180, // 3 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
            plants: [],
            animals: [],
            prices: {
                carrot: 5,
                tomato: 8,
                wheat: 3,
                cow: 20,
                chicken: 15
            },
            rewards: {
                carrot: 10,
                tomato: 15,
                wheat: 7,
                cow: 30,
                chicken: 20
            },
            growthTime: {
                carrot: 5,
                tomato: 7,
                wheat: 3
            },
            levelGoals: [
                { points: 100, money: 200 },
                { points: 250, money: 400 },
                { points: 500, money: 800 }
            ],
            timerInterval: null
        };

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            initFarm();
            updateUI();
            startTimer();
            
            // Ø¹Ø±Ø¶ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
            setTimeout(() => {
                showPopup('help-popup');
            }, 500);
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
        function initFarm() {
            const farm = document.getElementById('farm');
            farm.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const plot = document.createElement('div');
                plot.className = 'farm-plot';
                plot.dataset.index = i;
                plot.onclick = function() { harvest(this.dataset.index); };
                farm.appendChild(plot);
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
        function startTimer() {
            if (gameData.timerInterval) clearInterval(gameData.timerInterval);
            
            gameData.timerInterval = setInterval(() => {
                gameData.timeLeft--;
                updateTimerDisplay();
                
                if (gameData.timeLeft <= 0) {
                    clearInterval(gameData.timerInterval);
                    endGame(false);
                }
            }, 1000);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ù‚Øª
        function updateTimerDisplay() {
            const minutes = Math.floor(gameData.timeLeft / 60);
            const seconds = gameData.timeLeft % 60;
            document.getElementById('time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Ø²Ø±Ø¹ Ù…Ø­ØµÙˆÙ„
        function plant(type) {
            if (gameData.money < gameData.prices[type]) {
                showWarning('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„!');
                return;
            }
            
            gameData.money -= gameData.prices[type];
            const emptyPlots = document.querySelectorAll('.farm-plot:empty');
            
            if (emptyPlots.length > 0) {
                const randomPlot = emptyPlots[Math.floor(Math.random() * emptyPlots.length)];
                const plantEmoji = type === 'carrot' ? 'ğŸ¥•' : type === 'tomato' ? 'ğŸ…' : 'ğŸŒ¾';
                
                randomPlot.innerHTML = `<div class="plant">${plantEmoji}</div>`;
                gameData.plants.push({
                    type: type,
                    plotIndex: randomPlot.dataset.index,
                    growth: 0,
                    growthTime: gameData.growthTime[type]
                });
                
                updateUI();
                showCoins(randomPlot, -gameData.prices[type]);
                showSuccess(`ØªÙ… Ø²Ø±Ø¹ ${type === 'carrot' ? 'Ø¬Ø²Ø±' : type === 'tomato' ? 'Ø·Ù…Ø§Ø·Ù…' : 'Ù‚Ù…Ø­'} Ø¨Ù†Ø¬Ø§Ø­!`);
            } else {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¶ ÙØ§Ø±ØºØ©!');
                gameData.money += gameData.prices[type];
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ø­ÙŠÙˆØ§Ù†
        function addAnimal(type) {
            if (gameData.money < gameData.prices[type]) {
                showWarning('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„!');
                return;
            }
            
            gameData.money -= gameData.prices[type];
            const emptyPlots = document.querySelectorAll('.farm-plot:empty');
            
            if (emptyPlots.length > 0) {
                const randomPlot = emptyPlots[Math.floor(Math.random() * emptyPlots.length)];
                const animalEmoji = type === 'cow' ? 'ğŸ„' : 'ğŸ“';
                
                randomPlot.innerHTML = `<div class="animal">${animalEmoji}</div>`;
                gameData.animals.push({
                    type: type,
                    plotIndex: randomPlot.dataset.index
                });
                
                updateUI();
                showCoins(randomPlot, -gameData.prices[type]);
                showSuccess(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${type === 'cow' ? 'Ø¨Ù‚Ø±Ø©' : 'Ø¯Ø¬Ø§Ø¬Ø©'} Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©!`);
            } else {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¶ ÙØ§Ø±ØºØ©!');
                gameData.money += gameData.prices[type];
            }
        }

        // Ø­ØµØ§Ø¯ Ø§Ù„Ù…Ø­ØµÙˆÙ„
        function harvest(index) {
            const plot = document.querySelector(`.farm-plot[data-index="${index}"]`);
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù†Ø¨Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø·Ø¹Ø©
            const plantIndex = gameData.plants.findIndex(p => p.plotIndex === index);
            if (plantIndex !== -1) {
                const plant = gameData.plants[plantIndex];
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø­ØµÙˆÙ„ Ù†Ø§Ø¶Ø¬Ø§Ù‹
                if (plant.growth >= plant.growthTime) {
                    gameData.points += gameData.rewards[plant.type];
                    gameData.money += Math.floor(gameData.rewards[plant.type] / 2);
                    gameData.plants.splice(plantIndex, 1);
                    
                    plot.innerHTML = '';
                    showCoins(plot, gameData.rewards[plant.type]);
                    createCelebration(plot, 'ğŸŒŸ');
                    
                    checkLevelUp();
                    updateUI();
                } else {
                    const remainingTime = plant.growthTime - plant.growth;
                    showWarning(`Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØµÙˆÙ„ Ù„ÙŠØ³ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ø¨Ø¹Ø¯! Ø¨Ù‚ÙŠ ${remainingTime} Ø«Ø§Ù†ÙŠØ©`);
                }
                return;
            }
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø­ÙŠÙˆØ§Ù† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø·Ø¹Ø©
            const animalIndex = gameData.animals.findIndex(a => a.plotIndex === index);
            if (animalIndex !== -1) {
                const animal = gameData.animals[animalIndex];
                gameData.points += gameData.rewards[animal.type];
                gameData.money += Math.floor(gameData.rewards[animal.type] / 3);
                gameData.animals.splice(animalIndex, 1);
                
                plot.innerHTML = '';
                showCoins(plot, gameData.rewards[animal.type]);
                createCelebration(plot, 'âœ¨');
                
                checkLevelUp();
                updateUI();
                return;
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù†Ù…Ùˆ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª
        function updatePlantsGrowth() {
            gameData.plants.forEach(plant => {
                plant.growth++;
                
                // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†Ø¨Ø§Øª Ø­Ø³Ø¨ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ù…Ùˆ
                const plot = document.querySelector(`.farm-plot[data-index="${plant.plotIndex}"]`);
                if (plot) {
                    const plantElement = plot.querySelector('.plant');
                    if (plantElement) {
                        const growthPercent = (plant.growth / plant.growthTime) * 100;
                        if (growthPercent < 30) {
                            plantElement.style.opacity = '0.5';
                        } else if (growthPercent < 70) {
                            plantElement.style.opacity = '0.8';
                        } else {
                            plantElement.style.opacity = '1';
                            plantElement.style.animation = 'none';
                            setTimeout(() => {
                                plantElement.style.animation = '';
                            }, 10);
                        }
                    }
                }
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function showCoins(element, amount) {
            const coins = document.createElement('div');
            coins.className = 'coins';
            coins.textContent = amount >= 0 ? `+${amount}ğŸ’°` : `${amount}ğŸ’°`;
            coins.style.color = amount >= 0 ? '#2ecc71' : '#e74c3c';
            
            const rect = element.getBoundingClientRect();
            coins.style.left = (rect.left + rect.width / 2) + 'px';
            coins.style.top = (rect.top + rect.height / 2) + 'px';
            
            document.body.appendChild(coins);
            
            setTimeout(() => {
                coins.remove();
            }, 2000);
        }

        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø­ØªÙØ§Ù„
        function createCelebration(element, emoji) {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = emoji;
            
            const rect = element.getBoundingClientRect();
            celebration.style.left = (rect.left + rect.width / 2) + 'px';
            celebration.style.top = (rect.top + rect.height / 2) + 'px';
            
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 3000);
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function checkLevelUp() {
            const currentGoal = gameData.levelGoals[gameData.level - 1];
            
            if (gameData.points >= currentGoal.points && gameData.money >= currentGoal.money) {
                endGame(true);
            }
        }

        // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function endGame(success) {
            clearInterval(gameData.timerInterval);
            clearInterval(gameData.growthInterval);
            
            document.getElementById('game-container').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            document.getElementById('final-points').textContent = gameData.points;
            document.getElementById('final-money').textContent = gameData.money;
            document.getElementById('final-time').textContent = document.getElementById('time').textContent;
            document.getElementById('final-level').textContent = gameData.level;
            
            if (success) {
                document.getElementById('result-title').textContent = 'ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰! ğŸ‰';
                
                // ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        createCelebration(document.querySelector('.result-screen'), 'âœ¨');
                    }, i * 100);
                }
            } else {
                document.getElementById('result-title').textContent = 'â±ï¸ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!';
                document.querySelector('.start-btn').textContent = 'Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©';
            }
        }

        // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
        function nextLevel() {
            gameData.level++;
            
            if (gameData.level > gameData.levelGoals.length) {
                showSuccess('ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª! Ø£Ù†Øª Ù…Ø²Ø§Ø±Ø¹ Ù…Ù…ØªØ§Ø²!');
                resetGame();
                return;
            }
            
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            
            // Ø²ÙŠØ§Ø¯Ø© ØµØ¹ÙˆØ¨Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            gameData.plants = [];
            gameData.animals = [];
            gameData.money = 50 + (gameData.level * 20);
            gameData.timeLeft = 180 + (gameData.level * 30);
            gameData.points = 0;
            
            initFarm();
            updateUI();
            startTimer();
            
            showSuccess(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${gameData.level}! Ù„Ø¯ÙŠÙƒ ${Math.floor(gameData.timeLeft/60)} Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù‡Ø¯Ù!`);
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©
        function resetGame() {
            gameData.level = 1;
            gameData.points = 0;
            gameData.money = 50;
            gameData.timeLeft = 180;
            gameData.plants = [];
            gameData.animals = [];
            
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        function updateUI() {
            document.getElementById('points').textContent = gameData.points;
            document.getElementById('money').textContent = gameData.money;
            document.getElementById('level').textContent = gameData.level;
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            const currentGoal = gameData.levelGoals[gameData.level - 1];
            const progress = Math.min(
                (gameData.points / currentGoal.points) * 50 + 
                (gameData.money / currentGoal.money) * 50, 
                100
            );
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        // Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showHelp() {
            showPopup('help-popup');
        }
        
        // Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ù†Ø¬Ø§Ø­
        function showSuccess(message) {
            document.getElementById('success-title').textContent = 'ğŸ‰ Ø£Ø­Ø³Ù†Øª! ğŸ‰';
            document.getElementById('success-content').innerHTML = message;
            showPopup('success-popup');
        }
        
        // Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© ØªØ­Ø°ÙŠØ±
        function showWarning(message) {
            document.getElementById('warning-title').textContent = 'âš ï¸ Ø§Ù†ØªØ¨Ù‡!';
            document.getElementById('warning-content').innerHTML = message;
            showPopup('warning-popup');
        }
        
        // Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
        function showPopup(id) {
            document.getElementById(id).style.display = 'block';
        }
        
        // Ø¥Ø®ÙØ§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
        function hidePopup(id) {
            document.getElementById(id).style.display = 'none';
        }

        // Ø¨Ø¯Ø¡ ØªØ­Ø¯ÙŠØ« Ù†Ù…Ùˆ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª
        const gameLoop = setInterval(() => {
            if (document.getElementById('game-container').style.display !== 'none') {
                updatePlantsGrowth();
            }
        }, 1000);
    </script>
</body>
</html>