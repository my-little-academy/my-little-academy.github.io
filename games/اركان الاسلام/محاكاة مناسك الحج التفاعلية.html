<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            min-height: 100vh;
            direction: rtl;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #f39c12;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .ritual-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .ritual-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .ritual-card.completed {
            border-color: #27ae60;
            background: rgba(39, 174, 96, 0.2);
        }

        .ritual-card.current {
            border-color: #f39c12;
            background: rgba(243, 156, 18, 0.2);
            animation: pulse 2s infinite;
        }

        .ritual-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(243, 156, 18, 0); }
            100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
        }

        .ritual-number {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 40px;
            height: 40px;
            background: #f39c12;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .ritual-title {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: #f39c12;
        }

        .ritual-description {
            font-size: 1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .ritual-status {
            font-size: 0.9em;
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
        }

        .status-completed {
            background: #27ae60;
            color: white;
        }

        .status-current {
            background: #f39c12;
            color: white;
        }

        .status-locked {
            background: #7f8c8d;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
        }

        .modal-content {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            margin: 2% auto;
            padding: 30px;
            border-radius: 20px;
            width: 95%;
            max-width: 800px;
            position: relative;
            animation: modalSlide 0.3s ease;
            max-height: 95vh;
            overflow-y: auto;
        }

        @keyframes modalSlide {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close {
            position: absolute;
            top: 15px;
            left: 25px;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            color: #f39c12;
        }

        .modal-title {
            font-size: 2em;
            margin-bottom: 20px;
            color: #f39c12;
            text-align: center;
        }

        .modal-text {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .game-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #f39c12;
        }

        .game-section h3 {
            color: #f39c12;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .mini-game {
            text-align: center;
            padding: 20px;
        }

        .game-button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .game-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .game-button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .complete-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 20px auto;
        }

        .complete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .complete-btn:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .completion-message {
            text-align: center;
            padding: 30px;
            background: rgba(39, 174, 96, 0.2);
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }

        .completion-message h2 {
            color: #27ae60;
            margin-bottom: 15px;
            font-size: 2em;
        }

        .restart-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .ritual-icon {
            font-size: 3em;
            margin-bottom: 10px;
            display: block;
            text-align: center;
        }

        .score-display {
            font-size: 1.2em;
            font-weight: bold;
            color: #f39c12;
            margin: 10px 0;
        }

        .feedback {
            padding: 10px;
            margin: 10px 0;
            border-radius: 10px;
            font-weight: bold;
        }

        .feedback.success {
            background: rgba(39, 174, 96, 0.3);
            color: #27ae60;
        }

        .feedback.error {
            background: rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }

        /* --- ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø·ÙˆØ§Ù Ù„Ø¬Ø¹Ù„Ù‡ Ø¯Ø§Ø¦Ø±ÙŠÙ‹Ø§ --- */
        .tawaf-circle {
            width: 200px;
            height: 200px;
            border: 3px solid #f39c12;
            border-radius: 50%;
            position: relative;
            margin: 20px auto;
            background: rgba(243, 156, 18, 0.1);
        }

        .kaaba {
            width: 40px;
            height: 40px;
            background: #2c3e50;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 5px;
        }

        .pilgrim {
            width: 20px;
            height: 20px;
            background: #27ae60;
            border-radius: 50%;
            position: absolute;
            /* Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙˆÙ„ÙŠ: Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ù„Ù„Ø¯Ø§Ø¦Ø±Ø© (Ù…Ø±ÙƒØ² Ø§Ù„Ù€ Pilgrim Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ©) */
            top: 0;
            left: 50%;
            transform: translateX(-50%); /* Ù„Ø¬Ø¹Ù„Ù‡ ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ Ø§Ù„Ø£ÙÙ‚ÙŠ */
            /* Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ­ÙˆÙ„ Ù„Ù„Ø¯ÙˆØ±Ø§Ù† (Ù…Ø±ÙƒØ² Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø£Ø¨ tawaf-circle) */
            transform-origin: 50% 100px; /* 50% Ø£ÙÙ‚ÙŠØ§Ù‹, 100px Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ (Ù†ØµÙ Ø§Ø±ØªÙØ§Ø¹ tawaf-circle) */
            transition: transform 0.8s ease-out; /* Ø­Ø±ÙƒØ© Ø¯ÙˆØ±Ø§Ù† Ø³Ù„Ø³Ø© */
        }
        /* --- Ù†Ù‡Ø§ÙŠØ© ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø·ÙˆØ§Ù --- */

        .choice-button {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #3498db;
            color: white;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            text-align: right;
        }

        .choice-button:hover {
            background: rgba(52, 152, 219, 0.3);
        }

        .choice-button.correct {
            background: rgba(39, 174, 96, 0.3);
            border-color: #27ae60;
        }

        .choice-button.incorrect {
            background: rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }

        .timer {
            font-size: 1.5em;
            color: #f39c12;
            margin: 10px 0;
        }

        .stone-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .stone {
            width: 30px;
            height: 30px;
            background: #8B4513;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .stone:hover {
            transform: scale(1.1);
        }

        .stone.thrown {
            background: #27ae60;
        }

        .jamrat {
            width: 100px;
            height: 100px;
            background: #7f8c8d;
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            cursor: pointer;
        }

        .jamrat.hit {
            background: #27ae60;
            animation: hit 0.5s ease;
        }

        @keyframes hit {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .modal-content {
                width: 98%;
                margin: 5% auto;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ğŸ•‹ Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h1>
            <p>ØªØ¹Ù„Ù… Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© Ù…Ø¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div id="progressText">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: 0 Ù…Ù† 10</div>
        </div>

        <div class="info-panel">
            <h3>ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ø§Ù„Ù„Ø¹Ø¨Ø©:</h3>
            <p>ØªØ¹Ù„Ù… Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù…Ø¹ Ù„Ø¹Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„ÙƒÙ„ Ù…Ù†Ø³Ùƒ. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙƒÙ„ Ù…Ù†Ø³Ùƒ Ù„ØªØ¹Ù„Ù… ØªÙØ§ØµÙŠÙ„Ù‡ ÙˆÙ„Ø¹Ø¨ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù‡.</p>
        </div>

        <div class="game-board" id="gameBoard">
        </div>

        <div class="completion-message" id="completionMessage">
            <h2>ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø¨Ù†Ø¬Ø§Ø­!</h2>
            <p>Ù„Ù‚Ø¯ ØªØ¹Ù„Ù…Øª Ø¬Ù…ÙŠØ¹ Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ ÙˆÙ„Ø¹Ø¨Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©. ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ùƒ!</p>
            <button class="restart-btn" onclick="restartGame()">Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
        </div>
    </div>

    <div id="ritualModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 class="modal-title" id="modalTitle"></h2>
            <div class="modal-text" id="modalText"></div>
            
            <div class="game-section">
                <h3>ğŸ® Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h3>
                <div class="mini-game" id="miniGame">
                </div>
                <div class="score-display" id="scoreDisplay">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
                <div class="feedback" id="feedback" style="display: none;"></div>
            </div>

            <button class="complete-btn" id="completeBtn" onclick="completeRitual()" disabled>Ø£ÙƒÙ…Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹</button>
        </div>
    </div>

    <script>
        const hajjRituals = [
            {
                id: 1,
                title: "Ø§Ù„Ø¥Ø­Ø±Ø§Ù…",
                icon: "ğŸ¤²",
                description: "Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ø³Ø© - Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ù†Ø³Ùƒ",
                detailedDescription: "ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø­Ø§Ø¬ Ø¨Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ù…Ù† Ø§Ù„Ù…ÙŠÙ‚Ø§ØªØŒ ÙˆÙ‡Ùˆ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ø®ØµØµ Ù„Ù„Ø¥Ø­Ø±Ø§Ù…. ÙŠÙ„Ø¨Ø³ Ø§Ù„Ø±Ø¬Ù„ Ø¥Ø²Ø§Ø±Ø§Ù‹ ÙˆØ±Ø¯Ø§Ø¡Ù‹ Ø£Ø¨ÙŠØ¶ÙŠÙ†ØŒ ÙˆØªÙ„Ø¨Ø³ Ø§Ù„Ù…Ø±Ø£Ø© Ù…Ù„Ø§Ø¨Ø³ Ø³Ø§ØªØ±Ø©. ÙŠÙ†ÙˆÙŠ Ø§Ù„Ø­Ø§Ø¬ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ù†Ø³Ùƒ Ù…Ø¹ Ø§Ù„ØªÙ„Ø¨ÙŠØ©: 'Ù„Ø¨ÙŠÙƒ Ø§Ù„Ù„Ù‡Ù… Ù„Ø¨ÙŠÙƒØŒ Ù„Ø¨ÙŠÙƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ Ù„Ø¨ÙŠÙƒØŒ Ø¥Ù† Ø§Ù„Ø­Ù…Ø¯ ÙˆØ§Ù„Ù†Ø¹Ù…Ø© Ù„Ùƒ ÙˆØ§Ù„Ù…Ù„ÙƒØŒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ'.",
                completed: false,
                current: true,
                gameCompleted: false
            },
            {
                id: 2,
                title: "Ø§Ù„Ø·ÙˆØ§Ù",
                icon: "ğŸ•‹",
                description: "Ø§Ù„Ø·ÙˆØ§Ù Ø­ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø© Ø§Ù„Ù…Ø´Ø±ÙØ©",
                detailedDescription: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø­Ø±Ø§Ù…ØŒ ÙŠØªÙˆØ¬Ù‡ Ø§Ù„Ø­Ø§Ø¬ Ø¥Ù„Ù‰ Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø© Ù„Ø£Ø¯Ø§Ø¡ Ø·ÙˆØ§Ù Ø§Ù„Ù‚Ø¯ÙˆÙ…. ÙŠØ·ÙˆÙ Ø¨Ø§Ù„ÙƒØ¹Ø¨Ø© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·ØŒ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ø£Ø³ÙˆØ¯ ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù‡. ÙŠØ³ØªØ­Ø¨ Ø§Ù„Ø§Ø¶Ø·Ø¨Ø§Ø¹ Ù„Ù„Ø±Ø¬Ø§Ù„ (ÙƒØ´Ù Ø§Ù„ÙƒØªÙ Ø§Ù„Ø£ÙŠÙ…Ù†) ÙˆØ§Ù„Ø±Ù…Ù„ (Ø§Ù„Ø¥Ø³Ø±Ø§Ø¹) ÙÙŠ Ø§Ù„Ø£Ø´ÙˆØ§Ø· Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰.",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 3,
                title: "Ø§Ù„Ø³Ø¹ÙŠ",
                icon: "ğŸš¶â€â™‚ï¸",
                description: "Ø§Ù„Ø³Ø¹ÙŠ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©",
                detailedDescription: "Ø¨Ø¹Ø¯ Ø§Ù„Ø·ÙˆØ§ÙØŒ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø­Ø§Ø¬ Ø¨Ø§Ù„Ø³Ø¹ÙŠ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·. ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„ØµÙØ§ ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¨Ø§Ù„Ù…Ø±ÙˆØ©. ÙŠØ³ØªØ­Ø¨ Ø§Ù„Ø¥Ø³Ø±Ø§Ø¹ Ù„Ù„Ø±Ø¬Ø§Ù„ ÙÙŠ Ø§Ù„Ù…Ø³Ø¹Ù‰ Ø§Ù„Ø£Ø®Ø¶Ø± Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø£Ø®Ø¶Ø±ÙŠÙ†. Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ ÙŠØ­Ø§ÙƒÙŠ Ù‚ØµØ© Ù‡Ø§Ø¬Ø± Ø£Ù… Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ Ø¹Ù„ÙŠÙ‡Ù…Ø§ Ø§Ù„Ø³Ù„Ø§Ù….",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 4,
                title: "Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©",
                icon: "ğŸŒ…",
                description: "Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ© - Ø±ÙƒÙ† Ø§Ù„Ø­Ø¬ Ø§Ù„Ø£Ø¹Ø¸Ù…",
                detailedDescription: "ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ø³Ø¹ Ù…Ù† Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©ØŒ ÙŠØªÙˆØ¬Ù‡ Ø§Ù„Ø­Ø¬Ø§Ø¬ Ø¥Ù„Ù‰ Ø¹Ø±ÙØ© Ù„Ù„ÙˆÙ‚ÙˆÙ Ø¨Ù‡Ø§ Ù…Ù† Ø¨Ø¹Ø¯ Ø²ÙˆØ§Ù„ Ø§Ù„Ø´Ù…Ø³ Ø­ØªÙ‰ ØºØ±ÙˆØ¨Ù‡Ø§. Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£Ø¹Ø¸Ù… Ù„Ù„Ø­Ø¬ØŒ ÙˆÙ‚Ø¯ Ù‚Ø§Ù„ Ø§Ù„Ù†Ø¨ÙŠ ï·º: 'Ø§Ù„Ø­Ø¬ Ø¹Ø±ÙØ©'. ÙŠØ³ØªØ­Ø¨ Ø§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„Ø¯Ø¹Ø§Ø¡ ÙˆØ§Ù„ØªØ¶Ø±Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‡ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ù Ø§Ù„Ø¹Ø¸ÙŠÙ….",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 5,
                title: "Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ø²Ø¯Ù„ÙØ©",
                icon: "ğŸŒ™",
                description: "Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ø²Ø¯Ù„ÙØ© ÙˆØ§Ù„Ù…Ø´Ø¹Ø± Ø§Ù„Ø­Ø±Ø§Ù…",
                detailedDescription: "Ø¨Ø¹Ø¯ ØºØ±ÙˆØ¨ Ø´Ù…Ø³ Ø¹Ø±ÙØ©ØŒ ÙŠØªÙˆØ¬Ù‡ Ø§Ù„Ø­Ø¬Ø§Ø¬ Ø¥Ù„Ù‰ Ù…Ø²Ø¯Ù„ÙØ© Ù„Ù„Ù…Ø¨ÙŠØª Ø¨Ù‡Ø§. ÙŠØµÙ„ÙˆÙ† Ø§Ù„Ù…ØºØ±Ø¨ ÙˆØ§Ù„Ø¹Ø´Ø§Ø¡ Ø¬Ù…Ø¹Ø§Ù‹ ÙˆÙ‚ØµØ±Ø§Ù‹. ÙŠØ³ØªØ­Ø¨ Ø§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„Ø°ÙƒØ± ÙˆØ§Ù„Ø¯Ø¹Ø§Ø¡ØŒ ÙˆØ¬Ù…Ø¹ Ø§Ù„Ø­ØµÙ‰ Ù„Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª. ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ø­Ø¬Ø§Ø¬ ÙÙŠ Ù…Ø²Ø¯Ù„ÙØ© Ø­ØªÙ‰ ÙØ¬Ø± Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¹Ø§Ø´Ø±.",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 6,
                title: "Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª",
                icon: "â›°ï¸",
                description: "Ø±Ù…ÙŠ Ø¬Ù…Ø±Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰",
                detailedDescription: "ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¹Ø§Ø´Ø± Ù…Ù† Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø© (ÙŠÙˆÙ… Ø§Ù„Ù†Ø­Ø±)ØŒ ÙŠØ±Ù…ÙŠ Ø§Ù„Ø­Ø¬Ø§Ø¬ Ø¬Ù…Ø±Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰ Ø¨Ø³Ø¨Ø¹ Ø­ØµÙŠØ§Øª. ÙŠÙƒØ¨Ø± Ù…Ø¹ ÙƒÙ„ Ø­ØµØ§Ø©. Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ ÙŠØ­Ø§ÙƒÙŠ ÙØ¹Ù„ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù†Ø¯Ù…Ø§ Ø±Ù…Ù‰ Ø§Ù„Ø´ÙŠØ·Ø§Ù† Ø§Ù„Ø°ÙŠ Ø­Ø§ÙˆÙ„ Ø¥ØºÙˆØ§Ø¡Ù‡ Ø¹Ù† Ø°Ø¨Ø­ Ø§Ø¨Ù†Ù‡ Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„.",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 7,
                title: "Ø§Ù„Ù‡Ø¯ÙŠ ÙˆØ§Ù„ØªØ­Ù„Ù„",
                icon: "âœ‚ï¸",
                description: "Ø°Ø¨Ø­ Ø§Ù„Ù‡Ø¯ÙŠ ÙˆØ§Ù„ØªØ­Ù„Ù„ Ù…Ù† Ø§Ù„Ø¥Ø­Ø±Ø§Ù…",
                detailedDescription: "Ø¨Ø¹Ø¯ Ø±Ù…ÙŠ Ø¬Ù…Ø±Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø©ØŒ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø­Ø§Ø¬ Ø¨Ø°Ø¨Ø­ Ø§Ù„Ù‡Ø¯ÙŠ (Ø¥Ù† ÙˆØ¬Ø¨ Ø¹Ù„ÙŠÙ‡) Ø«Ù… ÙŠØªØ­Ù„Ù„ Ù…Ù† Ø¥Ø­Ø±Ø§Ù…Ù‡. ÙŠØ­Ù„Ù‚ Ø§Ù„Ø±Ø¬Ù„ Ø±Ø£Ø³Ù‡ Ø£Ùˆ ÙŠÙ‚ØµØ±Ù‡ØŒ ÙˆØªØ£Ø®Ø° Ø§Ù„Ù…Ø±Ø£Ø© Ù…Ù† Ø£Ø·Ø±Ø§Ù Ø´Ø¹Ø±Ù‡Ø§. Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ ÙŠØ­Ù„ Ù„Ù‡ ÙƒÙ„ Ø´ÙŠØ¡ Ø¥Ù„Ø§ Ø§Ù„Ù†Ø³Ø§Ø¡ Ø­ØªÙ‰ ÙŠØ·ÙˆÙ Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©.",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 8,
                title: "Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©",
                icon: "ğŸ”„",
                description: "Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø© - Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬",
                detailedDescription: "Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù„Ù„ØŒ ÙŠØ¹ÙˆØ¯ Ø§Ù„Ø­Ø§Ø¬ Ø¥Ù„Ù‰ Ù…ÙƒØ© Ù„Ø£Ø¯Ø§Ø¡ Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø© Ø¨Ø§Ù„ÙƒØ¹Ø¨Ø© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·. Ù‡Ø°Ø§ Ø·ÙˆØ§Ù Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø­Ø¬ Ù„Ø§ ÙŠØªÙ… Ø§Ù„Ø­Ø¬ Ø¨Ø¯ÙˆÙ†Ù‡. Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø·ÙˆØ§Ù ÙŠØ­Ù„ Ù„Ù„Ø­Ø§Ø¬ ÙƒÙ„ Ø´ÙŠØ¡ Ø­ØªÙ‰ Ø§Ù„Ù†Ø³Ø§Ø¡ Ø¥Ø°Ø§ Ø³Ø¹Ù‰ Ø¨Ø¹Ø¯Ù‡ (Ø¥Ù† Ù„Ù… ÙŠÙƒÙ† Ø³Ø¹Ù‰ Ù…Ù† Ù‚Ø¨Ù„).",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 9,
                title: "Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹",
                icon: "ğŸ‘‹",
                description: "Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹ - Ø¢Ø®Ø± Ø¹Ù‡Ø¯ Ø¨Ø§Ù„Ø¨ÙŠØª",
                detailedDescription: "Ù‚Ø¨Ù„ Ù…ØºØ§Ø¯Ø±Ø© Ù…ÙƒØ©ØŒ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø­Ø§Ø¬ Ø¨Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹ Ø¨Ø§Ù„ÙƒØ¹Ø¨Ø© Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·. Ù‡Ø°Ø§ Ø¢Ø®Ø± Ø¹Ù‡Ø¯ Ø¨Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ø­Ø±Ø§Ù…ØŒ ÙˆÙŠØ³ØªØ­Ø¨ Ø§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„Ø¯Ø¹Ø§Ø¡ ÙˆØ§Ù„ØªØ¶Ø±Ø¹. ÙŠØ³Ù‚Ø· Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹ Ø¹Ù† Ø§Ù„Ø­Ø§Ø¦Ø¶ ÙˆØ§Ù„Ù†ÙØ³Ø§Ø¡ØŒ ÙˆÙ„Ø§ ÙŠØ¬ÙˆØ² Ø§Ù„ØªØ£Ø®ÙŠØ± Ø¨Ø¹Ø¯Ù‡ Ø¥Ù„Ø§ Ù„Ø­Ø§Ø¬Ø©.",
                completed: false,
                current: false,
                gameCompleted: false
            },
            {
                id: 10,
                title: "Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬",
                icon: "ğŸŠ",
                description: "Ø¥ØªÙ…Ø§Ù… Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„",
                detailedDescription: "Ø¨Ø¹Ø¯ Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹ØŒ ÙŠÙƒÙˆÙ† Ø§Ù„Ø­Ø§Ø¬ Ù‚Ø¯ Ø£ØªÙ… Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬. ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ù‡ Ø­Ø¬Ù‡ ÙˆØ¬Ø¹Ù„Ù‡ Ù…Ø¨Ø±ÙˆØ±Ø§Ù‹. Ø§Ù„Ø­Ø¬ Ø§Ù„Ù…Ø¨Ø±ÙˆØ± Ù„ÙŠØ³ Ù„Ù‡ Ø¬Ø²Ø§Ø¡ Ø¥Ù„Ø§ Ø§Ù„Ø¬Ù†Ø©. ÙŠØ³ØªØ­Ø¨ Ù„Ù„Ø­Ø§Ø¬ Ø§Ù„Ø¥ÙƒØ«Ø§Ø± Ù…Ù† Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµØ§Ù„Ø­Ø© ÙˆØ§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ù…Ø§ ØªØ¹Ù„Ù…Ù‡ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø¨Ø§Ø±ÙƒØ©.",
                completed: false,
                current: false,
                gameCompleted: false
            }
        ];

        let currentRitualIndex = 0;
        let selectedRitual = null;
        let gameScore = 0;
        let tawafRounds = 0;
        let saeiRounds = 0;
        let ihramAnswered = false; // Flag for Ihram game
        let arafatPrayed = false; // Flag for Arafat game
        let muzdalifaCollected = 0; // Count for Muzdalifa stones
        let jamaratThrown = 0; // Count for Jamarat stones
        let hadyDone = false; // Flag for Hady game
        let ifadaTawafRounds = 0; // For Tawaf Al-Ifadah
        let wadaTawafRounds = 0; // For Tawaf Al-Wada'a

        // Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø·Ø§Ø¦Ù
        let pilgrimAngle = 0; 
        const tawafSpeed = 360 / 7; // ÙƒÙ„ Ø´ÙˆØ· 360/7 Ø¯Ø±Ø¬Ø©

        function initializeGame() {
            renderRituals();
            updateProgress();
            document.getElementById('completionMessage').style.display = 'none'; // Hide completion message on init
        }

        function renderRituals() {
            const gameBoard = document.getElementById('gameBoard');
            gameBoard.innerHTML = '';

            hajjRituals.forEach((ritual, index) => {
                const ritualCard = document.createElement('div');
                ritualCard.className = 'ritual-card';
                
                if (ritual.completed) {
                    ritualCard.classList.add('completed');
                } else if (index === currentRitualIndex) {
                    ritualCard.classList.add('current');
                } else if (index > currentRitualIndex) {
                    ritualCard.classList.add('locked');
                }

                ritualCard.innerHTML = `
                    <div class="ritual-number">${ritual.id}</div>
                    <div class="ritual-icon">${ritual.icon}</div>
                    <h3 class="ritual-title">${ritual.title}</h3>
                    <p class="ritual-description">${ritual.description}</p>
                    <span class="ritual-status ${getStatusClass(ritual, index)}">
                        ${getStatusText(ritual, index)}
                    </span>
                `;

                if (index <= currentRitualIndex) {
                    ritualCard.addEventListener('click', () => openRitualModal(ritual));
                }

                gameBoard.appendChild(ritualCard);
            });
        }

        function getStatusClass(ritual, index) {
            if (ritual.completed) return 'status-completed';
            if (index === currentRitualIndex) return 'status-current';
            return 'status-locked';
        }

        function getStatusText(ritual, index) {
            if (ritual.completed) return 'âœ… Ù…ÙƒØªÙ…Ù„';
            if (index === currentRitualIndex) return 'ğŸ”„ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©';
            return 'ğŸ”’ Ù…Ù‚ÙÙ„';
        }

        function updateProgress() {
            const completedRituals = hajjRituals.filter(r => r.completed).length;
            const totalRituals = hajjRituals.length;
            const progressPercentage = (completedRituals / totalRituals) * 100;

            document.getElementById('progressFill').style.width = `${progressPercentage}%`;
            document.getElementById('progressText').textContent = `Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ${completedRituals} Ù…Ù† ${totalRituals}`;

            if (completedRituals === totalRituals) {
                document.getElementById('completionMessage').style.display = 'block';
            } else {
                document.getElementById('completionMessage').style.display = 'none';
            }
        }

        function openRitualModal(ritual) {
            selectedRitual = ritual;
            gameScore = 0; // Reset score for each game
            document.getElementById('modalTitle').textContent = ritual.title;
            document.getElementById('modalText').textContent = ritual.detailedDescription;
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
            document.getElementById('feedback').style.display = 'none';
            
            const completeBtn = document.getElementById('completeBtn');
            if (ritual.completed) {
                completeBtn.textContent = 'ØªÙ… Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                completeBtn.disabled = true;
                completeBtn.style.opacity = '0.5';
            } else {
                completeBtn.textContent = ritual.gameCompleted ? 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ' : 'Ø£ÙƒÙ…Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹';
                completeBtn.disabled = !ritual.gameCompleted;
                completeBtn.style.opacity = ritual.gameCompleted ? '1' : '0.5';
            }

            loadMiniGame(ritual);
            document.getElementById('ritualModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('ritualModal').style.display = 'none';
            // Reset game-specific flags when closing modal if ritual not completed
            if (selectedRitual && !selectedRitual.completed) {
                switch(selectedRitual.id) {
                    case 1: ihramAnswered = false; break;
                    case 2: tawafRounds = 0; pilgrimAngle = 0; break; // Reset pilgrim angle
                    case 3: saeiRounds = 0; break;
                    case 4: arafatPrayed = false; break;
                    case 5: muzdalifaCollected = 0; break;
                    case 6: jamaratThrown = 0; break;
                    case 7: hadyDone = false; break;
                    case 8: ifadaTawafRounds = 0; pilgrimAngle = 0; break; // Reset pilgrim angle
                    case 9: wadaTawafRounds = 0; pilgrimAngle = 0; break; // Reset pilgrim angle
                }
                selectedRitual.gameCompleted = false; // Reset game completion status
            }
            renderRituals(); // Re-render to update statuses
        }

        function completeRitual() {
            if (selectedRitual && selectedRitual.gameCompleted) {
                selectedRitual.completed = true;
                
                // Advance currentRitualIndex if the completed ritual was the current one
                if (hajjRituals[currentRitualIndex].id === selectedRitual.id && currentRitualIndex < hajjRituals.length - 1) {
                    currentRitualIndex++;
                    hajjRituals[currentRitualIndex].current = true;
                }
                closeModal();
                updateProgress();
                renderRituals(); // Re-render to update statuses
            }
        }

        function restartGame() {
            hajjRituals.forEach(ritual => {
                ritual.completed = false;
                ritual.current = false;
                ritual.gameCompleted = false;
            });
            hajjRituals[0].current = true; // Set the first ritual as current
            currentRitualIndex = 0;
            updateProgress();
            renderRituals();
            document.getElementById('completionMessage').style.display = 'none';
        }

        function showFeedback(message, type) {
            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.textContent = message;
            feedbackDiv.className = `feedback ${type}`;
            feedbackDiv.style.display = 'block';
        }

        // --- Mini-Games Implementations ---

        function loadMiniGame(ritual) {
            const miniGameDiv = document.getElementById('miniGame');
            miniGameDiv.innerHTML = ''; // Clear previous game content
            
            // Reset game-specific flags here before loading new game
            tawafRounds = 0;
            saeiRounds = 0;
            ihramAnswered = false;
            arafatPrayed = false;
            muzdalifaCollected = 0;
            jamaratThrown = 0;
            hadyDone = false;
            ifadaTawafRounds = 0;
            wadaTawafRounds = 0;
            pilgrimAngle = 0; // Reset pilgrim angle for any tawaf game

            const completeBtn = document.getElementById('completeBtn');
            completeBtn.textContent = 'Ø£ÙƒÙ…Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹';
            completeBtn.disabled = true;
            completeBtn.style.opacity = '0.5';

            switch(ritual.id) {
                case 1: // Ø§Ù„Ø¥Ø­Ø±Ø§Ù…
                    loadIhramGame(miniGameDiv);
                    break;
                case 2: // Ø§Ù„Ø·ÙˆØ§Ù
                    loadTawafGame(miniGameDiv);
                    break;
                case 3: // Ø§Ù„Ø³Ø¹ÙŠ
                    loadSaeiGame(miniGameDiv);
                    break;
                case 4: // Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©
                    loadArafatGame(miniGameDiv);
                    break;
                case 5: // Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ø²Ø¯Ù„ÙØ©
                    loadMuzdalifaGame(miniGameDiv);
                    break;
                case 6: // Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª
                    loadJamaratGame(miniGameDiv);
                    break;
                case 7: // Ø§Ù„Ù‡Ø¯ÙŠ ÙˆØ§Ù„ØªØ­Ù„Ù„
                    loadHadyGame(miniGameDiv);
                    break;
                case 8: // Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©
                    loadTawafIfadaGame(miniGameDiv);
                    break;
                case 9: // Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹
                    loadTawafWadaGame(miniGameDiv);
                    break;
                case 10: // Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬ - No game needed, automatic completion
                    loadCompletionGame(miniGameDiv);
                    selectedRitual.gameCompleted = true; // Mark as completed instantly
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                    break;
                default:
                    miniGameDiv.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„Ø¹Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</p>';
            }
        }

        // Game for Ihram (Id: 1)
        function loadIhramGame(container) {
            container.innerHTML = `
                <h4>ğŸ¤² Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¥Ø­Ø±Ø§Ù…: Ø§Ø®ØªØ± Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ø§Ù„ØµØ­ÙŠØ­Ø©</h4>
                <p>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¥Ø­Ø±Ø§Ù…:</p>
                <div style="margin: 20px 0;">
                    <button class="choice-button" onclick="checkIhramChoice(this, true)">Ø¥Ø²Ø§Ø± ÙˆØ±Ø¯Ø§Ø¡ Ø£Ø¨ÙŠØ¶ Ù„Ù„Ø±Ø¬Ù„</button>
                    <button class="choice-button" onclick="checkIhramChoice(this, false)">Ù…Ù„Ø§Ø¨Ø³ Ù…Ù„ÙˆÙ†Ø©</button>
                    <button class="choice-button" onclick="checkIhramChoice(this, false)">Ù…Ù„Ø§Ø¨Ø³ Ø¹Ø§Ø¯ÙŠØ©</button>
                </div>
            `;
            ihramAnswered = false; // Reset for new game load
        }

        function checkIhramChoice(button, isCorrect) {
            if (ihramAnswered) return; // Prevent multiple answers
            ihramAnswered = true;

            const buttons = document.querySelectorAll('#miniGame .choice-button');
            buttons.forEach(btn => btn.disabled = true); // Disable all buttons

            if (isCorrect) {
                button.classList.add('correct');
                showFeedback('ØµØ­ÙŠØ­! Ù‡Ø°Ù‡ Ù‡ÙŠ Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¥Ø­Ø±Ø§Ù… Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„Ø±Ø¬Ù„.', 'success');
                gameScore += 10;
                selectedRitual.gameCompleted = true;
            } else {
                button.classList.add('incorrect');
                showFeedback('Ø®Ø·Ø£. Ø§Ø®ØªØ± Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø§Ù„Ø¨Ø³ÙŠØ·Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù„Ø¥Ø­Ø±Ø§Ù….', 'error');
                gameScore -= 5;
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
            document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
            document.getElementById('completeBtn').disabled = false;
            document.getElementById('completeBtn').style.opacity = '1';
        }

        // Game for Tawaf (Id: 2)
        function loadTawafGame(container) {
            tawafRounds = 0;
            pilgrimAngle = 0; // Start at 0 degrees (top center)
            container.innerHTML = `
                <h4>ğŸ•‹ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø·ÙˆØ§Ù: Ø£ØªÙ… Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø· Ø­ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø©</h4>
                <div class="tawaf-circle">
                    <div class="kaaba"></div>
                    <div class="pilgrim" id="pilgrim" style="transform: translateX(-50%) rotate(0deg);"></div>
                </div>
                <p>Ø£Ø´ÙˆØ§Ø· Ø§Ù„Ø·ÙˆØ§Ù Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: <span id="tawafCounter">0</span> Ù…Ù† 7</p>
                <button class="game-button" onclick="performTawafRound()">Ø·ÙØª Ø´ÙˆØ·Ø§Ù‹</button>
            `;
            updateTawafDisplay();
        }

        function performTawafRound() {
            if (tawafRounds < 7) {
                tawafRounds++;
                document.getElementById('tawafCounter').textContent = tawafRounds;
                gameScore += 5; // Reward for each round
                showFeedback(`Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø´ÙˆØ· Ø±Ù‚Ù… ${tawafRounds}.`, 'success');
                
                const pilgrim = document.getElementById('pilgrim');
                pilgrimAngle += tawafSpeed; // Increase angle for each round
                pilgrim.style.transform = `translateX(-50%) rotate(${pilgrimAngle}deg)`;

                if (tawafRounds === 7) {
                    selectedRitual.gameCompleted = true;
                    showFeedback('Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø· Ù…Ù† Ø§Ù„Ø·ÙˆØ§Ù Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø£Ø´ÙˆØ§Ø· Ø§Ù„Ø·ÙˆØ§Ù.', 'info');
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
        }

        function updateTawafDisplay() {
            // Function to update display, not strictly needed with the new rotation logic
            // but kept for consistency if you add more visual updates.
        }

        // Game for Saei (Id: 3)
        function loadSaeiGame(container) {
            saeiRounds = 0;
            container.innerHTML = `
                <h4>ğŸš¶â€â™‚ï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø³Ø¹ÙŠ: Ø£ÙƒÙ…Ù„ 7 Ø£Ø´ÙˆØ§Ø· Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©</h4>
                <p>ØªØ®ÙŠÙ„ Ù†ÙØ³Ùƒ ØªØ³Ø¹Ù‰ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©. Ø§Ø¶ØºØ· 'Ø³Ø¹Ù‰ Ø´ÙˆØ·Ø§Ù‹' Ù„ÙƒÙ„ Ø´ÙˆØ·.</p>
                <p>Ø£Ø´ÙˆØ§Ø· Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: <span id="saeiCounter">0</span> Ù…Ù† 7</p>
                <button class="game-button" onclick="performSaeiRound()">Ø³Ø¹Ù‰ Ø´ÙˆØ·Ø§Ù‹</button>
            `;
        }

        function performSaeiRound() {
            if (saeiRounds < 7) {
                saeiRounds++;
                document.getElementById('saeiCounter').textContent = saeiRounds;
                gameScore += 5;
                showFeedback(`Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø´ÙˆØ· Ø±Ù‚Ù… ${saeiRounds}.`, 'success');
                if (saeiRounds === 7) {
                    selectedRitual.gameCompleted = true;
                    showFeedback('Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø· Ù…Ù† Ø§Ù„Ø³Ø¹ÙŠ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø£Ø´ÙˆØ§Ø· Ø§Ù„Ø³Ø¹ÙŠ.', 'info');
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
        }

        // Game for Arafat (Id: 4)
        let arafatTimer;
        let arafatTimeLeft;

        function loadArafatGame(container) {
            arafatPrayed = false; // Reset for new game
            arafatTimeLeft = 10; // seconds
            container.innerHTML = `
                <h4>ğŸŒ… Ù„Ø¹Ø¨Ø© Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©: Ø§Ø³ØªØºÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø¹Ø§Ø¡!</h4>
                <p>Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ø¹Ø±ÙØ©ØŒ Ø§ØºØªÙ†Ù… Ø§Ù„ÙØ±ØµØ© Ù„Ù„Ø¯Ø¹Ø§Ø¡ ÙˆØ§Ù„Ø§Ø³ØªØºÙØ§Ø±.</p>
                <p>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="arafatTimer">10</span> Ø«ÙˆØ§Ù†Ù</p>
                <button class="game-button" onclick="startArafatTimer()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø¹Ø§Ø¡</button>
            `;
        }

        function startArafatTimer() {
            const timerDisplay = document.getElementById('arafatTimer');
            const startButton = document.querySelector('#miniGame .game-button');
            startButton.disabled = true;
            startButton.style.opacity = '0.5';

            arafatTimer = setInterval(() => {
                arafatTimeLeft--;
                timerDisplay.textContent = arafatTimeLeft;
                if (arafatTimeLeft <= 0) {
                    clearInterval(arafatTimer);
                    arafatPrayed = true;
                    selectedRitual.gameCompleted = true;
                    gameScore += 20;
                    showFeedback('Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©. ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ø¯Ø¹Ø§Ø¡Ùƒ!', 'success');
                    document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            }, 1000);
        }

        // Game for Muzdalifa (Id: 5)
        function loadMuzdalifaGame(container) {
            muzdalifaCollected = 0;
            container.innerHTML = `
                <h4>ğŸŒ™ Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø¨ÙŠØª Ø¨Ù…Ø²Ø¯Ù„ÙØ©: Ø§Ø¬Ù…Ø¹ Ø­ØµÙŠØ§Øª Ø§Ù„Ø¬Ù…Ø±Ø§Øª (7 Ø­ØµÙŠØ§Øª)</h4>
                <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¬Ù…Ø¹ Ø­ØµØ§Ø©" Ù„Ø¬Ù…Ø¹ Ø§Ù„Ø­ØµÙŠØ§Øª Ù„Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª.</p>
                <p>Ø§Ù„Ø­ØµÙŠØ§Øª Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©: <span id="stoneCount">0</span> Ù…Ù† 7</p>
                <button class="game-button" onclick="collectStone()">Ø¬Ù…Ø¹ Ø­ØµØ§Ø©</button>
            `;
        }

        function collectStone() {
            if (muzdalifaCollected < 7) {
                muzdalifaCollected++;
                document.getElementById('stoneCount').textContent = muzdalifaCollected;
                gameScore += 3;
                showFeedback(`Ø¬Ù…Ø¹Øª Ø­ØµØ§Ø© Ø±Ù‚Ù… ${muzdalifaCollected}.`, 'success');
                if (muzdalifaCollected === 7) {
                    selectedRitual.gameCompleted = true;
                    showFeedback('Ù„Ù‚Ø¯ Ø¬Ù…Ø¹Øª Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ§ÙÙŠ Ù…Ù† Ø§Ù„Ø­ØµÙŠØ§Øª.', 'success');
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø¬Ù…Ø¹Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.', 'info');
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
        }

        // Game for Jamarat (Id: 6)
        function loadJamaratGame(container) {
            jamaratThrown = 0;
            container.innerHTML = `
                <h4>â›°ï¸ Ù„Ø¹Ø¨Ø© Ø±Ù…ÙŠ Ø§Ù„Ø¬Ù…Ø±Ø§Øª: Ø§Ø±Ù…Ù Ø¬Ù…Ø±Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰ Ø¨Ù€ 7 Ø­ØµÙŠØ§Øª</h4>
                <div class="jamrat" id="jamratTarget" onclick="throwStone()"></div>
                <p>Ø§Ù„Ø­ØµÙŠØ§Øª Ø§Ù„Ù…Ø±Ù…ÙŠØ©: <span id="jamaratCount">0</span> Ù…Ù† 7</p>
                <p>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ø±Ø© Ù„Ø±Ù…ÙŠ Ø§Ù„Ø­ØµÙ‰.</p>
                <div class="stone-container" id="stoneDisplay"></div>
            `;
            renderStones();
        }

        function renderStones() {
            const stoneDisplay = document.getElementById('stoneDisplay');
            stoneDisplay.innerHTML = '';
            for (let i = 0; i < 7; i++) {
                const stone = document.createElement('div');
                stone.className = 'stone';
                if (i < jamaratThrown) {
                    stone.classList.add('thrown');
                }
                stoneDisplay.appendChild(stone);
            }
        }

        function throwStone() {
            if (jamaratThrown < 7) {
                jamaratThrown++;
                document.getElementById('jamaratCount').textContent = jamaratThrown;
                gameScore += 5;
                showFeedback(`Ø±Ù…ÙŠØª Ø§Ù„Ø­ØµØ§Ø© Ø±Ù‚Ù… ${jamaratThrown}.`, 'success');
                document.getElementById('jamratTarget').classList.add('hit');
                setTimeout(() => document.getElementById('jamratTarget').classList.remove('hit'), 500);
                renderStones();

                if (jamaratThrown === 7) {
                    selectedRitual.gameCompleted = true;
                    showFeedback('Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø±Ù…ÙŠ Ø¬Ù…Ø±Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø±Ù…ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­ØµÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.', 'info');
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
        }

        // Game for Hady (Id: 7)
        function loadHadyGame(container) {
            hadyDone = false;
            container.innerHTML = `
                <h4>âœ‚ï¸ Ù„Ø¹Ø¨Ø© Ø§Ù„Ù‡Ø¯ÙŠ ÙˆØ§Ù„ØªØ­Ù„Ù„: Ù‚Ù… Ø¨Ø§Ù„ØªØ­Ù„Ù„!</h4>
                <p>ØªØ®ÙŠÙ„ Ø£Ù†Ùƒ ØªÙ‚ÙˆÙ… Ø¨Ø°Ø¨Ø­ Ø§Ù„Ù‡Ø¯ÙŠ (Ø¥Ù† ÙˆØ¬Ø¨) Ø«Ù… ØªØ­Ù„Ù‚ Ø´Ø¹Ø±Ùƒ Ø£Ùˆ ØªÙ‚ØµØ±Ù‡.</p>
                <button class="game-button" onclick="performHady()">ØªØ­Ù„Ù„</button>
            `;
        }

        function performHady() {
            if (!hadyDone) {
                hadyDone = true;
                selectedRitual.gameCompleted = true;
                gameScore += 15;
                showFeedback('Ù„Ù‚Ø¯ ØªØ­Ù„Ù„Øª Ù…Ù† Ø¥Ø­Ø±Ø§Ù…Ùƒ Ø¨Ù†Ø¬Ø§Ø­. Ù…Ø¨Ø±ÙˆÙƒ!', 'success');
                document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
                document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                document.getElementById('completeBtn').disabled = false;
                document.getElementById('completeBtn').style.opacity = '1';
                document.querySelector('#miniGame .game-button').disabled = true;
                document.querySelector('#miniGame .game-button').style.opacity = '0.5';
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø§Ù„ØªØ­Ù„Ù„ Ø¨Ø§Ù„ÙØ¹Ù„.', 'info');
            }
        }

        // Game for Tawaf Al-Ifadah (Id: 8) - Same as Tawaf but with specific flag
        function loadTawafIfadaGame(container) {
            ifadaTawafRounds = 0;
            pilgrimAngle = 0; // Start at 0 degrees (top center)
            container.innerHTML = `
                <h4>ğŸ”„ Ù„Ø¹Ø¨Ø© Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©: Ø£ÙƒÙ…Ù„ Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·</h4>
                <div class="tawaf-circle">
                    <div class="kaaba"></div>
                    <div class="pilgrim" id="pilgrim" style="transform: translateX(-50%) rotate(0deg);"></div>
                </div>
                <p>Ø£Ø´ÙˆØ§Ø· Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: <span id="ifadaTawafCounter">0</span> Ù…Ù† 7</p>
                <button class="game-button" onclick="performIfadaTawafRound()">Ø·ÙØª Ø´ÙˆØ·Ø§Ù‹</button>
            `;
        }

        function performIfadaTawafRound() {
            if (ifadaTawafRounds < 7) {
                ifadaTawafRounds++;
                document.getElementById('ifadaTawafCounter').textContent = ifadaTawafRounds;
                gameScore += 5;
                showFeedback(`Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø´ÙˆØ· Ø±Ù‚Ù… ${ifadaTawafRounds} Ù…Ù† Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©.`, 'success');

                const pilgrim = document.getElementById('pilgrim');
                pilgrimAngle += tawafSpeed;
                pilgrim.style.transform = `translateX(-50%) rotate(${pilgrimAngle}deg)`;

                if (ifadaTawafRounds === 7) {
                    selectedRitual.gameCompleted = true;
                    showFeedback('Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø£Ø´ÙˆØ§Ø· Ø·ÙˆØ§Ù Ø§Ù„Ø¥ÙØ§Ø¶Ø©.', 'info');
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
        }

        // Game for Tawaf Al-Wada'a (Id: 9) - Same as Tawaf but with specific flag
        function loadTawafWadaGame(container) {
            wadaTawafRounds = 0;
            pilgrimAngle = 0; // Start at 0 degrees (top center)
            container.innerHTML = `
                <h4>ğŸ‘‹ Ù„Ø¹Ø¨Ø© Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹: Ø£ÙƒÙ…Ù„ Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø·</h4>
                <div class="tawaf-circle">
                    <div class="kaaba"></div>
                    <div class="pilgrim" id="pilgrim" style="transform: translateX(-50%) rotate(0deg);"></div>
                </div>
                <p>Ø£Ø´ÙˆØ§Ø· Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹ Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: <span id="wadaTawafCounter">0</span> Ù…Ù† 7</p>
                <button class="game-button" onclick="performWadaTawafRound()">Ø·ÙØª Ø´ÙˆØ·Ø§Ù‹</button>
            `;
        }

        function performWadaTawafRound() {
            if (wadaTawafRounds < 7) {
                wadaTawafRounds++;
                document.getElementById('wadaTawafCounter').textContent = wadaTawafRounds;
                gameScore += 5;
                showFeedback(`Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø´ÙˆØ· Ø±Ù‚Ù… ${wadaTawafRounds} Ù…Ù† Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹.`, 'success');

                const pilgrim = document.getElementById('pilgrim');
                pilgrimAngle += tawafSpeed;
                pilgrim.style.transform = `translateX(-50%) rotate(${pilgrimAngle}deg)`;

                if (wadaTawafRounds === 7) {
                    selectedRitual.gameCompleted = true;
                    showFeedback('Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    document.getElementById('completeBtn').textContent = 'Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ';
                    document.getElementById('completeBtn').disabled = false;
                    document.getElementById('completeBtn').style.opacity = '1';
                }
            } else {
                showFeedback('Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø£Ø´ÙˆØ§Ø· Ø·ÙˆØ§Ù Ø§Ù„ÙˆØ¯Ø§Ø¹.', 'info');
            }
            document.getElementById('scoreDisplay').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${gameScore}`;
        }

        // Game for Completion (Id: 10)
        function loadCompletionGame(container) {
            container.innerHTML = `
                <h4>ğŸŠ Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø¬Ù…ÙŠØ¹ Ù…Ù†Ø§Ø³Ùƒ Ø§Ù„Ø­Ø¬!</h4>
                <p>Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø³Ùƒ Ù‡Ùˆ Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù† Ø¥ØªÙ…Ø§Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø¨Ù†Ø¬Ø§Ø­. Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„Ø¹Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù‡Ù†Ø§ØŒ ÙÙ‚Ø· ØªØ£ÙƒÙŠØ¯ Ù„Ø¥Ù†Ø¬Ø§Ø²Ùƒ Ø§Ù„Ø¹Ø¸ÙŠÙ…!</p>
            `;
        }

        // Initial call to set up the game
        initializeGame();
    </script>
</body>
</html>