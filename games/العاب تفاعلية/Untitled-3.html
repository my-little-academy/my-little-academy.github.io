<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù„Ø¹Ø¨Ø© Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø±ÙˆÙ - Ø­Ø±Ù Ø§Ù„Ø¨Ø§Ø¡</title>
<style>
  body {
    margin: 0; background: #cce7ff; overflow: hidden; font-family: 'Tajawal', sans-serif;
  }
  #gameCanvas {
    background: linear-gradient(to top, #80d0ff 0%, #a0e9ff 100%);
    display: block; margin: 0 auto; border: 2px solid #005f99;
    border-radius: 15px;
  }
  #scoreBoard {
    text-align: center;
    font-size: 24px;
    color: #003366;
    margin-top: 10px;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="600" height="400"></canvas>
<div id="scoreBoard">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const player = {
    x: canvas.width / 2 - 25,
    y: canvas.height - 60,
    width: 50,
    height: 50,
    speed: 7,
    color: '#d10000',
    letter: 'Ø¨',
    name: 'Ø¨Ø³Ù‘Ø§Ù… Ø§Ù„Ø¨Ø·ÙŠØ®',
  };

  let keys = {};
  let score = 0;
  let gameOver = false;

  // Ø£Ø´ÙŠØ§Ø¡ ÙŠØ¬Ø¨ Ø¬Ù…Ø¹Ù‡Ø§ (ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù Ø¨)
  const collectables = [
    {word: 'Ø¨ÙØ·ÙŠØ®', emoji: 'ğŸ‰'},
    {word: 'Ø¨ÙØ§Ø¨', emoji: 'ğŸšª'},
    {word: 'Ø¨ÙØ·Ø±ÙŠÙ‚', emoji: 'ğŸ§'},
  ];

  // Ø£Ø´ÙŠØ§Ø¡ ÙŠØ¬Ø¨ ØªÙØ§Ø¯ÙŠÙ‡Ø§ (Ø­Ø±ÙˆÙ Ø£Ø®Ø±Ù‰)
  const obstacles = [
    {word: 'ØªÙÙ…Ø³Ø§Ø­', emoji: 'ğŸŠ'},
    {word: 'Ø³ÙÙ…ÙÙƒ', emoji: 'ğŸŸ'},
    {word: 'Ø¬ÙÙ…ÙÙ„', emoji: 'ğŸ«'},
  ];

  // Ø§Ù„Ø£Ø¬Ø³Ø§Ù… Ø§Ù„Ù…ØªØ³Ø§Ù‚Ø·Ø© ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©
  let items = [];

  // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯ (ÙƒÙ„Ù…Ø© Ø£Ùˆ Ø¹Ù‚Ø¨Ø©)
  function createItem() {
    const isCollectable = Math.random() < 0.6; // 60% Ø¬Ù…Ø¹ØŒ 40% Ø¹Ù‚Ø¨Ø©
    const itemData = isCollectable 
      ? collectables[Math.floor(Math.random() * collectables.length)]
      : obstacles[Math.floor(Math.random() * obstacles.length)];
    return {
      x: Math.random() * (canvas.width - 50),
      y: -50,
      width: 50,
      height: 50,
      word: itemData.word,
      emoji: itemData.emoji,
      isCollectable,
      speed: 3 + Math.random() * 2,
    };
  }

  // Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨
  function movePlayer() {
    if (keys['ArrowLeft'] && player.x > 0) {
      player.x -= player.speed;
    }
    if (keys['ArrowRight'] && player.x + player.width < canvas.width) {
      player.x += player.speed;
    }
  }

  // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
  function drawPlayer() {
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);
    ctx.fillStyle = 'white';
    ctx.font = '40px Tajawal, sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(player.letter, player.x + player.width / 2, player.y + player.height / 2);
  }

  // Ø±Ø³Ù… Ø¹Ù†ØµØ± (ÙƒÙ„Ù…Ø© Ø£Ùˆ Ø¹Ù‚Ø¨Ø©)
  function drawItem(item) {
    ctx.font = '30px Arial';
    ctx.fillText(item.emoji, item.x + item.width / 2, item.y + item.height / 1.5);
    ctx.font = '14px Tajawal, sans-serif';
    ctx.fillText(item.word, item.x + item.width / 2, item.y + item.height + 15);
  }

  // ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
  function updateItems() {
    for (let i = items.length - 1; i >= 0; i--) {
      items[i].y += items[i].speed;
      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø©
      if (items[i].y > canvas.height) {
        items.splice(i, 1);
      }
    }
  }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØµØ§Ø¯Ù… Ø¨ÙŠÙ† Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ±
  function checkCollision(rect1, rect2) {
    return !(rect1.x > rect2.x + rect2.width || 
             rect1.x + rect1.width < rect2.x || 
             rect1.y > rect2.y + rect2.height ||
             rect1.y + rect1.height < rect2.y);
  }

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¬Ù…Ø¹ Ø£Ùˆ ØªÙØ§Ø¯ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±
  function handleCollisions() {
    for (let i = items.length - 1; i >= 0; i--) {
      if (checkCollision(player, items[i])) {
        if (items[i].isCollectable) {
          score += 10;
          items.splice(i, 1);
          updateScore();
        } else {
          gameOver = true;
          alert('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
          document.location.reload();
        }
      }
    }
  }

  // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø·
  function updateScore() {
    document.getElementById('scoreBoard').textContent = 'Ø§Ù„Ù†Ù‚Ø§Ø·: ' + score;
  }

  // Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø¹Ø¨Ø©
  function gameLoop() {
    if (gameOver) return;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    movePlayer();
    drawPlayer();

    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
    if (Math.random() < 0.02) {
      items.push(createItem());
    }

    updateItems();
    items.forEach(drawItem);

    handleCollisions();

    requestAnimationFrame(gameLoop);
  }

  // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
  gameLoop();

  // Ø£Ø­Ø¯Ø§Ø« Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
  window.addEventListener('keydown', e => {
    keys[e.key] = true;
  });
  window.addEventListener('keyup', e => {
    keys[e.key] = false;
  });
</script>

</body>
</html>
