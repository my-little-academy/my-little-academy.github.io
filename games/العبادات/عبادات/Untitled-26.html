<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>واحة أركان الإيمان</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for general text -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2); /* Soft teal/blue gradient for oasis */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        .container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h1, h2 {
            color: #00897B; /* Teal Green */
            font-weight: 700;
            margin-bottom: 20px;
        }
        .nav-buttons button {
            background-color: #4DB6AC; /* Light Teal */
            color: #FFFFFF;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            border: 2px solid #00695C; /* Dark Teal */
        }
        .nav-buttons button:hover {
            background-color: #00695C; /* Dark Teal */
            color: #FFFFFF;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        .section {
            display: none;
            padding: 20px 0;
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .section.active {
            display: block;
        }
        .story-text, .pillar-info-text, .quiz-question-text {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 20px;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .quiz-options label {
            display: block;
            background-color: #e0f2f7; /* Light Cyan */
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border: 2px solid #80DEEA; /* Cyan Light */
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            color: #333;
        }
        .quiz-options label:hover {
            background-color: #cceef2;
            border-color: #4DD0E1; /* Cyan */
        }
        .quiz-options input[type="radio"]:checked + label {
            background-color: #4DB6AC; /* Light Teal */
            border-color: #00897B; /* Teal Green */
            color: #333;
            font-weight: 600;
        }
        .quiz-feedback {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }
        .correct {
            color: #28A745; /* Green */
        }
        .incorrect {
            color: #DC3545; /* Red */
        }
        .game-area {
            background-color: #f0fdfd; /* Very Light Teal */
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .game-card {
            background-color: #b2dfdb; /* Teal 100 */
            border: 2px solid #4db6ac; /* Teal 300 */
            border-radius: 15px;
            padding: 20px;
            margin: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #004d40; /* Dark Teal */
            text-align: center;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 500px;
        }
        .game-buttons button {
            background-color: #00897B; /* Teal Green */
            color: #FFFFFF;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            border: none;
        }
        .game-buttons button:hover {
            background-color: #00695C; /* Dark Teal */
            transform: translateY(-2px);
        }
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .popup-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        .popup-overlay.show .popup-content {
            transform: scale(1);
        }
        .popup-content h3 {
            color: #00897B;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        .popup-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 20px;
        }
        .popup-content button {
            background-color: #4DB6AC;
            color: #FFFFFF;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .popup-content button:hover {
            background-color: #00695C;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-4xl">واحة أركان الإيمان</h1>

        <div class="nav-buttons mb-8">
            <button onclick="showSection('intro')">المقدمة</button>
            <button onclick="showSection('story')">القصة المشوقة</button>
            <button onclick="showSection('what-are-pillars')">ما هي أركان الإيمان؟</button>
            <button onclick="showSection('quiz')">اختبر فهمك</button>
            <button onclick="showSection('games')">ألعاب تفاعلية</button>
        </div>

        <!-- Introduction Section -->
        <div id="intro" class="section active">
            <h2 class="text-3xl">مرحباً يا أصدقائي الصغار!</h2>
            <p class="story-text">هل أنتم مستعدون لرحلة إيمانية جديدة وممتعة؟ في هذه الصفحة، سننطلق معًا في مغامرة شيقة لنتعلم كل شيء عن أركان الإيمان الستة، وهي الأسس التي يبنى عليها إيماننا. هيا بنا نبدأ!</p>
            <img src="https://placehold.co/400x200/4DB6AC/000000?text=مرحباً+في+الواحة" alt="مرحباً في الواحة" class="mx-auto image-container">
        </div>

        <!-- Story Section -->
        <div id="story" class="section">
            <h2 class="text-3xl">قصتنا المشوقة: رحلة سامي في واحة الإيمان</h2>
            <p class="story-text">في قلب الصحراء، كانت هناك واحة جميلة تسمى "واحة الإيمان". كان يعيش فيها طفل ذكي ومحب للاستكشاف اسمه "سامي". كان سامي يسمع دائمًا عن أركان الإيمان، ولكن لم يفهم معناها جيدًا.</p>
            <img src="https://placehold.co/400x200/80CBC4/000000?text=سامي+والواحة" alt="سامي والواحة" class="mx-auto image-container">
            <p class="story-text">ذات صباح، بينما كان سامي يتجول في الواحة، التقى بحكيم الواحة العجوز، الذي كان يجلس تحت نخلة باسقة. سأل سامي الحكيم: "يا جدي، ما هي أركان الإيمان؟" ابتسم الحكيم وقال: "أركان الإيمان يا سامي هي ستة أعمدة قوية يقوم عليها إيماننا، وهي تجعل قلبنا مطمئنًا ونفسنا سعيدة."</p>
            <img src="https://placehold.co/400x200/26A69A/000000?text=سامي+والحكيم" alt="سامي والحكيم" class="mx-auto image-container">
            <p class="story-text">بدأ الحكيم يشرح لسامي كل ركن من أركان الإيمان، وكأنه يكشف له كنوزًا مخبأة في الواحة:</p>
            <ul class="list-disc list-inside text-right story-text mx-auto max-w-md">
                <li>**الإيمان بالله:** هو أن نؤمن بأن الله واحد لا شريك له، هو خالق كل شيء، وهو الذي يستحق العبادة وحده.</li>
                <li>**الإيمان بالملائكة:** هم مخلوقات من نور، لا يعصون الله أبدًا، ويقومون بأوامره.</li>
                <li>**الإيمان بالكتب السماوية:** هي الكتب التي أنزلها الله على رسله لهداية الناس، مثل القرآن الكريم والتوراة والإنجيل.</li>
                <li>**الإيمان بالرسل:** هم الأنبياء الذين اختارهم الله لتبليغ رسالته إلى الناس، مثل سيدنا محمد وموسى وعيسى عليهم السلام.</li>
                <li>**الإيمان باليوم الآخر:** هو يوم القيامة، اليوم الذي سنُحاسب فيه على أعمالنا، وندخل الجنة أو النار.</li>
                <li>**الإيمان بالقدر خيره وشره:** هو أن نؤمن بأن كل ما يحدث في الكون هو بتقدير الله وعلمه، سواء كان خيرًا أو شرًا، وأن الله لا يقدر إلا الخير لنا.</li>
            </ul>
            <p class="story-text">شعر سامي بالسعادة والفهم، وأدرك أن هذه الأركان تجعل إيمانه قويًا وثابتًا كالنخل في الواحة.</p>
        </div>

        <!-- What are Pillars Section -->
        <div id="what-are-pillars" class="section">
            <h2 class="text-3xl">ما هي أركان الإيمان؟ أعمدة إيماننا</h2>
            <p class="pillar-info-text">هيا نتعرف على أركان الإيمان الستة بالتفصيل، لنجعل إيماننا قويًا كالجبال:</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
                <div class="bg-teal-100 p-6 rounded-xl shadow-md border-2 border-teal-300">
                    <img src="https://placehold.co/100x100/80CBC4/000000?text=الله" alt="الإيمان بالله" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-teal-800 mb-2">1. الإيمان بالله</h3>
                    <p class="text-gray-700">أن نؤمن بوجود الله ووحدانيته، وأنه الخالق والمدبر لكل شيء.</p>
                </div>
                <div class="bg-blue-100 p-6 rounded-xl shadow-md border-2 border-blue-300">
                    <img src="https://placehold.co/100x100/B2EBF2/000000?text=ملائكة" alt="الإيمان بالملائكة" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">2. الإيمان بالملائكة</h3>
                    <p class="text-gray-700">أن نؤمن بوجود الملائكة، وأنهم عباد مكرمون لا يعصون الله.</p>
                </div>
                <div class="bg-yellow-100 p-6 rounded-xl shadow-md border-2 border-yellow-300">
                    <img src="https://placehold.co/100x100/FFECB3/000000?text=كتب" alt="الإيمان بالكتب" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-yellow-800 mb-2">3. الإيمان بالكتب السماوية</h3>
                    <p class="text-gray-700">أن نؤمن بأن الله أنزل كتبًا على رسله لهداية الناس، مثل القرآن.</p>
                </div>
                <div class="bg-green-100 p-6 rounded-xl shadow-md border-2 border-green-300">
                    <img src="https://placehold.co/100x100/C8E6C9/000000?text=رسل" alt="الإيمان بالرسل" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-green-800 mb-2">4. الإيمان بالرسل</h3>
                    <p class="text-gray-700">أن نؤمن بأن الله أرسل رسلاً وأنبياء لتبليغ رسالته إلى البشر.</p>
                </div>
                <div class="bg-orange-100 p-6 rounded-xl shadow-md border-2 border-orange-300">
                    <img src="https://placehold.co/100x100/FFE0B2/000000?text=يوم+الآخر" alt="الإيمان باليوم الآخر" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-orange-800 mb-2">5. الإيمان باليوم الآخر</h3>
                    <p class="text-gray-700">أن نؤمن بيوم القيامة، والبعث، والحساب، والجنة والنار.</p>
                </div>
                <div class="bg-purple-100 p-6 rounded-xl shadow-md border-2 border-purple-300">
                    <img src="https://placehold.co/100x100/E1BEE7/000000?text=قدر" alt="الإيمان بالقدر" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-purple-800 mb-2">6. الإيمان بالقدر خيره وشره</h3>
                    <p class="text-gray-700">أن نؤمن بأن كل ما يحدث في الكون هو بتقدير الله وعلمه.</p>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <h2 class="text-3xl">اختبر فهمك: هل أنت بطل الإيمان؟</h2>
            <p class="quiz-question-text">الآن بعد أن استمعنا لقصة سامي الممتعة وتعرفنا على أركان الإيمان، حان وقت اختبار معلوماتك! أجب عن الأسئلة التالية لتثبت أنك أصبحت بطلًا في فهم أركان الإيمان:</p>
            <div id="quiz-question-container" class="mt-6">
                <!-- Quiz question will be loaded here by JS -->
            </div>
            <div class="quiz-feedback" id="quiz-feedback"></div>
            <button id="next-question-btn" class="mt-6 bg-green-500 hover:bg-green-600 text-white py-3 px-6 rounded-full font-bold shadow-lg transition-all" onclick="nextQuestion()">السؤال التالي</button>
            <button id="restart-quiz-btn" class="mt-6 bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 rounded-full font-bold shadow-lg transition-all hidden" onclick="resetQuiz()">إعادة الاختبار</button>
        </div>

        <!-- Games Section -->
        <div id="games" class="section">
            <h2 class="text-3xl">ألعاب تفاعلية: لنثبت ما تعلمناه!</h2>
            <p class="story-text">بعد أن اختبرت معلوماتك بنجاح، حان وقت المرح! هيا بنا نلعب لعبة "صل بين الركن ومعناه" لتثبيت معلوماتنا:</p>

            <div class="game-area">
                <h3 class="text-2xl font-bold text-teal-700 mb-4">لعبة "صل بين الركن ومعناه"</h3>
                <p class="text-gray-600 mb-6">اضغط على الركن ثم على معناه الصحيح.</p>
                <div id="game-items-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <!-- Game items will be loaded here by JS -->
                </div>
                <div class="game-feedback mt-4 text-lg font-semibold" id="game-game-feedback"></div>
                <div class="game-buttons mt-6">
                    <button onclick="resetGame()">إعادة اللعب</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Modal/Popup for alerts -->
    <div id="custom-popup-overlay" class="popup-overlay">
        <div class="popup-content">
            <h3 id="popup-title"></h3>
            <p id="popup-message"></p>
            <button onclick="closePopup()">حسناً</button>
        </div>
    </div>

    <script>
        // Function to show custom popup

        function showPopup(title, message) {
            document.getElementById('popup-title').innerText = title;
            document.getElementById('popup-message').innerText = message;
            document.getElementById('custom-popup-overlay').classList.add('show');
        }

        // Function to close custom popup
        function closePopup() {
            document.getElementById('custom-popup-overlay').classList.remove('show');
        }

        // --- Section Management ---
        let currentSection = 'intro';

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            // Show the requested section
            document.getElementById(sectionId).classList.add('active');
            currentSection = sectionId;

            // Specific actions for sections
            if (sectionId === 'quiz') {
                resetQuiz(); // Ensure quiz is reset when navigated to
            } else if (sectionId === 'games') {
                resetGame(); // Ensure game is reset and initialized when navigated to
            }
        }

        // --- Quiz Logic ---
        const quizQuestions = [
            {
                question: "كم عدد أركان الإيمان؟",
                options: ["خمسة", "ستة", "سبعة"],
                answer: "ستة"
            },
            {
                question: "ماذا يعني الإيمان بالله؟",
                options: ["أن نؤمن بوجوده فقط", "أن نؤمن بوجوده ووحدانيته وأنه الخالق", "أن نصلي له فقط"],
                answer: "أن نؤمن بوجوده ووحدانيته وأنه الخالق"
            },
            {
                question: "من هم الملائكة؟",
                options: ["بشر صالحون", "مخلوقات من نور لا تعصي الله", "أرواح الأنبياء"],
                answer: "مخلوقات من نور لا تعصي الله"
            },
            {
                question: "ما هو اليوم الآخر؟",
                options: ["يوم الجمعة", "يوم العيد", "يوم القيامة والحساب"],
                answer: "يوم القيامة والحساب"
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;

        function displayQuestion() {
            const container = document.getElementById('quiz-question-container');
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question-btn');
            const restartBtn = document.getElementById('restart-quiz-btn');

            feedback.innerText = ''; // Clear previous feedback
            nextBtn.innerText = 'تحقق من الإجابة'; // Change button text

            if (currentQuestionIndex < quizQuestions.length) {
                const q = quizQuestions[currentQuestionIndex];
                let html = `<p class="text-xl font-bold mb-4">${currentQuestionIndex + 1}. ${q.question}</p>`;
                html += `<div class="quiz-options text-right">`;
                q.options.forEach((option, index) => {
                    html += `
                        <div>
                            <input type="radio" id="option${index}" name="quiz-option" value="${option}" class="hidden">
                            <label for="option${index}">${option}</label>
                        </div>
                    `;
                });
                html += `</div>`;
                container.innerHTML = html;
                nextBtn.classList.remove('hidden');
                restartBtn.classList.add('hidden');
            } else {
                // Quiz finished
                container.innerHTML = `<p class="text-2xl font-bold text-green-700">لقد أكملت الاختبار!</p><p class="text-xl mt-2">نقاطك: ${score} من ${quizQuestions.length}</p>`;
                if (score === quizQuestions.length) {
                    feedback.innerHTML = `<p class="correct text-2xl mt-4">أحسنت! أنت بطل الإيمان!</p>`;
                } else {
                    feedback.innerHTML = `<p class="incorrect text-2xl mt-4">حاول مرة أخرى لتصبح بطلًا!</p>`;
                }
                nextBtn.classList.add('hidden');
                restartBtn.classList.remove('hidden');
            }
        }

        function nextQuestion() {
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question-btn');

            if (!selectedOption && currentQuestionIndex < quizQuestions.length) {
                showPopup("تنبيه", "الرجاء اختيار إجابة قبل المتابعة.");
                return;
            }

            if (nextBtn.innerText === 'تحقق من الإجابة') {
                // Check answer phase
                const correctAnswer = quizQuestions[currentQuestionIndex].answer;
                if (selectedOption.value === correctAnswer) {
                    feedback.innerHTML = `<p class="correct"><i class="fas fa-check-circle"></i> إجابة صحيحة! أحسنت.</p>`;
                    score++;
                } else {
                    feedback.innerHTML = `<p class="incorrect"><i class="fas fa-times-circle"></i> إجابة خاطئة. الإجابة الصحيحة هي: ${correctAnswer}.</p>`;
                }
                nextBtn.innerText = 'السؤال التالي'; // Change button text for next question
            } else {
                // Move to next question phase
                currentQuestionIndex++;
                displayQuestion();
            }
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            displayQuestion();
            document.getElementById('restart-quiz-btn').classList.add('hidden');
            document.getElementById('next-question-btn').classList.remove('hidden');
            document.getElementById('next-question-btn').innerText = 'تحقق من الإجابة';
        }

        // --- Game Logic: "صل بين الركن ومعناه" (Match the Pillar with its Meaning) ---
        const gamePairs = [
            { id: 'allah', type: 'pillar', text: 'الإيمان بالله', meaning: 'أن نؤمن بوجود الله ووحدانيته' },
            { id: 'angels', type: 'pillar', text: 'الإيمان بالملائكة', meaning: 'أنهم مخلوقات من نور لا يعصون الله' },
            { id: 'books', type: 'pillar', text: 'الإيمان بالكتب السماوية', meaning: 'أن الله أنزل كتبًا على رسله لهداية الناس' },
            { id: 'prophets', type: 'pillar', text: 'الإيمان بالرسل', meaning: 'أن الله أرسل أنبياء لتبليغ رسالته' },
            { id: 'hereafter', type: 'pillar', text: 'الإيمان باليوم الآخر', meaning: 'يوم القيامة والحساب والجنة والنار' },
            { id: 'qadar', type: 'pillar', text: 'الإيمان بالقدر', meaning: 'أن كل ما يحدث في الكون بتقدير الله' }
        ];

        let currentSelections = []; // Stores { id: 'pillar_id', element: DOM_element }
        let matchedPairs = 0;

        function initializeGame() {
            const gameItemsContainer = document.getElementById('game-items-container');
            gameItemsContainer.innerHTML = '';
            currentSelections = [];
            matchedPairs = 0;
            document.getElementById('game-game-feedback').innerText = '';

            // Create two sets of cards: pillars and meanings, then shuffle them
            const pillars = gamePairs.map(p => ({ id: p.id, type: 'pillar', display: p.text }));
            const meanings = gamePairs.map(p => ({ id: p.id, type: 'meaning', display: p.meaning }));

            const allCards = [...pillars, ...meanings].sort(() => Math.random() - 0.5);

            allCards.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.classList.add('game-card', 'cursor-pointer', 'transition', 'duration-200', 'ease-in-out', 'hover:scale-105', 'hover:shadow-lg');
                cardDiv.dataset.id = card.id;
                cardDiv.dataset.type = card.type;
                cardDiv.innerText = card.display;
                cardDiv.onclick = () => selectGameCard(cardDiv);
                gameItemsContainer.appendChild(cardDiv);
            });
        }

        function selectGameCard(cardElement) {
            if (cardElement.classList.contains('matched')) {
                return; // Already matched
            }

            cardElement.classList.add('selected', 'border-blue-500', 'bg-blue-50'); // Highlight selected

            currentSelections.push({
                id: cardElement.dataset.id,
                type: cardElement.dataset.type,
                element: cardElement
            });

            if (currentSelections.length === 2) {
                checkMatch();
            }
        }

        function checkMatch() {
            const [card1, card2] = currentSelections;
            const feedback = document.getElementById('game-game-feedback');

            if (card1.id === card2.id && card1.type !== card2.type) {
                // It's a match!
                card1.element.classList.add('matched', 'bg-green-200', 'border-green-500', 'pointer-events-none');
                card2.element.classList.add('matched', 'bg-green-200', 'border-green-500', 'pointer-events-none');
                feedback.innerHTML = `<p class="correct"><i class="fas fa-check-circle"></i> أحسنت! تطابق صحيح.</p>`;
                showPopup("أحسنت!", "لقد وجدت تطابقًا صحيحًا!");
                matchedPairs++;
            } else {
                // Not a match
                feedback.innerHTML = `<p class="incorrect"><i class="fas fa-times-circle"></i> لا، هذا ليس تطابقًا. حاول مرة أخرى.</p>`;
                showPopup("حاول مرة أخرى", "هذا ليس تطابقًا صحيحًا.");
            }

            // Clear selections and remove highlight after a short delay
            setTimeout(() => {
                card1.element.classList.remove('selected', 'border-blue-500', 'bg-blue-50');
                card2.element.classList.remove('selected', 'border-blue-500', 'bg-blue-50');
                currentSelections = [];
                if (matchedPairs === gamePairs.length) {
                    feedback.innerHTML = `<p class="correct text-xl mt-4">رائع! لقد أكملت اللعبة بنجاح!</p>`;
                    showPopup("تهانينا!", "لقد أكملت لعبة 'صل بين الركن ومعناه' بنجاح! أنت بطل الإيمان!");
                }
            }, 800); // Short delay to see feedback
        }

        function resetGame() {
            initializeGame();
        }

        // Initialize the quiz and game when the page loads
        window.onload = function() {
            showSection('intro'); // Start with the introduction section
            displayQuestion(); // Initialize the first quiz question
            initializeGame(); // Initialize the game
        };
    </script>
</body>
</html>
