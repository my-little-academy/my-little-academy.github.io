<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ركن الإيمان بالملائكة</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for general text -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb); /* Light blue gradient for celestial feel */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        .container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h1, h2 {
            color: #2196F3; /* Blue */
            font-weight: 700;
            margin-bottom: 20px;
        }
        .nav-buttons button {
            background-color: #90CAF9; /* Light Blue */
            color: #FFFFFF;
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            border: 2px solid #2196F3; /* Blue */
        }
        .nav-buttons button:hover {
            background-color: #2196F3; /* Blue */
            color: #FFFFFF;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        .section {
            display: none;
            padding: 20px 0;
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .section.active {
            display: block;
        }
        .story-text, .pillar-info-text, .quiz-question-text {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 20px;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .quiz-options label {
            display: block;
            background-color: #e0f7fa; /* Light Cyan */
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border: 2px solid #B2EBF2; /* Light Blue */
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            color: #333;
        }
        .quiz-options label:hover {
            background-color: #cceef2;
            border-color: #81D4FA; /* Light Blue Accent */
        }
        .quiz-options input[type="radio"]:checked + label {
            background-color: #90CAF9; /* Light Blue */
            border-color: #2196F3; /* Blue */
            color: #333;
            font-weight: 600;
        }
        .quiz-feedback {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }
        .correct {
            color: #28A745; /* Green */
        }
        .incorrect {
            color: #DC3545; /* Red */
        }
        .game-area {
            background-color: #e3f2fd; /* Lightest Blue */
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .game-card {
            background-color: #bbdefb; /* Lighter Blue */
            border: 2px solid #64B5F6; /* Blue */
            border-radius: 15px;
            padding: 20px;
            margin: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            text-align: center;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 500px;
        }
        .game-buttons button {
            background-color: #2196F3; /* Blue */
            color: #FFFFFF;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            border: none;
        }
        .game-buttons button:hover {
            background-color: #1976D2; /* Darker Blue */
            transform: translateY(-2px);
        }
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .popup-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        .popup-overlay.show .popup-content {
            transform: scale(1);
        }
        .popup-content h3 {
            color: #2196F3;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        .popup-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 20px;
        }
        .popup-content button {
            background-color: #90CAF9;
            color: #FFFFFF;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .popup-content button:hover {
            background-color: #2196F3;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-4xl">ركن الإيمان بالملائكة</h1>

        <div class="nav-buttons mb-8">
            <button onclick="showSection('intro')">المقدمة</button>
            <button onclick="showSection('story')">القصة المشوقة</button>
            <button onclick="showSection('what-are-angels')">من هم الملائكة؟</button>
            <button onclick="showSection('quiz')">اختبر فهمك</button>
            <button onclick="showSection('games')">ألعاب تفاعلية</button>
        </div>

        <!-- Introduction Section -->
        <div id="intro" class="section active">
            <h2 class="text-3xl">مرحباً يا أصدقائي الصغار!</h2>
            <p class="story-text">أهلاً بكم في رحلتنا الثانية في واحة أركان الإيمان! اليوم، سنتعلم عن الركن الثاني: **الإيمان بالملائكة**. هيا بنا نتعرف على هذه المخلوقات النورانية العظيمة!</p>
            <img src="https://placehold.co/400x200/90CAF9/000000?text=الإيمان+بالملائكة" alt="" class="mx-auto image-container">
        </div>

        <!-- Story Section -->
        <div id="story" class="section">
            <h2 class="text-3xl">قصتنا المشوقة: مغامرة ليلى مع الملائكة</h2>
            <p class="story-text">في مدينة تعج بالحياة، كانت هناك طفلة هادئة ومفكرة اسمها "ليلى". كانت ليلى تحب أن تستمع إلى القصص عن عالم الغيب، وكيف أن الله تعالى خلق مخلوقات عظيمة لا نراها.</p>
            <img src="https://placehold.co/400x200/BBDEFB/000000?text=ليلى+تستمع+للقصص" alt="" class="mx-auto image-container">
            <p class="story-text">سألت ليلى معلمتها في المسجد ذات يوم: "يا معلمتي، هل هناك مخلوقات أخرى غير البشر والحيوانات؟" ابتسمت المعلمة وقالت: "نعم يا ليلى، لقد خلق الله تعالى مخلوقات عظيمة من نور اسمها **الملائكة**."</p>
            <img src="https://placehold.co/400x200/E3F2FD/000000?text=ليلى+ومعلمتها" alt="" class="mx-auto image-container">
            <p class="story-text">بدأت المعلمة تشرح لليلى عن الملائكة، وكيف أنهم:</p>
            <ul class="list-disc list-inside text-right story-text mx-auto max-w-md">
                <li>**مخلوقون من نور:** ليسوا من طين مثلنا، ولا من نار مثل الجن.</li>
                <li>**لا يأكلون ولا يشربون ولا ينامون:** لا يحتاجون لما نحتاجه نحن البشر.</li>
                <li>**لا يعصون الله أبدًا:** يطيعون الله في كل ما يأمرهم به، ولا يتعبون من العبادة.</li>
                <li>**لهم وظائف كثيرة:** منهم جبريل عليه السلام الذي ينزل بالوحي، وميكائيل الموكل بالمطر، وإسرافيل الموكل بالنفخ في الصور، وملك الموت، وملائكة يكتبون أعمالنا، وملائكة يحفظوننا بإذن الله.</li>
            </ul>
            <p class="story-text">شعر قلب ليلى بالتعجب والخشوع، وأدركت أن عالم الله واسع وعظيم، وأن الملائكة هم جند الله الذين يطيعونه دائمًا.</p>
        </div>

        <!-- What are Angels Section -->
        <div id="what-are-angels" class="section">
            <h2 class="text-3xl">من هم الملائكة؟ مخلوقات الله النورانية</h2>
            <p class="pillar-info-text">هيا نتعرف على الملائكة بشكل أعمق، لنزداد إيمانًا بعالم الغيب:</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
                <div class="bg-blue-100 p-6 rounded-xl shadow-md border-2 border-blue-300">
                    <img src="https://placehold.co/100x100/ADD8E6/000000?text=مخلوقون+من+نور" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">1. مخلوقات من نور</h3>
                    <p class="text-gray-700">الملائكة مخلوقات عظيمة خلقها الله من نور، ولا يمكننا رؤيتهم بأعيننا العادية.</p>
                </div>
                <div class="bg-yellow-100 p-6 rounded-xl shadow-md border-2 border-yellow-300">
                    <img src="https://placehold.co/100x100/FFD700/000000?text=لا+يعصون+الله" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-yellow-800 mb-2">2. طاعة تامة لله</h3>
                    <p class="text-gray-700">الملائكة لا يعصون الله أبدًا، وينفذون كل أوامره بدقة تامة، ولا يتعبون من العبادة.</p>
                </div>
                <div class="bg-purple-100 p-6 rounded-xl shadow-md border-2 border-purple-300">
                    <img src="https://placehold.co/100x100/E6E6FA/000000?text=وظائف+متعددة" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-purple-800 mb-2">3. وظائف متعددة</h3>
                    <ul class="list-disc list-inside text-right text-gray-700">
                        <li>جبريل: موكل بالوحي.</li>
                        <li>ميكائيل: موكل بالمطر والنبات.</li>
                        <li>إسرافيل: موكل بالنفخ في الصور.</li>
                        <li>ملائكة تكتب الأعمال (الكرام الكاتبون).</li>
                        <li>ملائكة تحفظ الإنسان.</li>
                    </ul>
                </div>
                <div class="bg-green-100 p-6 rounded-xl shadow-md border-2 border-green-300">
                    <img src="https://placehold.co/100x100/90EE90/000000?text=عدد+كبير" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-green-800 mb-2">4. عددهم كثير جدًا</h3>
                    <p class="text-gray-700">لا يعلم عددهم إلا الله تعالى، فهم كثيرون جدًا ويملأون السماوات والأرض.</p>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <h2 class="text-3xl">اختبر فهمك: هل أنت بطل الإيمان بالملائكة؟</h2>
            <p class="quiz-question-text">الآن بعد أن استمعنا لقصة ليلى الممتعة وتعرفنا على الملائكة، حان وقت اختبار معلوماتك! أجب عن الأسئلة التالية لتثبت أنك أصبحت بطلًا في فهم الإيمان بالملائكة:</p>
            <div id="quiz-question-container" class="mt-6">
                <!-- Quiz question will be loaded here by JS -->
            </div>
            <div class="quiz-feedback" id="quiz-feedback"></div>
            <button id="next-question-btn" class="mt-6 bg-green-500 hover:bg-green-600 text-white py-3 px-6 rounded-full font-bold shadow-lg transition-all" onclick="nextQuestion()">السؤال التالي</button>
            <button id="restart-quiz-btn" class="mt-6 bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 rounded-full font-bold shadow-lg transition-all hidden" onclick="resetQuiz()">إعادة الاختبار</button>
        </div>

        <!-- Games Section -->
        <div id="games" class="section">
            <h2 class="text-3xl">ألعاب تفاعلية: لنثبت ما تعلمناه!</h2>
            <p class="story-text">بعد أن اختبرت معلوماتك بنجاح، حان وقت المرح! هيا بنا نلعب لعبة "مهمة الملائكة" لتثبيت معلوماتنا:</p>

            <div class="game-area">
                <h3 class="text-2xl font-bold text-blue-700 mb-4">لعبة "مهمة الملائكة": اختر المهمة الصحيحة!</h3>
                <p class="text-gray-600 mb-6">اقرأ اسم المَلَك واختر مهمته الصحيحة.</p>
                <div id="game-question-display" class="game-card">
                    <!-- Game question (angel name) will be loaded here by JS -->
                </div>
                <div id="game-options-display" class="flex flex-wrap justify-center gap-4 mt-4">
                    <!-- Game options (tasks) will be loaded here by JS -->
                </div>
                <div class="game-feedback mt-4 text-lg font-semibold" id="game-game-feedback"></div>
                <button class="mt-4 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-full font-bold shadow-lg transition-all" onclick="nextGameItem()">التالي</button>
                <button class="mt-4 bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-full font-bold shadow-lg transition-all" onclick="resetGame()">إعادة اللعب</button>
            </div>
        </div>
    </div>

    <!-- Custom Modal/Popup for alerts -->
    <div id="custom-popup-overlay" class="popup-overlay">
        <div class="popup-content">
            <h3 id="popup-title"></h3>
            <p id="popup-message"></p>
            <button onclick="closePopup()">حسناً</button>
        </div>
    </div>

    <script>
        // Function to show custom popup
        function showPopup(title, message) {
            document.getElementById('popup-title').innerText = title;
            document.getElementById('popup-message').innerText = message;
            document.getElementById('custom-popup-overlay').classList.add('show');
        }

        // Function to close custom popup
        function closePopup() {
            document.getElementById('custom-popup-overlay').classList.remove('show');
        }

        // --- Section Management ---
        let currentSection = 'intro';

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            // Show the requested section
            document.getElementById(sectionId).classList.add('active');
            currentSection = sectionId;

            // Specific actions for sections
            if (sectionId === 'quiz') {
                resetQuiz(); // Ensure quiz is reset when navigated to
            } else if (sectionId === 'games') {
                resetGame(); // Ensure game is reset and initialized when navigated to
            }
        }

        // --- Quiz Logic ---
        const quizQuestions = [
            {
                question: "من أي شيء خُلقت الملائكة؟",
                options: ["من طين", "من نار", "من نور"],
                answer: "من نور"
            },
            {
                question: "هل الملائكة يعصون الله؟",
                options: ["نعم", "لا", "أحياناً"],
                answer: "لا"
            },
            {
                question: "ما اسم المَلَك الموكل بالوحي؟",
                options: ["ميكائيل", "جبريل", "إسرافيل"],
                answer: "جبريل"
            },
            {
                question: "هل الملائكة يأكلون ويشربون؟",
                options: ["نعم", "لا", "فقط يشربون"],
                answer: "لا"
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;

        function displayQuestion() {
            const container = document.getElementById('quiz-question-container');
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question-btn');
            const restartBtn = document.getElementById('restart-quiz-btn');

            feedback.innerText = ''; // Clear previous feedback
            nextBtn.innerText = 'تحقق من الإجابة'; // Change button text

            if (currentQuestionIndex < quizQuestions.length) {
                const q = quizQuestions[currentQuestionIndex];
                let html = `<p class="text-xl font-bold mb-4">${currentQuestionIndex + 1}. ${q.question}</p>`;
                html += `<div class="quiz-options text-right">`;
                q.options.forEach((option, index) => {
                    html += `
                        <div>
                            <input type="radio" id="option${index}" name="quiz-option" value="${option}" class="hidden">
                            <label for="option${index}">${option}</label>
                        </div>
                    `;
                });
                html += `</div>`;
                container.innerHTML = html;
                nextBtn.classList.remove('hidden');
                restartBtn.classList.add('hidden');
            } else {
                // Quiz finished
                container.innerHTML = `<p class="text-2xl font-bold text-green-700">لقد أكملت الاختبار!</p><p class="text-xl mt-2">نقاطك: ${score} من ${quizQuestions.length}</p>`;
                if (score === quizQuestions.length) {
                    feedback.innerHTML = `<p class="correct text-2xl mt-4">أحسنت! أنت بطل الإيمان بالملائكة!</p>`;
                } else {
                    feedback.innerHTML = `<p class="incorrect text-2xl mt-4">حاول مرة أخرى لتصبح بطلًا!</p>`;
                }
                nextBtn.classList.add('hidden');
                restartBtn.classList.remove('hidden');
            }
        }

        function nextQuestion() {
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question-btn');

            if (!selectedOption && currentQuestionIndex < quizQuestions.length) {
                showPopup("تنبيه", "الرجاء اختيار إجابة قبل المتابعة.");
                return;
            }

            if (nextBtn.innerText === 'تحقق من الإجابة') {
                // Check answer phase
                const correctAnswer = quizQuestions[currentQuestionIndex].answer;
                if (selectedOption.value === correctAnswer) {
                    feedback.innerHTML = `<p class="correct"><i class="fas fa-check-circle"></i> إجابة صحيحة! أحسنت.</p>`;
                    score++;
                } else {
                    feedback.innerHTML = `<p class="incorrect"><i class="fas fa-times-circle"></i> إجابة خاطئة. الإجابة الصحيحة هي: ${correctAnswer}.</p>`;
                }
                nextBtn.innerText = 'السؤال التالي'; // Change button text for next question
            } else {
                // Move to next question phase
                currentQuestionIndex++;
                displayQuestion();
            }
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            displayQuestion();
            document.getElementById('restart-quiz-btn').classList.add('hidden');
            document.getElementById('next-question-btn').classList.remove('hidden');
            document.getElementById('next-question-btn').innerText = 'تحقق من الإجابة';
        }

        // --- Game Logic: "مهمة الملائكة" (Angel's Mission) ---
        const gameMissions = [
            { angel: "جبريل عليه السلام", correctMission: "موكل بالوحي", options: ["موكل بالمطر", "موكل بالوحي", "موكل بالنفخ في الصور"] },
            { angel: "ميكائيل عليه السلام", correctMission: "موكل بالمطر والنبات", options: ["موكل بالوحي", "موكل بالمطر والنبات", "موكل بكتابة الأعمال"] },
            { angel: "إسرافيل عليه السلام", correctMission: "موكل بالنفخ في الصور", options: ["موكل بالنفخ في الصور", "موكل بحفظ الإنسان", "موكل بالرزق"] },
            { angel: "ملائكة الكرام الكاتبون", correctMission: "يكتبون أعمال البشر", options: ["ينزلون المطر", "يكتبون أعمال البشر", "يحرسون الجنة"] },
            { angel: "ملك الموت", correctMission: "يقبض الأرواح", options: ["يقبض الأرواح", "يحمل العرش", "يسبح لله فقط"] }
        ];

        let shuffledGameMissions = [];
        let currentGameMissionIndex = 0;

        function initializeGame() {
            shuffledGameMissions = [...gameMissions].sort(() => Math.random() - 0.5);
            currentGameMissionIndex = 0;
            displayGameMission();
            document.getElementById('game-game-feedback').innerText = '';
        }

        function displayGameMission() {
            const questionDisplay = document.getElementById('game-question-display');
            const optionsDisplay = document.getElementById('game-options-display');

            optionsDisplay.innerHTML = ''; // Clear previous options

            if (currentGameMissionIndex < shuffledGameMissions.length) {
                const mission = shuffledGameMissions[currentGameMissionIndex];
                questionDisplay.innerHTML = `<p>ما هي مهمة المَلَك: <strong>${mission.angel}</strong>؟</p>`;

                // Shuffle options for each question
                const shuffledOptions = [...mission.options].sort(() => Math.random() - 0.5);

                shuffledOptions.forEach(option => {
                    const optionButton = document.createElement('button');
                    optionButton.classList.add('bg-blue-200', 'hover:bg-blue-300', 'text-blue-800', 'py-2', 'px-4', 'rounded-full', 'font-semibold', 'shadow-md', 'transition-all', 'transform', 'hover:scale-105', 'active:scale-95');
                    optionButton.innerText = option;
                    optionButton.onclick = () => checkGameAnswer(option, mission.correctMission);
                    optionsDisplay.appendChild(optionButton);
                });
            } else {
                questionDisplay.innerHTML = `<p class="text-xl font-bold text-green-700">لقد أكملت اللعبة!</p><p class="text-lg mt-2">أحسنت يا بطل الإيمان بالملائكة!</p>`;
                optionsDisplay.innerHTML = ''; // Clear options
                showPopup("تهانينا!", "لقد أكملت لعبة 'مهمة الملائكة' بنجاح!");
            }
        }

        function checkGameAnswer(userAnswer, correctAnswer) {
            const feedback = document.getElementById('game-game-feedback');
            if (userAnswer === correctAnswer) {
                feedback.innerHTML = `<p class="correct"><i class="fas fa-check-circle"></i> إجابة صحيحة! أحسنت.</p>`;
                showPopup("أحسنت!", "إجابتك صحيحة!");
            } else {
                feedback.innerHTML = `<p class="incorrect"><i class="fas fa-times-circle"></i> إجابة خاطئة. الإجابة الصحيحة هي: ${correctAnswer}.</p>`;
                showPopup("حاول مرة أخرى", `إجابتك خاطئة. الإجابة الصحيحة هي: ${correctAnswer}.`);
            }
        }

        function nextGameItem() {
            currentGameMissionIndex++;
            displayGameMission();
            document.getElementById('game-game-feedback').innerText = '';
        }

        function resetGame() {
            initializeGame();
        }

        // Initialize the quiz and game when the page loads
        window.onload = function() {
            showSection('intro'); // Start with the introduction section
            displayQuestion(); // Initialize the first quiz question
            initializeGame(); // Initialize the game
        };
    </script>
</body>
</html>
