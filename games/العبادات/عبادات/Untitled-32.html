<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ركن الإيمان بالقدر خيره وشره</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for general text -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #fdf6e3, #fae8d4); /* Earthy, warm tones for comfort and wisdom */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }
        .container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h1, h2 {
            color: #D4AC0D; /* Goldenrod */
            font-weight: 700;
            margin-bottom: 20px;
        }
        .nav-buttons button {
            background-color: #F7DC6F; /* Light Gold */
            color: #8B4513; /* Brown */
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            border: 2px solid #D4AC0D; /* Goldenrod */
        }
        .nav-buttons button:hover {
            background-color: #D4AC0D; /* Goldenrod */
            color: #FFFFFF;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        .section {
            display: none;
            padding: 20px 0;
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .section.active {
            display: block;
        }
        .story-text, .pillar-info-text, .quiz-question-text {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 20px;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .quiz-options label {
            display: block;
            background-color: #fff8e1; /* Lightest Yellow */
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border: 2px solid #F7DC6F; /* Light Gold */
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.1rem;
            color: #333;
        }
        .quiz-options label:hover {
            background-color: #fcf5d2;
            border-color: #D4AC0D; /* Goldenrod */
        }
        .quiz-options input[type="radio"]:checked + label {
            background-color: #D4AC0D; /* Goldenrod */
            border-color: #B8860B; /* Dark Goldenrod */
            color: #333;
            font-weight: 600;
        }
        .quiz-feedback {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }
        .correct {
            color: #28A745; /* Green */
        }
        .incorrect {
            color: #DC3545; /* Red */
        }
        .game-area {
            background-color: #faebd7; /* Antique White */
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .game-card {
            background-color: #ffe0b2; /* Light Orange */
            border: 2px solid #ffcc80; /* Light Orange */
            border-radius: 15px;
            padding: 20px;
            margin: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #8B4513; /* Brown */
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 500px;
        }
        .game-buttons button {
            background-color: #D4AC0D; /* Goldenrod */
            color: #FFFFFF;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 10px;
            border: none;
        }
        .game-buttons button:hover {
            background-color: #B8860B; /* Dark Goldenrod */
            transform: translateY(-2px);
        }
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .popup-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        .popup-overlay.show .popup-content {
            transform: scale(1);
        }
        .popup-content h3 {
            color: #D4AC0D;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        .popup-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 20px;
        }
        .popup-content button {
            background-color: #F7DC6F;
            color: #8B4513;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .popup-content button:hover {
            background-color: #D4AC0D;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-4xl">ركن الإيمان بالقدر خيره وشره</h1>

        <div class="nav-buttons mb-8">
            <button onclick="showSection('intro')">المقدمة</button>
            <button onclick="showSection('story')">القصة المشوقة</button>
            <button onclick="showSection('what-is-qadar')">ما هو القدر؟</button>
            <button onclick="showSection('quiz')">اختبر فهمك</button>
            <button onclick="showSection('games')">ألعاب تفاعلية</button>
        </div>

        <!-- Introduction Section -->
        <div id="intro" class="section active">
            <h2 class="text-3xl">مرحباً يا أصدقائي الصغار!</h2>
            <p class="story-text">أهلاً بكم في رحلتنا الأخيرة في واحة أركان الإيمان! اليوم، سنتعلم عن الركن السادس: **الإيمان بالقدر خيره وشره**. هيا بنا نتعرف على هذا الركن الذي يعلمنا الثقة بالله في كل أحوالنا!</p>
            <img src="https://placehold.co/400x200/F7DC6F/000000?text=الإيمان+بالقدر" alt="" class="mx-auto image-container">
        </div>

        <!-- Story Section -->
        <div id="story" class="section">
            <h2 class="text-3xl">قصتنا المشوقة: مغامرة سليم وثقة القدر</h2>
            <p class="story-text">في حديقة واسعة، كان هناك طفل ذكي ومحب للاكتشاف اسمه "سليم". كان سليم يحب اللعب، لكنه أحيانًا يشعر بالحزن إذا لم يفز في لعبة، أو إذا سقط وأصيب بجرح صغير.</p>
            <img src="https://placehold.co/400x200/FFFACD/000000?text=سليم+يلعب" alt="" class="mx-auto image-container">
            <p class="story-text">سأل سليم أباه ذات يوم: "يا أبي، لماذا تحدث لي أشياء جيدة وأشياء أخرى لا أحبها؟" ابتسم الأب وقال: "يا بني، كل ما يحدث لنا في الحياة، سواء كان خيرًا أو شرًا، هو بتقدير من الله تعالى. وهذا ما نسميه **القدر**."</p>
            <img src="https://placehold.co/400x200/FAE8D4/000000?text=سليم+وأبيه" alt="" class="mx-auto image-container">
            <p class="story-text">بدأ الأب يشرح لسليم عن القدر، وكيف أنه:</p>
            <ul class="list-disc list-inside text-right story-text mx-auto max-w-md">
                <li>**علم الله:** الله تعالى يعلم كل شيء سيحدث قبل أن يحدث.</li>
                <li>**كتابة الله:** الله كتب كل شيء في اللوح المحفوظ قبل أن يخلق السماوات والأرض.</li>
                <li>**مشيئة الله:** لا يحدث شيء في الكون إلا بمشيئة الله تعالى.</li>
                <li>**خلق الله:** الله هو خالق كل شيء، بما في ذلك أفعالنا.</li>
            </ul>
            <p class="story-text">قال الأب: "الإيمان بالقدر يا سليم يعلمنا أن نثق بالله دائمًا، وأن الخير والشر كله من عنده. إذا حدث لنا خير، نشكر الله، وإذا حدث لنا شيء لا نحبه، نصبر ونحتسب الأجر عند الله، ونعلم أن الله اختار لنا الأفضل، حتى لو لم نفهم ذلك حينها."</p>
            <p class="story-text">شعر سليم بالراحة والطمأنينة، وأدرك أن الله يحبه ويريد له الخير دائمًا، وأن عليه أن يبذل جهده ويثق بالله في كل أموره.</p>
        </div>

        <!-- What is Qadar Section -->
        <div id="what-is-qadar" class="section">
            <h2 class="text-3xl">ما هو القدر؟ تقدير الله وحكمته</h2>
            <p class="pillar-info-text">هيا نتعرف على القدر بشكل أعمق، لنزداد ثقة بالله وحكمة في حياتنا:</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
                <div class="bg-yellow-100 p-6 rounded-xl shadow-md border-2 border-yellow-300">
                    <img src="https://placehold.co/100x100/FFECB3/000000?text=علم+الله" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-yellow-800 mb-2">1. علم الله السابق</h3>
                    <p class="text-gray-700">الله تعالى يعلم كل شيء سيحدث في الكون قبل أن يحدث.</p>
                </div>
                <div class="bg-blue-100 p-6 rounded-xl shadow-md border-2 border-blue-300">
                    <img src="https://placehold.co/100x100/ADD8E6/000000?text=كتابة+في+اللوح" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">2. كتابة المقادير</h3>
                    <p class="text-gray-700">الله كتب كل ما سيحدث في اللوح المحفوظ قبل خلق السماوات والأرض.</p>
                </div>
                <div class="bg-green-100 p-6 rounded-xl shadow-md border-2 border-green-300">
                    <img src="https://placehold.co/100x100/90EE90/000000?text=مشيئة+الله" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-green-800 mb-2">3. مشيئة الله النافذة</h3>
                    <p class="text-gray-700">لا يحدث شيء في الكون إلا بمشيئة الله تعالى وإرادته.</p>
                </div>
                <div class="bg-purple-100 p-6 rounded-xl shadow-md border-2 border-purple-300">
                    <img src="https://placehold.co/100x100/E6E6FA/000000?text=خلق+الله" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-purple-800 mb-2">4. خلق الله لكل شيء</h3>
                    <p class="text-gray-700">الله هو خالق كل شيء، بما في ذلك أفعالنا وحركاتنا.</p>
                </div>
                <div class="bg-orange-100 p-6 rounded-xl shadow-md border-2 border-orange-300">
                    <img src="https://placehold.co/100x100/FFE0B2/000000?text=صبر+وشكر" alt="" class="mx-auto mb-4 rounded-full">
                    <h3 class="text-xl font-semibold text-orange-800 mb-2">5. الصبر والشكر</h3>
                    <p class="text-gray-700">الإيمان بالقدر يعلمنا الصبر عند المصائب والشكر عند النعم.</p>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <h2 class="text-3xl">اختبر فهمك: هل أنت بطل الإيمان بالقدر؟</h2>
            <p class="quiz-question-text">الآن بعد أن استمعنا لقصة سليم الممتعة وتعرفنا على القدر، حان وقت اختبار معلوماتك! أجب عن الأسئلة التالية لتثبت أنك أصبحت بطلًا في فهم الإيمان بالقدر:</p>
            <div id="quiz-question-container" class="mt-6">
                <!-- Quiz question will be loaded here by JS -->
            </div>
            <div class="quiz-feedback" id="quiz-feedback"></div>
            <button id="next-question-btn" class="mt-6 bg-green-500 hover:bg-green-600 text-white py-3 px-6 rounded-full font-bold shadow-lg transition-all" onclick="nextQuestion()">السؤال التالي</button>
            <button id="restart-quiz-btn" class="mt-6 bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 rounded-full font-bold shadow-lg transition-all hidden" onclick="resetQuiz()">إعادة الاختبار</button>
        </div>

        <!-- Games Section -->
        <div id="games" class="section">
            <h2 class="text-3xl">ألعاب تفاعلية: لنثبت ما تعلمناه!</h2>
            <p class="story-text">بعد أن اختبرت معلوماتك بنجاح، حان وقت المرح! هيا بنا نلعب لعبة "من القدر أم من جهدي؟" لتثبيت معلوماتنا:</p>

            <div class="game-area">
                <h3 class="text-2xl font-bold text-goldenrod-700 mb-4">لعبة "من القدر أم من جهدي؟"</h3>
                <p class="text-gray-600 mb-6">اقرأ الموقف واختر إذا كان هذا من القدر (بتقدير الله) أم يتطلب جهدًا منك.</p>
                <div id="game-statement-display" class="game-card">
                    <!-- Game statement (action/event) will be loaded here by JS -->
                </div>
                <div class="game-buttons mt-6">
                    <button class="bg-yellow-500 hover:bg-yellow-600 text-white" onclick="checkGameAnswer('قدر')"><i class="fas fa-cloud"></i> من القدر</button>
                    <button class="bg-blue-500 hover:bg-blue-600 text-white" onclick="checkGameAnswer('جهد')"><i class="fas fa-running"></i> من جهدي</button>
                </div>
                <div class="game-feedback mt-4 text-lg font-semibold" id="game-game-feedback"></div>
                <button class="mt-4 bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-full font-bold shadow-lg transition-all" onclick="nextGameItem()">التالي</button>
                <button class="mt-4 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-full font-bold shadow-lg transition-all" onclick="resetGame()">إعادة اللعب</button>
            </div>
        </div>
    </div>

    <!-- Custom Modal/Popup for alerts -->
    <div id="custom-popup-overlay" class="popup-overlay">
        <div class="popup-content">
            <h3 id="popup-title"></h3>
            <p id="popup-message"></p>
            <button onclick="closePopup()">حسناً</button>
        </div>
    </div>

    <script>
        // Function to show custom popup
        function showPopup(title, message) {
            document.getElementById('popup-title').innerText = title;
            document.getElementById('popup-message').innerText = message;
            document.getElementById('custom-popup-overlay').classList.add('show');
        }

        // Function to close custom popup
        function closePopup() {
            document.getElementById('custom-popup-overlay').classList.remove('show');
        }

        // --- Section Management ---
        let currentSection = 'intro';

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            // Show the requested section
            document.getElementById(sectionId).classList.add('active');
            currentSection = sectionId;

            // Specific actions for sections
            if (sectionId === 'quiz') {
                resetQuiz(); // Ensure quiz is reset when navigated to
            } else if (sectionId === 'games') {
                resetGame(); // Ensure game is reset and initialized when navigated to
            }
        }

        // --- Quiz Logic ---
        const quizQuestions = [
            {
                question: "هل الله يعلم كل شيء سيحدث قبل أن يحدث؟",
                options: ["نعم", "لا", "فقط بعض الأشياء"],
                answer: "نعم"
            },
            {
                question: "ماذا نفعل إذا حدث لنا خير بتقدير الله؟",
                options: ["نحزن", "نشكر الله", "لا نفعل شيئًا"],
                answer: "نشكر الله"
            },
            {
                question: "هل كل ما يحدث في الكون هو بمشيئة الله؟",
                options: ["نعم", "لا", "فقط الأشياء الكبيرة"],
                answer: "نعم"
            },
            {
                question: "ماذا تعلمنا الإيمان بالقدر؟",
                options: ["الكسل", "الخوف", "الثقة بالله والصبر"],
                answer: "الثقة بالله والصبر"
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;

        function displayQuestion() {
            const container = document.getElementById('quiz-question-container');
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question-btn');
            const restartBtn = document.getElementById('restart-quiz-btn');

            feedback.innerText = ''; // Clear previous feedback
            nextBtn.innerText = 'تحقق من الإجابة'; // Change button text

            if (currentQuestionIndex < quizQuestions.length) {
                const q = quizQuestions[currentQuestionIndex];
                let html = `<p class="text-xl font-bold mb-4">${currentQuestionIndex + 1}. ${q.question}</p>`;
                html += `<div class="quiz-options text-right">`;
                q.options.forEach((option, index) => {
                    html += `
                        <div>
                            <input type="radio" id="option${index}" name="quiz-option" value="${option}" class="hidden">
                            <label for="option${index}">${option}</label>
                        </div>
                    `;
                });
                html += `</div>`;
                container.innerHTML = html;
                nextBtn.classList.remove('hidden');
                restartBtn.classList.add('hidden');
            } else {
                // Quiz finished
                container.innerHTML = `<p class="text-2xl font-bold text-green-700">لقد أكملت الاختبار!</p><p class="text-xl mt-2">نقاطك: ${score} من ${quizQuestions.length}</p>`;
                if (score === quizQuestions.length) {
                    feedback.innerHTML = `<p class="correct text-2xl mt-4">أحسنت! أنت بطل الإيمان بالقدر!</p>`;
                } else {
                    feedback.innerHTML = `<p class="incorrect text-2xl mt-4">حاول مرة أخرى لتصبح بطلًا!</p>`;
                }
                nextBtn.classList.add('hidden');
                restartBtn.classList.remove('hidden');
            }
        }

        function nextQuestion() {
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            const feedback = document.getElementById('quiz-feedback');
            const nextBtn = document.getElementById('next-question-btn');

            if (!selectedOption && currentQuestionIndex < quizQuestions.length) {
                showPopup("تنبيه", "الرجاء اختيار إجابة قبل المتابعة.");
                return;
            }

            if (nextBtn.innerText === 'تحقق من الإجابة') {
                // Check answer phase
                const correctAnswer = quizQuestions[currentQuestionIndex].answer;
                if (selectedOption.value === correctAnswer) {
                    feedback.innerHTML = `<p class="correct"><i class="fas fa-check-circle"></i> إجابة صحيحة! أحسنت.</p>`;
                    score++;
                } else {
                    feedback.innerHTML = `<p class="incorrect"><i class="fas fa-times-circle"></i> إجابة خاطئة. الإجابة الصحيحة هي: ${correctAnswer}.</p>`;
                }
                nextBtn.innerText = 'السؤال التالي'; // Change button text for next question
            } else {
                // Move to next question phase
                currentQuestionIndex++;
                displayQuestion();
            }
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            displayQuestion();
            document.getElementById('restart-quiz-btn').classList.add('hidden');
            document.getElementById('next-question-btn').classList.remove('hidden');
            document.getElementById('next-question-btn').innerText = 'تحقق من الإجابة';
        }

        // --- Game Logic: "من القدر أم من جهدي؟" (From Qadar or My Effort?) ---
        const gameActions = [
            { action: "سقوط المطر من السماء", category: "قدر" },
            { action: "النجاح في الدراسة", category: "جهد" },
            { action: "ولادة طفل جديد", category: "قدر" },
            { action: "تنظيف غرفتي", category: "جهد" },
            { action: "الشعور بالجوع أو العطش", category: "قدر" },
            { action: "مساعدة أمي في أعمال المنزل", category: "جهد" },
            { action: "شفائي من المرض بإذن الله", category: "قدر" },
            { action: "قراءة كتاب جديد", category: "جهد" },
            { action: "حدوث زلزال", category: "قدر" },
            { action: "الذهاب إلى المدرسة", category: "جهد" }
        ];

        let shuffledGameActions = [];
        let currentGameActionIndex = 0;

        function initializeGame() {
            shuffledGameActions = [...gameActions].sort(() => Math.random() - 0.5);
            currentGameActionIndex = 0;
            displayGameAction();
            document.getElementById('game-game-feedback').innerText = '';
        }

        function displayGameAction() {
            const displayArea = document.getElementById('game-statement-display');
            if (currentGameActionIndex < shuffledGameActions.length) {
                const action = shuffledGameActions[currentGameActionIndex];
                displayArea.innerText = action.action;
            } else {
                displayArea.innerHTML = `<p class="text-xl font-bold text-green-700">لقد أكملت اللعبة!</p><p class="text-lg mt-2">أحسنت في فهم القدر والجهد!</p>`;
                showPopup("تهانينا!", "لقد أكملت لعبة 'من القدر أم من جهدي؟' بنجاح!");
            }
        }

        function checkGameAnswer(userChoice) {
            const feedback = document.getElementById('game-game-feedback');
            if (currentGameActionIndex >= shuffledGameActions.length) {
                feedback.innerText = "لقد أكملت اللعبة!";
                return;
            }

            const currentAction = shuffledGameActions[currentGameActionIndex];
            if (userChoice === currentAction.category) {
                feedback.innerHTML = `<p class="correct"><i class="fas fa-check-circle"></i> إجابة صحيحة! هذا ${currentAction.category === 'قدر' ? 'من القدر' : 'يتطلب جهدًا منك'}.</p>`;
                showPopup("أحسنت!", `إجابتك صحيحة! هذا ${currentAction.category === 'قدر' ? 'من القدر' : 'يتطلب جهدًا منك'}.`);
            } else {
                feedback.innerHTML = `<p class="incorrect"><i class="fas fa-times-circle"></i> إجابة خاطئة. هذا ${currentAction.category === 'قدر' ? 'من القدر' : 'يتطلب جهدًا منك'}.</p>`;
                showPopup("حاول مرة أخرى", `إجابتك خاطئة. هذا ${currentAction.category === 'قدر' ? 'من القدر' : 'يتطلب جهدًا منك'}.`);
            }
        }

        function nextGameItem() {
            currentGameActionIndex++;
            displayGameAction();
            document.getElementById('game-game-feedback').innerText = '';
        }

        function resetGame() {
            initializeGame();
        }

        // Initialize the quiz and game when the page loads
        window.onload = function() {
            showSection('intro'); // Start with the introduction section
            displayQuestion(); // Initialize the first quiz question
            initializeGame(); // Initialize the game
        };
    </script>
</body>
</html>
