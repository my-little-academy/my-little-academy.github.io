<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù„Ùƒ Ø§Ù„Ù†Ø­Ùˆ Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
    <style>
        /* Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¹Ø§Ù…Ø© */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Amiri', serif; /* Ø®Ø· Ø¹Ø±Ø¨ÙŠ ØªÙ‚Ù„ÙŠØ¯ÙŠ */
            background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            direction: rtl; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø± */
            text-align: right;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            padding: 30px;
            max-width: 1000px;
            width: 100%;
            border: 5px dashed #4CAF50; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ø¬Ù…ÙŠÙ„ */
        }

        .game-title {
            text-align: center;
            color: #2196F3; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ø¬Ø°Ø§Ø¨ */
            font-size: 3em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: bold;
            background: linear-gradient(to right, #FFC107, #FF5722); /* ØªØ¯Ø±Ø¬ Ø£Ù„ÙˆØ§Ù† Ø¯Ø§ÙØ¦ */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 10px;
            border-radius: 15px;
        }

        .board {
            width: 700px; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ù„ÙˆØ­Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            height: 700px;
            margin: 0 auto 30px;
            position: relative;
            background: #e0f2f7; /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© Ù„Ù„ÙˆØ­Ø© */
            border: 5px solid #03A9F4; /* Ø¥Ø·Ø§Ø± Ø£Ø²Ø±Ù‚ Ø³Ø§Ø·Ø¹ */
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M50 0L61.8 38.2L100 38.2L69.1 61.8L80.9 100L50 76.4L19.1 100L30.9 61.8L0 38.2L38.2 38.2Z" fill="%234FC3F7" opacity="0.2"/></svg>'); /* Ù†Ù…Ø· Ù†Ø¬ÙˆÙ… Ø®ÙÙŠÙ */
            background-size: 80px 80px;
        }

        .space {
            position: absolute;
            background: linear-gradient(145deg, #ffffff, #f0f8ff);
            border: 3px solid #64B5F6; /* Ø¥Ø·Ø§Ø± Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­ Ù„Ù„Ù…Ø±Ø¨Ø¹Ø§Øª */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            color: #263238;
            padding: 5px;
        }

        .space:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 20;
        }

        .space.owned-1 {
            background: linear-gradient(145deg, #BBDEFB, #64B5F6);
            color: white;
            border-color: #2196F3;
        }

        .space.owned-2 {
            background: linear-gradient(145deg, #FFCDD2, #EF9A9A);
            color: white;
            border-color: #F44336;
        }

        .corner {
            width: 100px; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù„ÙˆØ­Ø© */
            height: 100px;
            font-size: 14px;
            background: linear-gradient(145deg, #9FA8DA, #5C6BC0); /* Ù„ÙˆÙ† Ø¨Ù†ÙØ³Ø¬ÙŠ Ù…Ø²Ø±Ù‚ */
            color: white;
            border-radius: 20px;
        }

        .side {
            width: 90px; /* Ø­Ø¬Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
            height: 70px;
            font-size: 12px;
        }

        /* Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª (Ù„Ø¹Ø¨Ø© Ø¨Ù…Ø±Ø¨Ø¹Ø§Øª Ø£ÙƒØ«Ø± Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ø­ÙˆÙŠ) */
        /* Ø§Ù„ØµÙ Ø§Ù„Ø³ÙÙ„ÙŠ (Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±) - 7 Ù…Ø±Ø¨Ø¹Ø§Øª Ø¬Ø§Ù†Ø¨ÙŠØ© + 2 Ø²Ø§ÙˆÙŠØ© = 9 */
        .start { bottom: 0px; right: 600px; } /* Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .space1 { bottom: 0px; right: 510px; }
        .space2 { bottom: 0px; right: 420px; }
        .space3 { bottom: 0px; right: 330px; }
        .space4 { bottom: 0px; right: 240px; }
        .space5 { bottom: 0px; right: 150px; }
        .space6 { bottom: 0px; right: 60px; }
        .punishment { bottom: 0px; right: 0px; } /* Ø¹Ù‚ÙˆØ¨Ø© */

        /* Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠÙ…Ù† (Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰) - 7 Ù…Ø±Ø¨Ø¹Ø§Øª Ø¬Ø§Ù†Ø¨ÙŠØ© + 1 Ø²Ø§ÙˆÙŠØ© = 8 */
        .space7 { bottom: 90px; right: 0px; }
        .space8 { bottom: 180px; right: 0px; }
        .space9 { bottom: 270px; right: 0px; }
        .space10 { bottom: 360px; right: 0px; }
        .space11 { bottom: 450px; right: 0px; }
        .space12 { bottom: 540px; right: 0px; }
        .gift { top: 0px; right: 0px; } /* Ù‡Ø¯ÙŠØ© */

        /* Ø§Ù„ØµÙ Ø§Ù„Ø¹Ù„ÙˆÙŠ (Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±) - 7 Ù…Ø±Ø¨Ø¹Ø§Øª Ø¬Ø§Ù†Ø¨ÙŠØ© + 1 Ø²Ø§ÙˆÙŠØ© = 8 */
        .space13 { top: 0px; right: 90px; }
        .space14 { top: 0px; right: 180px; }
        .space15 { top: 0px; right: 270px; }
        .space16 { top: 0px; right: 360px; }
        .space17 { top: 0px; right: 450px; }
        .space18 { top: 0px; right: 540px; }
        .goto-punishment { top: 0px; right: 600px; } /* Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø© */

        /* Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠØ³Ø± (Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙÙ„) - 7 Ù…Ø±Ø¨Ø¹Ø§Øª Ø¬Ø§Ù†Ø¨ÙŠØ© + 1 Ø²Ø§ÙˆÙŠØ© = 8 */
        .space19 { top: 90px; right: 600px; }
        .space20 { top: 180px; right: 600px; }
        .space21 { top: 270px; right: 600px; }
        .space22 { top: 360px; right: 600px; }
        .space23 { top: 450px; right: 600px; }
        .space24 { top: 540px; right: 600px; }

        .player {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.6s ease-in-out; /* Ø­Ø±ÙƒØ© Ø£Ø¨Ø·Ø£ ÙˆØ£ÙƒØ«Ø± Ø³Ù„Ø§Ø³Ø© */
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .player1 {
            background: #2196F3;
            transform: translate(-45px, 15px); /* ØªØ¹Ø¯ÙŠÙ„ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        }

        .player2 {
            background: #F44336;
            transform: translate(-15px, 15px); /* ØªØ¹Ø¯ÙŠÙ„ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        }

        .center-area {
            position: absolute;
            top: 150px; /* ØªØ¹Ø¯ÙŠÙ„ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
            right: 150px; /* ØªØ¹Ø¯ÙŠÙ„ Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
            width: 400px; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ© */
            height: 400px;
            background: linear-gradient(135deg, #B2EBF2 0%, #80DEEA 100%); /* Ù„ÙˆÙ† Ø³Ù…Ø§ÙˆÙŠ ÙØ§ØªØ­ */
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #263238;
            text-align: center;
            box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 4px dotted #FFC107; /* Ø­Ø¯ÙˆØ¯ ØµÙØ±Ø§Ø¡ Ù…Ù†Ù‚Ø·Ø© */
        }

        .center-logo {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #4CAF50; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ø¬Ù…ÙŠÙ„ */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 20px;
        }

        .player-info {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            flex: 1;
            text-align: center;
            border: 3px dashed;
            transition: all 0.3s ease;
        }

        .player-info.player1 {
            border-color: #2196F3;
            background: linear-gradient(145deg, #E3F2FD, #BBDEFB);
        }

        .player-info.player2 {
            border-color: #F44336;
            background: linear-gradient(145deg, #FFEBEE, #FFCDD2);
        }

        .player-info.current-player {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .player-info h3 {
            margin-bottom: 10px;
            font-size: 1.8em;
            color: #263238;
        }

        .player-info p {
            font-size: 1.2em;
            margin: 8px 0;
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(145deg, #A5D6A7, #81C784); /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ */
            color: #263238;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 3px solid #fff;
            min-width: 180px;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn.danger {
            background: linear-gradient(145deg, #EF9A9A, #E57373); /* Ù„ÙˆÙ† Ø£Ø­Ù…Ø± Ù†Ø§Ø¹Ù… */
            color: white;
        }

        .btn.primary {
            background: linear-gradient(145deg, #90CAF9, #64B5F6); /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù†Ø§Ø¹Ù… */
            color: #263238;
        }

        .dice-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px; /* Ù…Ø³Ø§ÙØ© Ø£ÙƒØ¨Ø± Ø¨ÙŠÙ† Ø§Ù„Ù†Ø±Ø¯ */
            margin: 20px 0;
        }

        .dice {
            width: 70px; /* Ø­Ø¬Ù… Ø£ÙƒØ¨Ø± Ù„Ù„Ù†Ø±Ø¯ */
            height: 70px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border: 3px solid #42A5F5; /* Ø¥Ø·Ø§Ø± Ø£Ø²Ø±Ù‚ Ù„Ù„Ù†Ø±Ø¯ */
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: #263238;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.1s ease;
        }

        .dice.rolling {
            animation: roll 0.5s ease-in-out;
        }

        @keyframes roll {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.2); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.2); }
        }

        .log {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 15px;
            max-height: 250px; /* Ø§Ø±ØªÙØ§Ø¹ Ø£ÙƒØ¨Ø± Ù„Ø³Ø¬Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© */
            overflow-y: auto;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            direction: rtl;
            text-align: right;
            border: 2px solid #B0BEC5; /* Ù„ÙˆÙ† Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ Ù„Ù„Ø­Ø¯ÙˆØ¯ */
        }

        .log-entry {
            padding: 8px 0;
            border-bottom: 1px dashed #CFD8DC; /* Ø®Ø· Ù…Ù†Ù‚Ø· ÙØ§ØªØ­ */
            font-size: 17px;
            color: #37474F;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            direction: rtl;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 10% auto; /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‡Ø§Ù…Ø´ Ù„Ø¸Ù‡ÙˆØ± Ø£ÙØ¶Ù„ */
            padding: 40px; /* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„ØªØ¨Ø·ÙŠÙ† */
            border-radius: 25px;
            width: 90%;
            max-width: 600px; /* Ø¹Ø±Ø¶ Ø£ÙƒØ¨Ø± Ù„Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 5px solid #FFC107; /* Ø¥Ø·Ø§Ø± Ø£ØµÙØ± Ø³Ø§Ø·Ø¹ */
            background: linear-gradient(145deg, #fff, #f7f7f7);
            position: relative;
        }

        .close {
            color: #aaa;
            float: left; /* Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© */
            font-size: 36px;
            font-weight: bold;
            cursor: pointer;
            position: absolute; /* ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø¨Ø§Ù„Ø¯Ù‚Ø© */
            top: 15px;
            left: 20px;
        }

        .close:hover {
            color: #F44336;
        }

        .current-player {
            border: 4px solid #FFC107 !important; /* Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø­Ø¯ÙˆØ¯ ØµÙØ±Ø§Ø¡ */
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
        }

        .rule-text {
            font-size: 1.4em;
            color: #3F51B5; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚ Ù„Ù„Ù†ØµÙˆØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© */
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .question-text {
            font-size: 1.5em;
            color: #D32F2F; /* Ù„ÙˆÙ† Ø£Ø­Ù…Ø± Ù„Ù„Ø³Ø¤Ø§Ù„ */
            margin-bottom: 25px;
            font-weight: bold;
            line-height: 1.5;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option-btn {
            background: #E0E0E0;
            border: 2px solid #BDBDBD;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #424242;
            width: 100%;
            text-align: center;
        }

        .option-btn:hover {
            background: #CFD8DC;
            border-color: #90A4AE;
            transform: scale(1.02);
        }

        .option-btn.correct {
            background: #A5D6A7; /* Ø£Ø®Ø¶Ø± Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© */
            border-color: #4CAF50;
            color: white;
            font-weight: bold;
        }

        .option-btn.incorrect {
            background: #FFCDD2; /* Ø£Ø­Ù…Ø± Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø© */
            border-color: #F44336;
            color: white;
            font-weight: bold;
        }

        .feedback-message {
            margin-top: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .feedback-message.correct {
            color: #4CAF50;
        }

        .feedback-message.incorrect {
            color: #F44336;
        }

        .emoji {
            font-size: 20px; /* Ø­Ø¬Ù… Ø£ÙƒØ¨Ø± Ù„Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
            margin: 0 5px;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„ */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); } /* Ø§Ø±ØªØ¯Ø§Ø¯ Ø£ÙƒØ¨Ø± */
        }

        .bounce {
            animation: bounce 0.6s infinite; /* Ø­Ø±ÙƒØ© Ø£Ø¨Ø·Ø£ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
        }

        .confetti {
            position: fixed;
            width: 12px; /* Ø­Ø¬Ù… Ø£ÙƒØ¨Ø± Ù„Ù„Ù‚ØµØ§ØµØ§Øª */
            height: 12px;
            background-color: #f00;
            opacity: 0;
            z-index: 1001;
            animation: confetti 3s ease-in-out forwards; /* Ø¥Ø¶Ø§ÙØ© forwards Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© */
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(600px) rotate(720deg); opacity: 0; } /* Ø³Ù‚ÙˆØ· Ø£Ø·ÙˆÙ„ ÙˆØ¯ÙˆØ±Ø§Ù† Ø£ÙƒØ«Ø± */
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">âœ¨ Ù…Ù„Ùƒ Ø§Ù„Ù†Ø­Ùˆ âœ¨</h1>
        
        <div class="game-info">
            <div class="player-info player1 current-player" id="player-info-1">
                <h3>ğŸ‘‘ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„</h3>
                <p>ğŸŒŸ Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="player1-score">0</span></p>
                <p>ğŸ“š Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…ØªÙ‚Ù†Ø©: <span id="player1-mastered">0</span></p>
            </div>
            <div class="player-info player2" id="player-info-2">
                <h3>ğŸ§â€â™€ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
                <p>ğŸŒŸ Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="player2-score">0</span></p>
                <p>ğŸ“š Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…ØªÙ‚Ù†Ø©: <span id="player2-mastered">0</span></p>
            </div>
        </div>

        <div class="board">
            <div class="space corner start">
                <span class="emoji">ğŸ</span><br>Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©<br>Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ
            </div>
            <div class="space corner punishment">
                <span class="emoji">âš ï¸</span><br>ØªÙˆÙ‚Ù Ø¯ÙˆØ±<br>Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©!
            </div>
            <div class="space corner gift">
                <span class="emoji">ğŸ</span><br>Ù…ÙƒØ§ÙØ£Ø©<br>Ù†Ù‚Ø·Ø© Ù…Ø¬Ø§Ù†ÙŠØ©!
            </div>
            <div class="space corner goto-punishment">
                <span class="emoji">â†©ï¸</span><br>Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø©<br>Ø±Ø§Ø¬Ø¹ Ø¯Ø±ÙˆØ³Ùƒ!
            </div>

            <div class="space side space1" data-id="1">Ø§Ù„Ø§Ø³Ù…<br><span class="emoji">ğŸ”‘</span></div>
            <div class="space side space2" data-id="2">Ø§Ù„ÙØ¹Ù„<br><span class="emoji">ğŸ”‘</span></div>
            <div class="space side space3" data-id="3">Ø§Ù„Ø­Ø±Ù<br><span class="emoji">ğŸ”‘</span></div>
            <div class="space side space4" data-id="4">Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ©<br><span class="emoji">ğŸ’¡</span></div>
            <div class="space side space5" data-id="5">Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©<br><span class="emoji">ğŸ’¡</span></div>
            <div class="space side space6" data-id="6">Ø§Ù„Ù…Ø¨ØªØ¯Ø£ ÙˆØ§Ù„Ø®Ø¨Ø±<br><span class="emoji">ğŸ’¡</span></div>

            <div class="space side space7" data-id="7">Ø§Ù„ÙØ§Ø¹Ù„<br><span class="emoji">âœï¸</span></div>
            <div class="space side space8" data-id="8">Ø§Ù„Ù…ÙØ¹ÙˆÙ„ Ø¨Ù‡<br><span class="emoji">âœï¸</span></div>
            <div class="space side space9" data-id="9">Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¥Ø¹Ø±Ø§Ø¨<br><span class="emoji">âœï¸</span></div>
            <div class="space side space10" data-id="10">Ø§Ù„Ù…Ø°ÙƒØ± ÙˆØ§Ù„Ù…Ø¤Ù†Ø«<br><span class="emoji">ğŸ¤”</span></div>
            <div class="space side space11" data-id="11">Ø§Ù„Ù…ÙØ±Ø¯ ÙˆØ§Ù„Ù…Ø«Ù†Ù‰<br><span class="emoji">ğŸ¤”</span></div>
            <div class="space side space12" data-id="12">Ø§Ù„Ø¬Ù…Ø¹<br><span class="emoji">ğŸ¤”</span></div>

            <div class="space side space13" data-id="13">Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø§Ø¶ÙŠ<br><span class="emoji">â³</span></div>
            <div class="space side space14" data-id="14">Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹<br><span class="emoji">â³</span></div>
            <div class="space side space15" data-id="15">ÙØ¹Ù„ Ø§Ù„Ø£Ù…Ø±<br><span class="emoji">â³</span></div>
            <div class="space side space16" data-id="16">Ø­Ø±ÙˆÙ Ø§Ù„Ø¬Ø±<br><span class="emoji">ğŸ”—</span></div>
            <div class="space side space17" data-id="17">Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø·Ù<br><span class="emoji">ğŸ”—</span></div>
            <div class="space side space18" data-id="18">Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„Ù†Ø§Ø³Ø®Ø©<br><span class="emoji">ğŸ”„</span></div>

            <div class="space side space19" data-id="19">Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø®Ù…Ø³Ø©<br><span class="emoji">â­</span></div>
            <div class="space side space20" data-id="20">Ø§Ù„Ù†Ø¹Øª<br><span class="emoji">âœ¨</span></div>
            <div class="space side space21" data-id="21">Ø§Ù„Ø­Ø§Ù„<br><span class="emoji">ğŸƒ</span></div>
            <div class="space side space22" data-id="22">Ø§Ù„ØªÙ…ÙŠÙŠØ²<br><span class="emoji">ğŸ”</span></div>
            <div class="space side space23" data-id="23">Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡<br><span class="emoji">â–</span></div>
            <div class="space side space24" data-id="24">Ø§Ù„Ù…Ù†Ø§Ø¯Ù‰<br><span class="emoji">ğŸ—£ï¸</span></div>

            <div class="center-area">
                <div class="center-logo">Ù…Ù„Ùƒ Ø§Ù„Ù†Ø­Ùˆ</div>
                <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„Ù…Ù…ØªØ¹Ø©!</p>
                <div class="dice-area">
                    <div class="dice" id="dice1">1</div>
                    <div class="dice" id="dice2">1</div>
                </div>
                <p>Ø§Ù„Ø®Ø·ÙˆØ§Øª: <span id="dice-total">2</span></p>
            </div>

            <div class="player player1" id="player1">1</div>
            <div class="player player2" id="player2">2</div>
        </div>

        <div class="controls">
            <button class="btn primary" id="roll-dice">ğŸ² Ø§Ø±Ù… Ø§Ù„Ù†Ø±Ø¯</button>
            <button class="btn danger" id="end-turn" disabled>â­ï¸ Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±</button>
            <button class="btn" id="reset-game">ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>

        <div class="log" id="game-log">
            <div class="log-entry"><strong>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© "Ù…Ù„Ùƒ Ø§Ù„Ù†Ø­Ùˆ" Ù„ØªØªÙ‚Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ù„ØºØªÙ†Ø§ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©!</strong></div>
            <div class="log-entry">ğŸ‘‘ Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ - Ø§Ø±Ù…Ù Ø§Ù„Ù†Ø±Ø¯ Ù„ØªØ¨Ø¯Ø£!</div>
        </div>
    </div>

    <div id="grammar-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³/Ø§Ù„Ø³Ø¤Ø§Ù„</h2>
            <p id="modal-content" class="rule-text"></p>
            <div id="options-container" class="options-container" style="display: none;">
                </div>
            <p id="feedback-message" class="feedback-message" style="display: none;"></p>
            <button class="btn primary" id="modal-action-btn">Ø­Ø³Ù†Ø§Ù‹ / Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
    </div>

    <div id="game-over-modal" class="modal">
        <div class="modal-content">
            <h2 style="color: #e84393;">ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ‰</h2>
            <p id="winner-message" style="font-size: 1.6em; margin: 20px 0; font-weight: bold;"></p>
            <button class="btn primary" id="new-game">ğŸ”„ Ø§Ø¨Ø¯Ø£ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <script>
        class GrammarGame {
            constructor() {
                this.currentPlayer = 1;
                this.players = {
                    1: { name: "ğŸ‘‘ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„", score: 0, position: 0, masteredRules: [], turnsSkipped: 0 },
                    2: { name: "ğŸ§â€â™€ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ", score: 0, position: 0, masteredRules: [], turnsSkipped: 0 }
                };
                this.grammarSpaces = this.initializeGrammarSpaces();
                this.boardPositions = this.initializeBoardPositions(); // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ X, Y Ù„Ù„Ø¹Ø±Ø¶
                this.gameLog = document.getElementById('game-log');
                this.diceRolled = false;
                this.gameActive = true;
                this.initializeEventListeners();
                this.updateDisplay();
                this.updatePlayerPositions();
                this.updateControlButtons();
            }

            initializeGrammarSpaces() {
                // Ù‚ÙˆØ§Ø¹Ø¯ Ù†Ø­ÙˆÙŠØ© Ù…Ø¨Ø³Ø·Ø© ÙˆØ£Ø³Ø¦Ù„Ø© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„
                const spacesData = [
                    // Start (position 0)
                    { id: 0, type: 'start', name: 'Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©' },
                    // Regular spaces (1-24)
                    { id: 1, type: 'rule', name: 'Ø§Ù„Ø§Ø³Ù…', content: 'Ø§Ù„Ø§Ø³Ù… Ù‡Ùˆ ÙƒÙ„ ÙƒÙ„Ù…Ø© ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø¥Ù†Ø³Ø§Ù†ØŒ Ø­ÙŠÙˆØ§Ù†ØŒ Ù†Ø¨Ø§ØªØŒ Ø¬Ù…Ø§Ø¯ØŒ Ø£Ùˆ Ù…ÙƒØ§Ù†. Ù…Ø«Ø§Ù„: (Ø£Ø­Ù…Ø¯ØŒ Ø£Ø³Ø¯ØŒ ØªÙØ§Ø­Ø©ØŒ Ù‚Ù„Ù…ØŒ Ù…Ø¯Ø±Ø³Ø©).' },
                    { id: 2, type: 'rule', name: 'Ø§Ù„ÙØ¹Ù„', content: 'Ø§Ù„ÙØ¹Ù„ Ù‡Ùˆ ÙƒÙ„Ù…Ø© ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø­Ø¯Ø« Ù…Ø±ØªØ¨Ø· Ø¨Ø²Ù…Ù†. Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙØ¹Ù„: Ù…Ø§Ø¶ÙØŒ Ù…Ø¶Ø§Ø±Ø¹ØŒ Ø£Ù…Ø±. Ù…Ø«Ø§Ù„: (Ø£ÙƒÙ„ØŒ ÙŠØ£ÙƒÙ„ØŒ ÙƒÙÙ„Ù’).' },
                    { id: 3, type: 'rule', name: 'Ø§Ù„Ø­Ø±Ù', content: 'Ø§Ù„Ø­Ø±Ù ÙƒÙ„Ù…Ø© Ù„Ø§ ÙŠØ¸Ù‡Ø± Ù…Ø¹Ù†Ø§Ù‡Ø§ Ø¥Ù„Ø§ Ù…Ø¹ ÙƒÙ„Ù…Ø© Ø£Ø®Ø±Ù‰. Ù…Ø«Ø§Ù„: (ÙÙŠØŒ Ø¹Ù„Ù‰ØŒ Ø¥Ù„Ù‰ØŒ ÙˆØŒ Ø«Ù…).' },
                    { id: 4, type: 'question', name: 'Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ©', question: 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ©ØŸ', options: ['ØªØ¨Ø¯Ø£ Ø¨ÙØ¹Ù„', 'ØªØ¨Ø¯Ø£ Ø¨Ø§Ø³Ù…', 'ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù'], answer: 'ØªØ¨Ø¯Ø£ Ø¨Ø§Ø³Ù…' },
                    { id: 5, type: 'question', name: 'Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©', question: 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©ØŸ', options: ['ØªØ¨Ø¯Ø£ Ø¨Ø§Ø³Ù…', 'ØªØ¨Ø¯Ø£ Ø¨ÙØ¹Ù„', 'ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù'], answer: 'ØªØ¨Ø¯Ø£ Ø¨ÙØ¹Ù„' },
                    { id: 6, type: 'rule', name: 'Ø§Ù„Ù…Ø¨ØªØ¯Ø£ ÙˆØ§Ù„Ø®Ø¨Ø±', content: 'Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ© ØªØªÙƒÙˆÙ† Ù…Ù† Ù…Ø¨ØªØ¯Ø£ ÙˆØ®Ø¨Ø±. Ø§Ù„Ù…Ø¨ØªØ¯Ø£ Ù‡Ùˆ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø°ÙŠ ØªØ¨Ø¯Ø£ Ø¨Ù‡ Ø§Ù„Ø¬Ù…Ù„Ø©ØŒ ÙˆØ§Ù„Ø®Ø¨Ø± Ù‡Ùˆ Ø§Ù„Ø°ÙŠ ÙŠØ®Ø¨Ø±Ù†Ø§ Ø¹Ù† Ø§Ù„Ù…Ø¨ØªØ¯Ø£ ÙˆÙŠÙƒÙ…Ù„ Ø§Ù„Ù…Ø¹Ù†Ù‰. Ù…Ø«Ø§Ù„: "Ø§Ù„Ø´Ù…Ø³Ù Ù…Ø´Ø±Ù‚Ø©ÙŒ".' },

                    // Punishment (position 7)
                    { id: 7, type: 'punishment', name: 'ØªÙˆÙ‚Ù Ø¯ÙˆØ± Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©!' },

                    { id: 8, type: 'question', name: 'Ø§Ù„ÙØ§Ø¹Ù„', question: 'ÙÙŠ Ø¬Ù…Ù„Ø© "Ù„Ø¹Ø¨ Ø§Ù„ÙˆÙ„Ø¯Ù Ø¨Ø§Ù„ÙƒØ±Ø©"ØŒ Ù…Ù† Ù‡Ùˆ Ø§Ù„ÙØ§Ø¹Ù„ØŸ', options: ['Ø§Ù„ÙƒØ±Ø©', 'Ù„Ø¹Ø¨', 'Ø§Ù„ÙˆÙ„Ø¯Ù'], answer: 'Ø§Ù„ÙˆÙ„Ø¯Ù' },
                    { id: 9, type: 'question', name: 'Ø§Ù„Ù…ÙØ¹ÙˆÙ„ Ø¨Ù‡', question: 'ÙÙŠ Ø¬Ù…Ù„Ø© "Ù‚Ø±Ø£ Ø£Ø­Ù…Ø¯Ù Ø§Ù„ÙƒØªØ§Ø¨Ù"ØŒ Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙØ¹ÙˆÙ„ Ø¨Ù‡ØŸ', options: ['Ù‚Ø±Ø£', 'Ø£Ø­Ù…Ø¯Ù', 'Ø§Ù„ÙƒØªØ§Ø¨Ù'], answer: 'Ø§Ù„ÙƒØªØ§Ø¨Ù' },
                    { id: 10, type: 'rule', name: 'Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¥Ø¹Ø±Ø§Ø¨', content: 'Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¥Ø¹Ø±Ø§Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù‡ÙŠ: Ø§Ù„Ø¶Ù…Ø© Ù„Ù„Ø±ÙØ¹ØŒ Ø§Ù„ÙØªØ­Ø© Ù„Ù„Ù†ØµØ¨ØŒ Ø§Ù„ÙƒØ³Ø±Ø© Ù„Ù„Ø¬Ø±ØŒ Ø§Ù„Ø³ÙƒÙˆÙ† Ù„Ù„Ø¬Ø²Ù…. Ù…Ø«Ø§Ù„: "Ø§Ù„ÙˆÙ„Ø¯Ù" (Ù…Ø±ÙÙˆØ¹ Ø¨Ø§Ù„Ø¶Ù…Ø©)ØŒ "Ø§Ù„ÙƒØªØ§Ø¨Ù" (Ù…Ù†ØµÙˆØ¨ Ø¨Ø§Ù„ÙØªØ­Ø©).' },
                    { id: 11, type: 'question', name: 'Ø§Ù„Ù…Ø°ÙƒØ± ÙˆØ§Ù„Ù…Ø¤Ù†Ø«', question: 'ÙƒÙ„Ù…Ø© "Ù†Ø§ÙØ°Ø©" Ù‡Ù„ Ù‡ÙŠ Ù…Ø°ÙƒØ± Ø£Ù… Ù…Ø¤Ù†Ø«ØŸ', options: ['Ù…Ø°ÙƒØ±', 'Ù…Ø¤Ù†Ø«'], answer: 'Ù…Ø¤Ù†Ø«' },
                    { id: 12, type: 'question', name: 'Ø§Ù„Ù…ÙØ±Ø¯ ÙˆØ§Ù„Ù…Ø«Ù†Ù‰', question: 'Ù…Ø§ Ù‡Ùˆ Ù…Ø«Ù†Ù‰ ÙƒÙ„Ù…Ø© "ÙƒØªØ§Ø¨"ØŸ', options: ['ÙƒØªØ¨', 'ÙƒØªØ§Ø¨Ø§Ù†', 'Ù…ÙƒØªØ¨Ø©'], answer: 'ÙƒØªØ§Ø¨Ø§Ù†' },
                    { id: 13, type: 'rule', name: 'Ø§Ù„Ø¬Ù…Ø¹', content: 'Ø§Ù„Ø¬Ù…Ø¹ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ø«Ù†ÙŠÙ†. Ù‡Ù†Ø§Ùƒ Ø¬Ù…Ø¹ Ù…Ø°ÙƒØ± Ø³Ø§Ù„Ù… (Ù…Ø¹Ù„Ù…ÙˆÙ†)ØŒ Ø¬Ù…Ø¹ Ù…Ø¤Ù†Ø« Ø³Ø§Ù„Ù… (Ù…Ø¹Ù„Ù…Ø§Øª)ØŒ ÙˆØ¬Ù…Ø¹ ØªÙƒØ³ÙŠØ± (Ø£Ù‚Ù„Ø§Ù…).' },

                    // Gift (position 14)
                    { id: 14, type: 'gift', name: 'Ù…ÙƒØ§ÙØ£Ø© Ù†Ù‚Ø·Ø© Ù…Ø¬Ø§Ù†ÙŠØ©!' },

                    { id: 15, type: 'question', name: 'Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø§Ø¶ÙŠ', question: 'ÙÙŠ Ø¬Ù…Ù„Ø© "ÙƒØªØ¨Ù Ø§Ù„Ø·Ø§Ù„Ø¨Ù Ø§Ù„Ø¯Ø±Ø³"ØŒ Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ù„ "ÙƒØªØ¨Ù"ØŸ', options: ['Ù…Ø¶Ø§Ø±Ø¹', 'Ù…Ø§Ø¶Ù', 'Ø£Ù…Ø±'], answer: 'Ù…Ø§Ø¶Ù' },
                    { id: 16, type: 'question', name: 'Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹', question: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ Ù…Ù† "Ø´Ø±Ø¨"ØŸ', options: ['Ø´Ø±Ø¨', 'Ø§Ø´Ø±Ø¨', 'ÙŠØ´Ø±Ø¨'], answer: 'ÙŠØ´Ø±Ø¨' },
                    { id: 17, type: 'rule', name: 'ÙØ¹Ù„ Ø§Ù„Ø£Ù…Ø±', content: 'ÙØ¹Ù„ Ø§Ù„Ø£Ù…Ø± Ù‡Ùˆ Ø·Ù„Ø¨ ÙØ¹Ù„ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„. Ù…Ø«Ø§Ù„: "Ø§ÙƒØªØ¨Ù’ Ø¯Ø±Ø³Ùƒ"ØŒ "Ø§Ø¬Ù„Ø³Ù’ Ø¨Ù‡Ø¯ÙˆØ¡".' },
                    { id: 18, type: 'question', name: 'Ø­Ø±ÙˆÙ Ø§Ù„Ø¬Ø±', question: 'ÙÙŠ Ø¬Ù…Ù„Ø© "Ø°Ù‡Ø¨ØªÙ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©"ØŒ Ù…Ø§ Ù‡Ùˆ Ø­Ø±Ù Ø§Ù„Ø¬Ø±ØŸ', options: ['Ø°Ù‡Ø¨ØªÙ', 'Ø§Ù„Ù…Ø¯Ø±Ø³Ø©', 'Ø¥Ù„Ù‰'], answer: 'Ø¥Ù„Ù‰' },
                    { id: 19, type: 'question', name: 'Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø·Ù', question: 'Ù…Ø§ Ù‡Ùˆ Ø­Ø±Ù Ø§Ù„Ø¹Ø·Ù ÙÙŠ Ø¬Ù…Ù„Ø© "Ø¬Ø§Ø¡ Ù…Ø­Ù…Ø¯ÙŒ ÙˆØ¹Ù„ÙŠÙŒ"ØŸ', options: ['Ø¬Ø§Ø¡', 'Ù…Ø­Ù…Ø¯ÙŒ', 'Ùˆ'], answer: 'Ùˆ' },
                    { id: 20, type: 'rule', name: 'Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„Ù†Ø§Ø³Ø®Ø© (ÙƒØ§Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§)', content: 'ÙƒØ§Ù† ÙˆØ£Ø®ÙˆØ§ØªÙ‡Ø§ ØªØ¯Ø®Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ© ÙØªØ±ÙØ¹ Ø§Ù„Ù…Ø¨ØªØ¯Ø£ ÙˆÙŠØ³Ù…Ù‰ Ø§Ø³Ù…Ù‡Ø§ØŒ ÙˆØªÙ†ØµØ¨ Ø§Ù„Ø®Ø¨Ø± ÙˆÙŠØ³Ù…Ù‰ Ø®Ø¨Ø±Ù‡Ø§. Ù…Ø«Ø§Ù„: "ÙƒØ§Ù† Ø§Ù„Ø¬ÙˆÙÙ‘ Ø¬Ù…ÙŠÙ„Ø§Ù‹".' },

                    // Go to Punishment (position 21)
                    { id: 21, type: 'goto-punishment', name: 'Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø©!' },

                    { id: 22, type: 'rule', name: 'Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø®Ù…Ø³Ø©', content: 'Ù‡ÙŠ: Ø£Ø¨ØŒ Ø£Ø®ØŒ Ø­Ù…ØŒ ÙÙˆØŒ Ø°Ùˆ. ØªÙØ±ÙØ¹ Ø¨Ø§Ù„ÙˆØ§ÙˆØŒ ØªÙÙ†ØµØ¨ Ø¨Ø§Ù„Ø£Ù„ÙØŒ ØªÙØ¬Ø± Ø¨Ø§Ù„ÙŠØ§Ø¡. Ù…Ø«Ø§Ù„: "Ø£Ø¨ÙˆÙƒ ÙƒØ±ÙŠÙ…ÙŒ".' },
                    { id: 23, type: 'question', name: 'Ø§Ù„Ù†Ø¹Øª (Ø§Ù„ØµÙØ©)', question: 'ÙÙŠ Ø¬Ù…Ù„Ø© "Ø±Ø£ÙŠØªÙ ÙˆØ±Ø¯Ø©Ù‹ Ø¬Ù…ÙŠÙ„Ø©Ù‹"ØŒ Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªÙŠ ØªØµÙ Ø§Ù„ÙˆØ±Ø¯Ø©ØŸ', options: ['Ø±Ø£ÙŠØªÙ', 'ÙˆØ±Ø¯Ø©Ù‹', 'Ø¬Ù…ÙŠÙ„Ø©Ù‹'], answer: 'Ø¬Ù…ÙŠÙ„Ø©Ù‹' },
                    { id: 24, type: 'rule', name: 'Ø§Ù„Ø­Ø§Ù„', content: 'Ø§Ù„Ø­Ø§Ù„ Ø§Ø³Ù… ÙŠØ¨ÙŠÙ† Ù‡ÙŠØ¦Ø© ØµØ§Ø­Ø¨Ù‡ Ø¹Ù†Ø¯ ÙˆÙ‚ÙˆØ¹ Ø§Ù„ÙØ¹Ù„. ÙŠÙƒÙˆÙ† Ù…Ù†ØµÙˆØ¨Ø§Ù‹ Ø¯Ø§Ø¦Ù…Ø§Ù‹. Ù…Ø«Ø§Ù„: "Ø¹Ø§Ø¯ Ø§Ù„Ø·Ø§Ù„Ø¨Ù Ù…Ø³Ø±ÙˆØ±Ø§Ù‹".' },
                    { id: 25, type: 'question', name: 'Ø§Ù„ØªÙ…ÙŠÙŠØ²', question: 'ÙÙŠ "Ø§Ø´ØªØ±ÙŠØªÙ Ø¹Ø´Ø±ÙŠÙ† ÙƒØªØ§Ø¨Ø§Ù‹"ØŒ Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªÙ…ÙŠÙŠØ²ØŸ', options: ['Ø§Ø´ØªØ±ÙŠØªÙ', 'Ø¹Ø´Ø±ÙŠÙ†', 'ÙƒØªØ§Ø¨Ø§Ù‹'], answer: 'ÙƒØªØ§Ø¨Ø§Ù‹' },
                    { id: 26, type: 'rule', name: 'Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡', content: 'Ù‡Ùˆ Ø¥Ø®Ø±Ø§Ø¬ Ù…Ø§ Ø¨Ø¹Ø¯ "Ø¥Ù„Ø§" Ù…Ù† Ø­ÙƒÙ… Ù…Ø§ Ù‚Ø¨Ù„Ù‡Ø§. Ù…Ø«Ø§Ù„: "Ø­Ø¶Ø± Ø§Ù„Ø·Ù„Ø§Ø¨Ù Ø¥Ù„Ø§ ÙˆØ§Ø­Ø¯Ø§Ù‹".' },
                    { id: 27, type: 'question', name: 'Ø§Ù„Ù…Ù†Ø§Ø¯Ù‰', question: 'ÙÙŠ "ÙŠØ§ Ø·Ø§Ù„Ø¨Ù Ø§Ù„Ø¹Ù„Ù…Ù Ø§Ø¬ØªÙ‡Ø¯Ù’"ØŒ Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ù†Ø§Ø¯Ù‰ØŸ', options: ['Ø§Ø¬ØªÙ‡Ø¯Ù’', 'Ø§Ù„Ø¹Ù„Ù…Ù', 'Ø·Ø§Ù„Ø¨Ù'], answer: 'Ø·Ø§Ù„Ø¨Ù' }
                ];

                const spacesMap = {};
                spacesData.forEach(space => {
                    spacesMap[space.id] = space;
                });
                return spacesMap;
            }

            initializeBoardPositions() {
                // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ø±Ø¨Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆØ­Ø© (Top, Right)
                return [
                    { top: 600, right: 600 }, // 0: Start
                    { top: 600, right: 510 }, // 1
                    { top: 600, right: 420 }, // 2
                    { top: 600, right: 330 }, // 3
                    { top: 600, right: 240 }, // 4
                    { top: 600, right: 150 }, // 5
                    { top: 600, right: 60 },  // 6
                    { top: 600, right: 0 },   // 7: Punishment

                    { top: 510, right: 0 },  // 8
                    { top: 420, right: 0 },  // 9
                    { top: 330, right: 0 },  // 10
                    { top: 240, right: 0 },  // 11
                    { top: 150, right: 0 },  // 12
                    { top: 60, right: 0 },   // 13
                    { top: 0, right: 0 },    // 14: Gift

                    { top: 0, right: 90 },   // 15
                    { top: 0, right: 180 },  // 16
                    { top: 0, right: 270 },  // 17
                    { top: 0, right: 360 },  // 18
                    { top: 0, right: 450 },  // 19
                    { top: 0, right: 540 },  // 20
                    { top: 0, right: 600 },  // 21: Go to Punishment

                    { top: 90, right: 600 },  // 22
                    { top: 180, right: 600 }, // 23
                    { top: 270, right: 600 }, // 24
                    { top: 360, right: 600 }, // 25
                    { top: 450, right: 600 }, // 26
                    { top: 540, right: 600 }  // 27
                ];
            }

            initializeEventListeners() {
                document.getElementById('roll-dice').addEventListener('click', () => this.rollDice());
                document.getElementById('end-turn').addEventListener('click', () => this.endTurn());
                document.getElementById('reset-game').addEventListener('click', () => this.resetGame());
                document.getElementById('modal-action-btn').addEventListener('click', () => this.handleModalAction());
                document.getElementById('new-game').addEventListener('click', () => this.resetGame());

                document.querySelectorAll('.close').forEach(close => {
                    close.addEventListener('click', (e) => {
                        e.target.closest('.modal').style.display = 'none';
                        this.updateControlButtons();
                    });
                });

                window.addEventListener('click', (e) => {
                    const grammarModal = document.getElementById('grammar-modal');
                    const gameOverModal = document.getElementById('game-over-modal');

                    if (e.target === grammarModal || e.target === gameOverModal) {
                        e.target.style.display = 'none';
                        this.updateControlButtons();
                    }
                });
            }

            updateControlButtons() {
                const rollDiceBtn = document.getElementById('roll-dice');
                const endTurnBtn = document.getElementById('end-turn');
                const grammarModal = document.getElementById('grammar-modal');

                rollDiceBtn.disabled = this.diceRolled || !this.gameActive || grammarModal.style.display === 'block';
                endTurnBtn.disabled = !this.diceRolled || !this.gameActive || grammarModal.style.display === 'block';
            }

            addLog(message) {
                const entry = document.createElement('div');
                entry.classList.add('log-entry');
                entry.innerHTML = message;
                this.gameLog.prepend(entry);
                // Keep only the last 10 entries to avoid overflowing
                while (this.gameLog.children.length > 10) {
                    this.gameLog.removeChild(this.gameLog.lastChild);
                }
                this.gameLog.scrollTop = 0;
            }

            updateDisplay() {
                document.getElementById('player1-score').textContent = this.players[1].score;
                document.getElementById('player1-mastered').textContent = this.players[1].masteredRules.length;
                document.getElementById('player2-score').textContent = this.players[2].score;
                document.getElementById('player2-mastered').textContent = this.players[2].masteredRules.length;

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ù†Ø´Ø·
                document.getElementById('player-info-1').classList.remove('current-player');
                document.getElementById('player-info-2').classList.remove('current-player');
                document.getElementById(`player-info-${this.currentPlayer}`).classList.add('current-player');

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ù…ØªÙ‚Ù†Ø© (ÙŠÙ…ÙƒÙ† Ø¥Ø¹Ø·Ø§Ø¦Ù‡Ø§ Ù„ÙˆÙ†Ø§Ù‹ Ø®Ø§ØµØ§Ù‹)
                document.querySelectorAll('.space').forEach(spaceElement => {
                    const id = parseInt(spaceElement.dataset.id);
                    spaceElement.classList.remove('owned-1', 'owned-2'); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ù„ÙˆØ§Ù†
                    if (this.players[1].masteredRules.includes(id)) {
                        spaceElement.classList.add('owned-1');
                    } else if (this.players[2].masteredRules.includes(id)) {
                        spaceElement.classList.add('owned-2');
                    }
                });

                this.updateControlButtons();
            }

            rollDice() {
                if (this.diceRolled || !this.gameActive) return;

                const currentPlayer = this.players[this.currentPlayer];
                if (currentPlayer.turnsSkipped > 0) {
                    this.addLog(`âš ï¸ ${currentPlayer.name} Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ù„Ø¹Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ±ØŒ ØªØ¨Ù‚Ù‰ Ù„Ù‡ ${currentPlayer.turnsSkipped} Ø¯ÙˆØ± ÙÙŠ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø©.`);
                    currentPlayer.turnsSkipped--;
                    this.diceRolled = true; // ÙŠØ¹ØªØ¨Ø± Ø§Ù„Ù†Ø±Ø¯ Ù‚Ø¯ Ø±Ù…ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ±
                    this.updateControlButtons();
                    return;
                }
                
                const dice1 = Math.floor(Math.random() * 6) + 1;
                const dice2 = Math.floor(Math.random() * 6) + 1;
                const total = dice1 + dice2;

                document.getElementById('dice1').classList.add('rolling');
                document.getElementById('dice2').classList.add('rolling');

                setTimeout(() => {
                    document.getElementById('dice1').textContent = dice1;
                    document.getElementById('dice2').textContent = dice2;
                    document.getElementById('dice-total').textContent = total;
                    document.getElementById('dice1').classList.remove('rolling');
                    document.getElementById('dice2').classList.remove('rolling');

                    this.addLog(`ğŸ² ${this.players[this.currentPlayer].name} Ø±Ù…Ù‰ Ø§Ù„Ù†Ø±Ø¯: ${dice1} + ${dice2} = ${total} Ø®Ø·ÙˆØ©.`);
                    this.movePlayer(total);
                    this.diceRolled = true;
                    this.updateControlButtons();
                }, 500);
            }

            movePlayer(steps) {
                const player = this.players[this.currentPlayer];
                const oldPosition = player.position;
                player.position = (player.position + steps) % this.boardPositions.length;

                if (player.position < oldPosition && player.position !== 0) { // Ù…Ø± Ø¨Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                    player.score += 50;
                    this.addLog(`ğŸ’° ${player.name} Ù…Ø± Ø¨Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ­ØµÙ„ Ø¹Ù„Ù‰ 50 Ù†Ù‚Ø·Ø© Ù…ÙƒØ§ÙØ£Ø©!`);
                }

                this.updatePlayerPositions();
                setTimeout(() => {
                    this.handleLanding();
                    this.updateDisplay();
                }, 600);
            }

            updatePlayerPositions() {
                for (let i = 1; i <= 2; i++) {
                    const player = this.players[i];
                    const pos = this.boardPositions[player.position];
                    const playerElement = document.getElementById(`player${i}`);
                    
                    if (playerElement && pos) {
                        // ØªØ¹Ø¯ÙŠÙ„ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„ÙŠØ¸Ù‡Ø±ÙˆØ§ Ø¨Ø¬Ø§Ù†Ø¨ Ø¨Ø¹Ø¶Ù‡Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨Ø¹
                        playerElement.style.right = (pos.right + (i === 1 ? 45 : 15)) + 'px';
                        playerElement.style.top = (pos.top + 30) + 'px';
                    }
                }
            }

            handleLanding() {
                const player = this.players[this.currentPlayer];
                const currentSpace = this.grammarSpaces[player.position];

                this.addLog(`ğŸ“ ${player.name} Ù‡Ø¨Ø· Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹: "${currentSpace.name}".`);

                document.getElementById('modal-title').textContent = currentSpace.name;
                document.getElementById('options-container').style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
                document.getElementById('feedback-message').style.display = 'none';
                document.getElementById('modal-action-btn').textContent = 'Ø­Ø³Ù†Ø§Ù‹';
                document.getElementById('modal-action-btn').onclick = () => this.handleModalAction(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµØ­ÙŠØ­

                if (currentSpace.type === 'rule') {
                    document.getElementById('modal-content').textContent = currentSpace.content;
                    document.getElementById('grammar-modal').style.display = 'block';
                    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…ØªÙ‚Ù†Ø© Ù„Ù„Ø§Ø¹Ø¨ Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
                    if (!player.masteredRules.includes(currentSpace.id)) {
                        player.masteredRules.push(currentSpace.id);
                        player.score += 20; // Ù…ÙƒØ§ÙØ£Ø© Ø¹Ù„Ù‰ ØªØ¹Ù„Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©
                        this.addLog(`ğŸ‰ ${player.name} Ø£ØªÙ‚Ù† Ù‚Ø§Ø¹Ø¯Ø© "${currentSpace.name}" ÙˆØ­ØµÙ„ Ø¹Ù„Ù‰ 20 Ù†Ù‚Ø·Ø©!`);
                    }
                } else if (currentSpace.type === 'question') {
                    document.getElementById('modal-content').textContent = currentSpace.question;
                    this.displayQuestionOptions(currentSpace);
                    document.getElementById('grammar-modal').style.display = 'block';
                    document.getElementById('modal-action-btn').disabled = true; // ØªØ¹Ø·ÙŠÙ„ Ø²Ø± "Ø§Ù„ØªØ§Ù„ÙŠ" Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
                } else if (currentSpace.type === 'punishment') {
                    player.turnsSkipped += 1; // ØªÙˆÙ‚Ù Ø¯ÙˆØ± ÙˆØ§Ø­Ø¯
                    this.addLog(`âš ï¸ ${player.name} ØªÙˆÙ‚Ù Ø¯ÙˆØ±Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø©!`);
                    document.getElementById('modal-content').textContent = 'Ø¹Ù„ÙŠÙƒ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯Ø±ÙˆØ³Ùƒ! Ø³ØªØªÙˆÙ‚Ù Ø¯ÙˆØ±Ø§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹.';
                    document.getElementById('grammar-modal').style.display = 'block';
                } else if (currentSpace.type === 'gift') {
                    player.score += 100; // Ù…ÙƒØ§ÙØ£Ø© ÙƒØ¨ÙŠØ±Ø©
                    this.addLog(`ğŸ ${player.name} Ø­ØµÙ„ Ø¹Ù„Ù‰ 100 Ù†Ù‚Ø·Ø© Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©!`);
                    document.getElementById('modal-content').textContent = 'ÙŠØ§ Ù„Ùƒ Ù…Ù† Ù…Ø­Ø¸ÙˆØ¸! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ 100 Ù†Ù‚Ø·Ø© Ù…ÙƒØ§ÙØ£Ø©!';
                    document.getElementById('grammar-modal').style.display = 'block';
                } else if (currentSpace.type === 'goto-punishment') {
                    player.position = 7; // Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
                    player.turnsSkipped += 2; // Ø¹Ù‚ÙˆØ¨Ø© Ø£ÙƒØ¨Ø±
                    this.updatePlayerPositions();
                    this.addLog(`ğŸ‘®â€â™‚ï¸ ${player.name} Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø© Ù…Ø¨Ø§Ø´Ø±Ø©! Ø³ÙŠØªÙˆÙ‚Ù Ø¯ÙˆØ±ÙŠÙ†!`);
                    document.getElementById('modal-content').textContent = 'Ù„Ù„Ø£Ø³Ù! Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø© ÙˆØ³ØªØªÙˆÙ‚Ù Ø¯ÙˆØ±ÙŠÙ† Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯Ø±ÙˆØ³Ùƒ.';
                    document.getElementById('grammar-modal').style.display = 'block';
                }

                this.updateControlButtons();
            }

            displayQuestionOptions(space) {
                const optionsContainer = document.getElementById('options-container');
                optionsContainer.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
                optionsContainer.style.display = 'flex';

                space.options.forEach(option => {
                    const button = document.createElement('button');
                    button.classList.add('option-btn');
                    button.textContent = option;
                    button.onclick = () => this.checkAnswer(option, space.answer, space.id);
                    optionsContainer.appendChild(button);
                });
            }

            checkAnswer(selectedOption, correctAnswer, spaceId) {
                const feedbackMessage = document.getElementById('feedback-message');
                const modalActionButton = document.getElementById('modal-action-btn');
                const optionsButtons = document.querySelectorAll('.option-btn');
                const player = this.players[this.currentPlayer];

                optionsButtons.forEach(btn => {
                    btn.disabled = true; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    } else if (btn.textContent === selectedOption) {
                        btn.classList.add('incorrect');
                    }
                });

                if (selectedOption === correctAnswer) {
                    feedbackMessage.textContent = 'Ø£Ø­Ø³Ù†Øª! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ‰';
                    feedbackMessage.classList.remove('incorrect');
                    feedbackMessage.classList.add('correct');
                    player.score += 50; // Ù…ÙƒØ§ÙØ£Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                    if (!player.masteredRules.includes(spaceId)) {
                        player.masteredRules.push(spaceId);
                    }
                    this.addConfetti();
                    this.addLog(`âœ… ${player.name} Ø£Ø¬Ø§Ø¨ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ "${this.grammarSpaces[spaceId].name}" ÙˆØ­ØµÙ„ Ø¹Ù„Ù‰ 50 Ù†Ù‚Ø·Ø©!`);
                } else {
                    feedbackMessage.textContent = `Ù„Ù„Ø£Ø³ÙØŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: "${correctAnswer}" ğŸ˜”`;
                    feedbackMessage.classList.remove('correct');
                    feedbackMessage.classList.add('incorrect');
                    player.score = Math.max(0, player.score - 20); // Ø®ØµÙ… Ù†Ù‚Ø§Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
                    this.addLog(`âŒ ${player.name} Ø£Ø¬Ø§Ø¨ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ "${this.grammarSpaces[spaceId].name}" ÙˆØ®Ø³Ø± 20 Ù†Ù‚Ø·Ø©.`);
                }
                feedbackMessage.style.display = 'block';
                modalActionButton.disabled = false; // ØªÙØ¹ÙŠÙ„ Ø²Ø± "Ø§Ù„ØªØ§Ù„ÙŠ"
                this.updateDisplay();
            }

            handleModalAction() {
                document.getElementById('grammar-modal').style.display = 'none';
                this.updateControlButtons();
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ø´Ø±ÙˆØ· Ù„Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
                this.checkGameOver();
            }

            endTurn() {
                if (!this.diceRolled || !this.gameActive) return;

                this.diceRolled = false;
                this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
                this.addLog(`â¡ï¸ Ø¯ÙˆØ± ${this.players[this.currentPlayer].name}`);
                this.updateDisplay();
                this.updateControlButtons();
            }

            checkGameOver() {
                // Ø´Ø±ÙˆØ· Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© (Ù…Ø«Ø§Ù„: Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¹Ø¯Ø¯ Ù…Ø¹ÙŠÙ† Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø· Ø£Ùˆ Ø¥ØªÙ‚Ø§Ù† ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯)
                const player1 = this.players[1];
                const player2 = this.players[2];

                const totalQuestionSpaces = Object.values(this.grammarSpaces).filter(s => s.type === 'question').length;
                
                let winner = null;
                if (player1.masteredRules.length >= totalQuestionSpaces && player1.score > player2.score) {
                    winner = player1;
                } else if (player2.masteredRules.length >= totalQuestionSpaces && player2.score > player1.score) {
                    winner = player2;
                }

                if (winner) {
                    this.gameActive = false;
                    document.getElementById('winner-message').textContent = `ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ØŒ ${winner.name} Ù‡Ùˆ Ù…Ù„Ùƒ Ø§Ù„Ù†Ø­Ùˆ! ğŸ†`;
                    document.getElementById('game-over-modal').style.display = 'block';
                    this.addConfetti(200); // Ù‚ØµØ§ØµØ§Øª Ø£ÙƒØ«Ø± Ù„Ù„ÙØ§Ø¦Ø²
                    this.updateControlButtons();
                } else if (player1.score <= 0 && player2.score <= 0 && player1.position !== 0 && player2.position !== 0) {
                     // Ø­Ø§Ù„Ø© Ù†Ø§Ø¯Ø±Ø© Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø¥Ø°Ø§ Ù†ÙØ¯Øª Ø§Ù„Ù†Ù‚Ø§Ø·
                    this.gameActive = false;
                    document.getElementById('winner-message').textContent = `Ù„Ù„Ø£Ø³ÙØŒ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø£ÙŠ Ù„Ø§Ø¹Ø¨ Ù…Ù† Ø§Ù„ÙÙˆØ²! ğŸ˜”`;
                    document.getElementById('game-over-modal').style.display = 'block';
                    this.updateControlButtons();
                }
            }

            resetGame() {
                this.currentPlayer = 1;
                this.players = {
                    1: { name: "ğŸ‘‘ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„", score: 0, position: 0, masteredRules: [], turnsSkipped: 0 },
                    2: { name: "ğŸ§â€â™€ï¸ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ", score: 0, position: 0, masteredRules: [], turnsSkipped: 0 }
                };
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ø§Ù„ÙƒÙŠ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø·Ø¨Ù‚Ø©)
                document.querySelectorAll('.space').forEach(spaceElement => {
                    spaceElement.classList.remove('owned-1', 'owned-2');
                });
                this.diceRolled = false;
                this.gameActive = true;
                this.gameLog.innerHTML = '<div class="log-entry"><strong>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© "Ù…Ù„Ùƒ Ø§Ù„Ù†Ø­Ùˆ" Ù„ØªØªÙ‚Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ù„ØºØªÙ†Ø§ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©!</strong></div><div class="log-entry">ğŸ‘‘ Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ - Ø§Ø±Ù…Ù Ø§Ù„Ù†Ø±Ø¯ Ù„ØªØ¨Ø¯Ø£!</div>';
                document.getElementById('game-over-modal').style.display = 'none';
                document.getElementById('grammar-modal').style.display = 'none';
                this.updateDisplay();
                this.updatePlayerPositions();
                this.updateControlButtons();
            }

            addConfetti(count = 50) {
                for (let i = 0; i < count; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = Math.random() * 100 + 'vh';
                    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                    document.body.appendChild(confetti);

                    // Ø¥Ø²Ø§Ù„Ø© Ù‚ØµØ§ØµØ§Øª Ø§Ù„ÙˆØ±Ù‚ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø£Ù†Ù…ÙŠØ´Ù†
                    confetti.addEventListener('animationend', () => {
                        confetti.remove();
                    });
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new GrammarGame();
        });
    </script>
</body>
</html>