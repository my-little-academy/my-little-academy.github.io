<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            border: 5px dashed #ff6b6b;
        }

        .game-title {
            text-align: center;
            color: #d63031;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: bold;
            background: linear-gradient(to right, #fdcb6e, #e17055);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 10px;
            border-radius: 15px;
        }

        .board {
            width: 600px;
            height: 600px;
            margin: 0 auto 30px;
            position: relative;
            background: #f8f9fa;
            border: 5px solid #6c5ce7;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="40" stroke="%23a29bfe" stroke-width="1" fill="none" opacity="0.3"/></svg>');
            background-size: 50px 50px;
        }

        .property {
            position: absolute;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border: 3px solid #74b9ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }

        .property:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 20;
        }

        .property.owned-1 {
            background: linear-gradient(145deg, #74b9ff, #0984e3);
            color: white;
            border-color: #0984e3;
        }

        .property.owned-2 {
            background: linear-gradient(145deg, #ff7675, #d63031);
            color: white;
            border-color: #d63031;
        }

        .corner {
            width: 90px;
            height: 90px;
            font-size: 12px;
            background: linear-gradient(145deg, #a29bfe, #6c5ce7);
            color: white;
            border-radius: 15px;
        }

        .side {
            width: 80px;
            height: 60px;
            font-size: 11px;
        }

        /* Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ø®ØµØ§Ø¦Øµ */
        /* Ø§Ù„ØµÙ Ø§Ù„Ø³ÙÙ„ÙŠ (Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±) */
        .start { top: 510px; right: 510px; }
        .prop1 { top: 510px; right: 430px; }
        .prop2 { top: 510px; right: 350px; }
        .prop3 { top: 510px; right: 270px; }
        .prop4 { top: 510px; right: 190px; }
        .prop5 { top: 510px; right: 110px; }
        .prop6 { top: 510px; right: 30px; }
        .jail { top: 510px; right: 30px; }
        
        /* Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠÙ…Ù† (Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰) */
        .prop7 { top: 450px; right: 30px; }
        .prop8 { top: 390px; right: 30px; }
        .prop9 { top: 330px; right: 30px; }
        .prop10 { top: 270px; right: 30px; }
        .prop11 { top: 210px; right: 30px; }
        .prop12 { top: 150px; right: 30px; }
        .parking { top: 30px; right: 30px; }
        
        /* Ø§Ù„ØµÙ Ø§Ù„Ø¹Ù„ÙˆÙŠ (Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±) */
        .prop13 { top: 30px; right: 110px; }
        .prop14 { top: 30px; right: 190px; }
        .prop15 { top: 30px; right: 270px; }
        .prop16 { top: 30px; right: 350px; } /* ØªÙ… ØªØµØ­ÙŠØ­ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶Ø¹ */
        .prop17 { top: 30px; right: 430px; } /* ØªÙ… ØªØµØ­ÙŠØ­ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶Ø¹ */
        .prop18 { top: 30px; right: 510px; } /* ØªÙ… ØªØµØ­ÙŠØ­ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶Ø¹ */
        .go-jail { top: 30px; right: 510px; } /* Ù†ÙØ³ Ù…ÙƒØ§Ù† prop18ØŒ Ø³ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡ ÙÙŠ JS */
        
        /* Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠØ³Ø± (Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙÙ„) */
        .prop19 { top: 150px; right: 510px; }
        .prop20 { top: 210px; right: 510px; }
        .prop21 { top: 270px; right: 510px; }
        .prop22 { top: 330px; right: 510px; }
        .prop23 { top: 390px; right: 510px; }
        .prop24 { top: 450px; right: 510px; }

        .player {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            font-weight: bold;
        }

        .player1 {
            background: #74b9ff;
            transform: translate(-40px, 15px);
        }

        .player2 {
            background: #ff7675;
            transform: translate(-15px, 15px);
        }

        .center-area {
            position: absolute;
            top: 120px;
            right: 120px;
            width: 360px;
            height: 360px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #2d3436;
            text-align: center;
            box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 4px dotted #fab1a0;
        }

        .center-logo {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #6c5ce7;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 20px;
        }

        .player-info {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            flex: 1;
            text-align: center;
            border: 3px dashed;
            transition: all 0.3s ease;
        }

        .player-info.player1 {
            border-color: #74b9ff;
            background: linear-gradient(145deg, #dfe6ff, #f0f8ff);
        }

        .player-info.player2 {
            border-color: #ff7675;
            background: linear-gradient(145deg, #ffebee, #fff0f0);
        }

        .player-info.current-player {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .player-info h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
            color: #2d3436;
        }

        .player-info p {
            font-size: 1.1em;
            margin: 8px 0;
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(145deg, #a8e6cf, #dcedc1);
            color: #2d3436;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 3px solid #fff;
            min-width: 150px;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn.danger {
            background: linear-gradient(145deg, #ffaaa5, #ff8b94);
            color: white;
        }

        .btn.primary {
            background: linear-gradient(145deg, #84fab0, #8fd3f4);
            color: #2d3436;
        }

        .dice-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .dice {
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border: 3px solid #6c5ce7;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: #2d3436;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.1s ease;
        }

        .dice.rolling {
            animation: roll 0.5s ease-in-out;
        }

        @keyframes roll {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.2); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.2); }
        }

        .log {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            direction: rtl;
            text-align: right;
            border: 2px solid #dfe6e9;
        }

        .log-entry {
            padding: 8px 0;
            border-bottom: 1px dashed #dfe6e9;
            font-size: 16px;
            color: #2d3436;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            direction: rtl;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 30px;
            border-radius: 20px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 5px solid #fdcb6e;
            background: linear-gradient(145deg, #fff, #f7f7f7);
        }

        .close {
            color: #aaa;
            float: left;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #d63031;
        }

        .current-player {
            border: 4px solid #fdcb6e !important;
            box-shadow: 0 0 20px rgba(253, 203, 110, 0.5);
        }

        .property-price {
            font-size: 10px;
            color: #636e72;
            margin-top: 5px;
            font-weight: normal;
        }

        .emoji {
            font-size: 16px;
            margin-left: 5px;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„ */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .bounce {
            animation: bounce 0.5s infinite;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0;
            z-index: 1001;
            animation: confetti 3s ease-in-out;
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(500px) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">ğŸ° Ù…Ù…Ù„ÙƒØ© Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ°</h1>
        
        <div class="game-info">
            <div class="player-info player1 current-player" id="player-info-1">
                <h3>ğŸ‘¦ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„</h3>
                <p>ğŸ’µ Ø§Ù„Ø£Ù…ÙˆØ§Ù„: <span id="player1-money">1500</span> Ø±ÙŠØ§Ù„</p>
                <p>ğŸ  Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª: <span id="player1-properties">0</span></p>
            </div>
            <div class="player-info player2" id="player-info-2">
                <h3>ğŸ‘§ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
                <p>ğŸ’µ Ø§Ù„Ø£Ù…ÙˆØ§Ù„: <span id="player2-money">1500</span> Ø±ÙŠØ§Ù„</p>
                <p>ğŸ  Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª: <span id="player2-properties">0</span></p>
            </div>
        </div>

        <div class="board">
            <div class="property corner start">ğŸ<br>Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©<br>+200 Ø±ÙŠØ§Ù„</div>
            <div class="property corner jail">ğŸš“<br>Ø§Ù„Ø³Ø¬Ù†<br>Ø²ÙŠØ§Ø±Ø© ÙÙ‚Ø·</div>
            <div class="property corner parking">ğŸ<br>Ù‡Ø¯ÙŠØ©<br>Ù…Ø¬Ø§Ù†ÙŠØ©</div>
            <div class="property corner go-jail">ğŸ‘®â€â™‚ï¸<br>Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø³Ø¬Ù†</div>

            <div class="property side prop1" data-id="1">ğŸ Ø§Ù„Ø±ÙŠØ§Ø¶<br><span class="property-price">60 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop2" data-id="2">ğŸŠ Ø¬Ø¯Ø©<br><span class="property-price">60 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop3" data-id="3">ğŸ‡ Ø§Ù„Ø¯Ù…Ø§Ù…<br><span class="property-price">80 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop4" data-id="4">ğŸ“ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©<br><span class="property-price">80 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop5" data-id="5">ğŸ‰ Ù…ÙƒØ©<br><span class="property-price">100 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop6" data-id="6">ğŸŒ Ø§Ù„Ø·Ø§Ø¦Ù<br><span class="property-price">100 Ø±ÙŠØ§Ù„</span></div>

            <div class="property side prop7" data-id="7">ğŸš— Ø£Ø¨Ù‡Ø§<br><span class="property-price">120 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop8" data-id="8">ğŸš• ØªØ¨ÙˆÙƒ<br><span class="property-price">120 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop9" data-id="9">ğŸš™ Ø­Ø§Ø¦Ù„<br><span class="property-price">140 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop10" data-id="10">ğŸšŒ Ø§Ù„Ø¨Ø§Ø­Ø©<br><span class="property-price">140 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop11" data-id="11">âœˆï¸ Ø¹Ø±Ø¹Ø±<br><span class="property-price">160 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop12" data-id="12">ğŸš¢ Ø³ÙƒØ§ÙƒØ§<br><span class="property-price">160 Ø±ÙŠØ§Ù„</span></div>

            <div class="property side prop13" data-id="13">ğŸ« Ù†Ø¬Ø±Ø§Ù†<br><span class="property-price">180 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop14" data-id="14">ğŸ¥ Ø¬Ø§Ø²Ø§Ù†<br><span class="property-price">180 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop15" data-id="15">ğŸŸï¸ Ø§Ù„Ù‚ØµÙŠÙ…<br><span class="property-price">200 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop16" data-id="16">ğŸª Ø§Ù„Ø¬ÙˆÙ<br><span class="property-price">200 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop17" data-id="17">ğŸ­ Ø¹Ø³ÙŠØ±<br><span class="property-price">220 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop18" data-id="18">ğŸ¨ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©<br><span class="property-price">220 Ø±ÙŠØ§Ù„</span></div>

            <div class="property side prop19" data-id="19">ğŸª Ø§Ù„Ù‚Ø·ÙŠÙ<br><span class="property-price">240 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop20" data-id="20">ğŸ« Ø§Ù„Ø®Ø¨Ø±<br><span class="property-price">240 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop21" data-id="21">ğŸŒ´ ÙŠÙ†Ø¨Ø¹<br><span class="property-price">260 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop22" data-id="22">ğŸœï¸ Ø§Ù„Ø®Ø±Ø¬<br><span class="property-price">260 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop23" data-id="23">ğŸ•Œ Ø¨Ø±ÙŠØ¯Ø©<br><span class="property-price">280 Ø±ÙŠØ§Ù„</span></div>
            <div class="property side prop24" data-id="24">ğŸŒ… Ø§Ù„Ø£Ø­Ø³Ø§Ø¡<br><span class="property-price">280 Ø±ÙŠØ§Ù„</span></div>

            <div class="center-area">
                <div class="center-logo">Ù…Ù…Ù„ÙƒØ© Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ</div>
                <p>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</p>
                <div class="dice-area">
                    <div class="dice" id="dice1">1</div>
                    <div class="dice" id="dice2">1</div>
                </div>
                <p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="dice-total">2</span></p>
            </div>

            <div class="player player1" id="player1">1</div>
            <div class="player player2" id="player2">2</div>
        </div>

        <div class="controls">
            <button class="btn primary" id="roll-dice">ğŸ² Ø§Ø±Ù… Ø§Ù„Ù†Ø±Ø¯</button>
            <button class="btn danger" id="end-turn" disabled>â­ï¸ Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±</button>
            <button class="btn" id="reset-game">ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>

        <div class="log" id="game-log">
            <div class="log-entry"><strong>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…Ù…Ù„ÙƒØ© Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„!</strong></div>
            <div class="log-entry">ğŸ‘¦ Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„</div>
        </div>
    </div>

    <div id="buy-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="property-name">Ø§Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±</h2>
            <p>Ù‡Ù„ ØªØ±ÙŠØ¯ Ø´Ø±Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‚Ø§Ø±ØŸ</p>
            <p>ğŸ’° Ø§Ù„Ø³Ø¹Ø±: <span id="property-price-modal">0</span> Ø±ÙŠØ§Ù„</p>
            <button class="btn primary" id="buy-yes">ğŸ‘ Ù†Ø¹Ù…ØŒ Ø£Ø±ÙŠØ¯ Ø§Ù„Ø´Ø±Ø§Ø¡</button>
            <button class="btn danger" id="buy-no">ğŸ‘ Ù„Ø§ØŒ Ø´ÙƒØ±Ø§Ù‹</button>
        </div>
    </div>

    <div id="rent-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Ø¯ÙØ¹ Ø¥ÙŠØ¬Ø§Ø±</h2>
            <p id="rent-message">ÙŠØ¬Ø¨ Ø¯ÙØ¹ Ø¥ÙŠØ¬Ø§Ø±</p>
            <button class="btn danger" id="pay-rent">ğŸ’¸ Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</button>
        </div>
    </div>

    <div id="game-over-modal" class="modal">
        <div class="modal-content">
            <h2 style="color: #e84393;">ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ‰</h2>
            <p id="winner-message" style="font-size: 1.5em; margin: 20px 0;">Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ</p>
            <button class="btn primary" id="new-game">ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <script>
        class MonopolyGame {
            constructor() {
                this.currentPlayer = 1;
                this.players = {
                    1: { name: "ğŸ‘¦ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„", money: 1500, position: 0, properties: [], inJail: false },
                    2: { name: "ğŸ‘§ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ", money: 1500, position: 0, properties: [], inJail: false }
                };
                this.properties = this.initializeProperties();
                this.positions = this.initializePositions();
                this.gameLog = document.getElementById('game-log');
                this.currentPropertyId = null; // Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
                this.diceRolled = false;
                this.initializeEventListeners();
                this.updateDisplay();
                this.updatePlayerPositions();
                this.updateControlButtons();
            }

            initializeProperties() {
                const props = {};
                // Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„ Ù…Ø¹ Ø¥ÙŠÙ…ÙˆØ¬ÙŠØ§Øª
                const propertyData = [
                    { name: 'ğŸ Ø§Ù„Ø±ÙŠØ§Ø¶', price: 60, rent: 10 }, { name: 'ğŸŠ Ø¬Ø¯Ø©', price: 60, rent: 10 },
                    { name: 'ğŸ‡ Ø§Ù„Ø¯Ù…Ø§Ù…', price: 80, rent: 15 }, { name: 'ğŸ“ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©', price: 80, rent: 15 },
                    { name: 'ğŸ‰ Ù…ÙƒØ©', price: 100, rent: 20 }, { name: 'ğŸŒ Ø§Ù„Ø·Ø§Ø¦Ù', price: 100, rent: 20 },
                    { name: 'ğŸš— Ø£Ø¨Ù‡Ø§', price: 120, rent: 25 }, { name: 'ğŸš• ØªØ¨ÙˆÙƒ', price: 120, rent: 25 },
                    { name: 'ğŸš™ Ø­Ø§Ø¦Ù„', price: 140, rent: 30 }, { name: 'ğŸšŒ Ø§Ù„Ø¨Ø§Ø­Ø©', price: 140, rent: 30 },
                    { name: 'âœˆï¸ Ø¹Ø±Ø¹Ø±', price: 160, rent: 35 }, { name: 'ğŸš¢ Ø³ÙƒØ§ÙƒØ§', price: 160, rent: 35 },
                    { name: 'ğŸ« Ù†Ø¬Ø±Ø§Ù†', price: 180, rent: 40 }, { name: 'ğŸ¥ Ø¬Ø§Ø²Ø§Ù†', price: 180, rent: 40 },
                    { name: 'ğŸŸï¸ Ø§Ù„Ù‚ØµÙŠÙ…', price: 200, rent: 45 }, { name: 'ğŸª Ø§Ù„Ø¬ÙˆÙ', price: 200, rent: 45 },
                    { name: 'ğŸ­ Ø¹Ø³ÙŠØ±', price: 220, rent: 50 }, { name: 'ğŸ¨ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©', price: 220, rent: 50 },
                    { name: 'ğŸª Ø§Ù„Ù‚Ø·ÙŠÙ', price: 240, rent: 55 }, { name: 'ğŸ« Ø§Ù„Ø®Ø¨Ø±', price: 240, rent: 55 },
                    { name: 'ğŸŒ´ ÙŠÙ†Ø¨Ø¹', price: 260, rent: 60 }, { name: 'ğŸœï¸ Ø§Ù„Ø®Ø±Ø¬', price: 260, rent: 60 },
                    { name: 'ğŸ•Œ Ø¨Ø±ÙŠØ¯Ø©', price: 280, rent: 65 }, { name: 'ğŸŒ… Ø§Ù„Ø£Ø­Ø³Ø§Ø¡', price: 280, rent: 65 }
                ];
                
                for (let i = 0; i < propertyData.length; i++) {
                    props[i + 1] = {
                        name: propertyData[i].name,
                        price: propertyData[i].price,
                        rent: propertyData[i].rent,
                        owner: null
                    };
                }
                return props;
            }

            initializePositions() {
                // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹ Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ù…Ø¹ Ø§Ù„ØªØ®Ø·ÙŠØ· ÙÙŠ CSS
                // Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª 28 (4 Ø²ÙˆØ§ÙŠØ§ Ùˆ 24 Ø¹Ù‚Ø§Ø±)
                // 0: Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (start)
                // 1-6: Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØµÙ Ø§Ù„Ø³ÙÙ„ÙŠ
                // 7: Ø§Ù„Ø³Ø¬Ù† (jail)
                // 8-13: Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠÙ…Ù†
                // 14: Ø§Ù„Ù…ÙˆÙ‚Ù Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ (parking)
                // 15-20: Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØµÙ Ø§Ù„Ø¹Ù„ÙˆÙŠ
                // 21: Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø³Ø¬Ù† (go-jail)
                // 22-27: Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠØ³Ø±
                return [
                    {x: 510, y: 510}, // 0: Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (start)
                    {x: 430, y: 510}, {x: 350, y: 510}, {x: 270, y: 510}, {x: 190, y: 510}, {x: 110, y: 510}, {x: 30, y: 510}, // 1-6
                    {x: 30, y: 510},  // 7: Ø§Ù„Ø³Ø¬Ù† (jail) - Ù†ÙØ³ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¹Ù‚Ø§Ø± 6 (Ø§Ù„Ø·Ø§Ø¦Ù) Ù„ØªØµØ­ÙŠØ­ Ø§Ù„ØªØ®Ø·ÙŠØ·
                    {x: 30, y: 450}, {x: 30, y: 390}, {x: 30, y: 330}, {x: 30, y: 270}, {x: 30, y: 210}, {x: 30, y: 150}, // 8-13
                    {x: 30, y: 30},    // 14: Ø§Ù„Ù…ÙˆÙ‚Ù Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ (parking)
                    {x: 110, y: 30}, {x: 190, y: 30}, {x: 270, y: 30}, {x: 350, y: 30}, {x: 430, y: 30}, {x: 510, y: 30}, // 15-20
                    {x: 510, y: 30},  // 21: Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø³Ø¬Ù† (go-jail) - Ù†ÙØ³ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ø¹Ù‚Ø§Ø± 18 (Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©) Ù„ØªØµØ­ÙŠØ­ Ø§Ù„ØªØ®Ø·ÙŠØ·
                    {x: 510, y: 150}, {x: 510, y: 210}, {x: 510, y: 270}, {x: 510, y: 330}, {x: 510, y: 390}, {x: 510, y: 450}  // 22-27
                ];
            }

            initializeEventListeners() {
                document.getElementById('roll-dice').addEventListener('click', () => this.rollDice());
                document.getElementById('end-turn').addEventListener('click', () => this.endTurn());
                document.getElementById('reset-game').addEventListener('click', () => this.resetGame());
                document.getElementById('buy-yes').addEventListener('click', () => this.buyProperty());
                document.getElementById('buy-no').addEventListener('click', () => this.closeBuyModal());
                document.getElementById('pay-rent').addEventListener('click', () => this.payRent());
                document.getElementById('new-game').addEventListener('click', () => this.resetGame());
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
                document.querySelectorAll('.modal .close').forEach(close => {
                    close.addEventListener('click', (e) => {
                        e.target.closest('.modal').style.display = 'none';
                        this.updateControlButtons();
                    });
                });

                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
                window.addEventListener('click', (e) => {
                    const buyModal = document.getElementById('buy-modal');
                    const rentModal = document.getElementById('rent-modal');
                    const gameOverModal = document.getElementById('game-over-modal');

                    if (e.target === buyModal || e.target === rentModal || e.target === gameOverModal) {
                        e.target.style.display = 'none';
                        this.updateControlButtons();
                    }
                });
            }

            updateControlButtons() {
                const rollDiceBtn = document.getElementById('roll-dice');
                const endTurnBtn = document.getElementById('end-turn');

                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø£ÙŠ Ù…ÙˆØ¯Ø§Ù„ Ù…ÙØªÙˆØ­ØŒ ÙŠØ¬Ø¨ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                const isModalOpen = document.getElementById('buy-modal').style.display === 'block' ||
                                    document.getElementById('rent-modal').style.display === 'block' ||
                                    document.getElementById('game-over-modal').style.display === 'block';

                rollDiceBtn.disabled = this.diceRolled || isModalOpen;
                endTurnBtn.disabled = !this.diceRolled || isModalOpen;
            }

            addLog(message) {
                const entry = document.createElement('div');
                entry.classList.add('log-entry');
                entry.innerHTML = message;
                this.gameLog.prepend(entry);
                // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø¥Ø¯Ø®Ø§Ù„Ø§Øª Ø§Ù„Ø³Ø¬Ù„ Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¶ Ù†Ø¸ÙŠÙÙ‹Ø§
                if (this.gameLog.children.length > 10) {
                    this.gameLog.removeChild(this.gameLog.lastChild);
                }
                this.gameLog.scrollTop = 0;
            }

            updateDisplay() {
                document.getElementById('player1-money').textContent = this.players[1].money;
                document.getElementById('player1-properties').textContent = this.players[1].properties.length;
                document.getElementById('player2-money').textContent = this.players[2].money;
                document.getElementById('player2-properties').textContent = this.players[2].properties.length;

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ù†Ø´Ø·
                document.getElementById('player-info-1').classList.remove('current-player');
                document.getElementById('player-info-2').classList.remove('current-player');
                document.getElementById(`player-info-${this.currentPlayer}`).classList.add('current-player');

                // ØªØ­Ø¯ÙŠØ« Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù…Ù„ÙˆÙƒØ©
                document.querySelectorAll('.property').forEach(propElement => {
                    const id = propElement.dataset.id;
                    if (id && this.properties[id]) {
                        propElement.classList.remove('owned-1', 'owned-2');
                        if (this.properties[id].owner === 1) {
                            propElement.classList.add('owned-1');
                        } else if (this.properties[id].owner === 2) {
                            propElement.classList.add('owned-2');
                        }
                    }
                });

                this.updateControlButtons();
            }

            rollDice() {
                if (this.diceRolled) return;
                
                const dice1 = Math.floor(Math.random() * 6) + 1;
                const dice2 = Math.floor(Math.random() * 6) + 1;
                const total = dice1 + dice2;

                document.getElementById('dice1').classList.add('rolling');
                document.getElementById('dice2').classList.add('rolling');

                setTimeout(() => {
                    document.getElementById('dice1').textContent = dice1;
                    document.getElementById('dice2').textContent = dice2;
                    document.getElementById('dice-total').textContent = total;
                    document.getElementById('dice1').classList.remove('rolling');
                    document.getElementById('dice2').classList.remove('rolling');

                    this.addLog(`ğŸ² ${this.players[this.currentPlayer].name} Ø±Ù…Ù‰ Ø§Ù„Ù†Ø±Ø¯: ${dice1} + ${dice2} = ${total}`);
                    this.movePlayer(total);
                    this.diceRolled = true;
                    this.updateControlButtons();
                }, 500);
            }

            movePlayer(steps) {
                const player = this.players[this.currentPlayer];
                const oldPosition = player.position;
                player.position = (player.position + steps) % this.positions.length;

                // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                // Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ù…Ø±Ø¨Ø¹ 0 (Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©) Ø£Ø«Ù†Ø§Ø¡ Ø­Ø±ÙƒØªÙ‡ØŒ ÙØ¥Ù†Ù‡ ÙŠØ¬Ù…Ø¹ 200 Ø±ÙŠØ§Ù„
                if (player.position < oldPosition && player.position !== 0) {
                    player.money += 200;
                    this.addLog(`ğŸ’° ${player.name} Ù…Ø± Ø¨Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ø³ØªÙ„Ù… 200 Ø±ÙŠØ§Ù„!`);
                }

                // ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù…Ø±Ø¦ÙŠÙ‹Ø§
                this.updatePlayerPositions();

                // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø±ÙƒØ©
                setTimeout(() => {
                    this.handleLanding();
                    this.updateDisplay();
                }, 600);
            }

            updatePlayerPositions() {
                for (let i = 1; i <= 2; i++) {
                    const player = this.players[i];
                    const pos = this.positions[player.position];
                    const playerElement = document.getElementById(`player${i}`);
                    
                    if (playerElement && pos) {
                        // ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ· Ù„Ø¥Ø²Ø§Ø­Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø­ØªÙ‰ Ù„Ø§ ÙŠØªØ¯Ø§Ø®Ù„Ø§ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø±Ø¨Ø¹
                        playerElement.style.right = (pos.x - (i === 1 ? 40 : 15)) + 'px';
                        playerElement.style.top = (pos.y + 15) + 'px';
                    }
                }
            }

            handleLanding() {
                const player = this.players[this.currentPlayer];
                const position = player.position;
                const playerInfo = this.players[this.currentPlayer];

                let actionHandled = false;

                if (position === 0) { // Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                    this.addLog(`ğŸ ${player.name} ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©!`);
                    actionHandled = true;
                } else if (position === 7) { // Ø§Ù„Ø³Ø¬Ù† (Ø²ÙŠØ§Ø±Ø© ÙÙ‚Ø·)
                    this.addLog(`ğŸš“ ${player.name} ÙŠØ²ÙˆØ± Ø§Ù„Ø³Ø¬Ù†.`);
                    actionHandled = true;
                } else if (position === 14) { // Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© (Ù…ÙˆÙ‚Ù Ù…Ø¬Ø§Ù†ÙŠ)
                    const gift = Math.floor(Math.random() * 100) + 50; // Ù‡Ø¯ÙŠØ© Ø¨ÙŠÙ† 50 Ùˆ 149
                    player.money += gift;
                    this.addLog(`ğŸ ${player.name} Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ù‚ÙŠÙ…Ø© ${gift} Ø±ÙŠØ§Ù„!`);
                    actionHandled = true;
                } else if (position === 21) { // Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø³Ø¬Ù†
                    player.position = 7; // ÙŠÙ†Ù‚Ù„ Ø¥Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø³Ø¬Ù†
                    player.inJail = true;
                    this.updatePlayerPositions();
                    this.addLog(`ğŸ‘®â€â™‚ï¸ ${player.name} ØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù†!`);
                    actionHandled = true;
                } else {
                    const propertyId = this.getPropertyId(position);
                    if (propertyId) {
                        this.currentPropertyId = propertyId;
                        const property = this.properties[propertyId];

                        if (property.owner === null) {
                            // Ø§Ù„Ø¹Ù‚Ø§Ø± ØºÙŠØ± Ù…Ù…Ù„ÙˆÙƒØŒ Ø§Ø¹Ø±Ø¶ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø´Ø±Ø§Ø¡
                            document.getElementById('property-name').textContent = property.name;
                            document.getElementById('property-price-modal').textContent = property.price;
                            document.getElementById('buy-modal').style.display = 'block';
                            this.addLog(`ğŸ  ${player.name} Ù‡Ø¨Ø· Ø¹Ù„Ù‰ ${property.name}. Ù‡Ù„ ÙŠØ±ÙŠØ¯ Ø´Ø±Ø§Ø¡Ù‡Ø§ØŸ`);
                            actionHandled = true;
                        } else if (property.owner !== this.currentPlayer) {
                            // Ø§Ù„Ø¹Ù‚Ø§Ø± Ù…Ù…Ù„ÙˆÙƒ Ù„Ù„Ø§Ø¹Ø¨ Ø¢Ø®Ø±ØŒ Ø§Ø¯ÙØ¹ Ø¥ÙŠØ¬Ø§Ø±
                            const ownerPlayer = this.players[property.owner];
                            const rentAmount = property.rent;

                            if (playerInfo.money < rentAmount) {
                                this.addLog(`âš ï¸ ${player.name} Ù„Ø§ ÙŠÙ…ØªÙ„Ùƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„ Ù„Ø¯ÙØ¹ Ø¥ÙŠØ¬Ø§Ø± ${rentAmount} Ù„Ù€ ${property.name}. Ù„Ù‚Ø¯ Ø£ÙÙ„Ø³!`);
                                playerInfo.money = 0; // ÙŠØªÙ… Ø¥ÙÙ„Ø§Ø³ Ø§Ù„Ù„Ø§Ø¹Ø¨
                                this.checkGameOver();
                                actionHandled = true;
                            } else {
                                playerInfo.money -= rentAmount;
                                ownerPlayer.money += rentAmount;
                                document.getElementById('rent-message').textContent = `${player.name} Ù‡Ø¨Ø· Ø¹Ù„Ù‰ ${property.name} (Ù…Ù…Ù„ÙˆÙƒØ© Ù„Ù€ ${ownerPlayer.name}). ÙŠØ¬Ø¨ Ø£Ù† ØªØ¯ÙØ¹ ${rentAmount} Ø±ÙŠØ§Ù„ Ø¥ÙŠØ¬Ø§Ø±.`;
                                document.getElementById('rent-modal').style.display = 'block';
                                this.addLog(`ğŸ’¸ ${player.name} Ø¯ÙØ¹ ${rentAmount} Ø±ÙŠØ§Ù„ Ø¥ÙŠØ¬Ø§Ø± Ù„Ù€ ${ownerPlayer.name} Ø¹Ù„Ù‰ ${property.name}.`);
                                actionHandled = true;
                            }
                        } else {
                            // Ø§Ù„Ø¹Ù‚Ø§Ø± Ù…Ù…Ù„ÙˆÙƒ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
                            this.addLog(`ğŸ¡ ${player.name} Ù‡Ø¨Ø· Ø¹Ù„Ù‰ ${property.name} ÙˆÙ‡Ùˆ ÙŠÙ…Ù„ÙƒÙ‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„.`);
                            actionHandled = true;
                        }
                    }
                }
                if (actionHandled) {
                    this.updateDisplay();
                } else {
                    this.addLog(`${player.name} Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø®Ø§Øµ ØºÙŠØ± ØªÙØ§Ø¹Ù„ÙŠ.`);
                }
            }

            getPropertyId(boardPosition) {
                // ØªØ¹ÙŠÙŠÙ† Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ù„ÙˆØ­Ø© Ø¥Ù„Ù‰ Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª (data-id)
                // ÙŠØ¬Ø¨ Ø£Ù† ØªØªÙˆØ§ÙÙ‚ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù…Ø¹ Ø§Ù„Ù€ HTML Ùˆ CSS
                const mapping = {
                    1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, // Ø§Ù„ØµÙ Ø§Ù„Ø³ÙÙ„ÙŠ
                    8: 7, 9: 8, 10: 9, 11: 10, 12: 11, 13: 12, // Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠÙ…Ù†
                    15: 13, 16: 14, 17: 15, 18: 16, 19: 17, 20: 18, // Ø§Ù„ØµÙ Ø§Ù„Ø¹Ù„ÙˆÙŠ
                    22: 19, 23: 20, 24: 21, 25: 22, 26: 23, 27: 24 // Ø§Ù„ØµÙ Ø§Ù„Ø£ÙŠØ³Ø±
                };
                return mapping[boardPosition];
            }

            buyProperty() {
                const player = this.players[this.currentPlayer];
                const property = this.properties[this.currentPropertyId];

                if (player.money >= property.price) {
                    player.money -= property.price;
                    property.owner = this.currentPlayer;
                    player.properties.push(this.currentPropertyId);
                    this.addLog(`ğŸ‰ ${player.name} Ø§Ø´ØªØ±Ù‰ ${property.name} Ø¨Ù€ ${property.price} Ø±ÙŠØ§Ù„!`);
                    this.closeBuyModal();
                    this.updateDisplay();
                } else {
                    this.addLog(`âŒ ${player.name} Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„ Ù„Ø´Ø±Ø§Ø¡ ${property.name}. ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ${property.price} Ø±ÙŠØ§Ù„.`);
                    this.closeBuyModal(); // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡
                }
            }

            payRent() {
                document.getElementById('rent-modal').style.display = 'none';
                this.updateDisplay();
                this.checkGameOver(); // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ Ø¯ÙØ¹ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±
            }

            closeBuyModal() {
                document.getElementById('buy-modal').style.display = 'none';
                this.updateControlButtons();
            }

            endTurn() {
                this.diceRolled = false;
                this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
                this.addLog(`ğŸ”„ Ø¯ÙˆØ± ${this.players[this.currentPlayer].name}`);
                this.updateDisplay();
                this.updateControlButtons();
            }

            checkGameOver() {
                const player1Money = this.players[1].money;
                const player2Money = this.players[2].money;

                if (player1Money <= 0) {
                    this.showGameOverModal(this.players[2].name);
                } else if (player2Money <= 0) {
                    this.showGameOverModal(this.players[1].name);
                }
            }

            showGameOverModal(winnerName) {
                document.getElementById('winner-message').textContent = `Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ ${winnerName}!`;
                document.getElementById('game-over-modal').style.display = 'block';
                this.addConfetti();
                // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø­ØªÙ‰ ØªØ¨Ø¯Ø£ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
                document.getElementById('roll-dice').disabled = true;
                document.getElementById('end-turn').disabled = true;
            }

            addConfetti() {
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                    confetti.style.animationDelay = `${Math.random() * 2}s`;
                    document.body.appendChild(confetti);
                    confetti.addEventListener('animationend', () => {
                        confetti.remove();
                    });
                }
            }

            resetGame() {
                this.currentPlayer = 1;
                this.players = {
                    1: { name: "ğŸ‘¦ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„", money: 1500, position: 0, properties: [], inJail: false },
                    2: { name: "ğŸ‘§ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ", money: 1500, position: 0, properties: [], inJail: false }
                };
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
                for (const id in this.properties) {
                    this.properties[id].owner = null;
                }
                this.diceRolled = false;
                this.currentPropertyId = null;
                this.gameLog.innerHTML = `<div class="log-entry"><strong>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…Ù…Ù„ÙƒØ© Ù…ÙˆÙ†ÙˆØ¨ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„!</strong></div><div class="log-entry">ğŸ‘¦ Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„</div>`;
                
                document.getElementById('dice1').textContent = '1';
                document.getElementById('dice2').textContent = '1';
                document.getElementById('dice-total').textContent = '2';

                document.getElementById('buy-modal').style.display = 'none';
                document.getElementById('rent-modal').style.display = 'none';
                document.getElementById('game-over-modal').style.display = 'none';

                this.updateDisplay();
                this.updatePlayerPositions();
                this.updateControlButtons();
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            new MonopolyGame();
        });
    </script>
</body>
</html>