<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© ØªØµØ±ÙŠÙ Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Amiri', serif;
            background: linear-gradient(45deg, #FFB6C1, #87CEEB, #98FB98, #F0E68C);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            min-height: 100vh;
            padding: 15px;
            color: #2C3E50;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            padding: 30px;
            backdrop-filter: blur(15px);
            border: 5px solid #FF69B4;
            position: relative;
            overflow: hidden;
            flex-grow: 1; /* Allow container to grow and shrink */
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="%23FFB6C1" opacity="0.3"/><circle cx="80" cy="30" r="3" fill="%2387CEEB" opacity="0.3"/><circle cx="60" cy="70" r="2.5" fill="%2398FB98" opacity="0.3"/><circle cx="30" cy="80" r="2" fill="%23F0E68C" opacity="0.3"/><circle cx="70" cy="15" r="1.5" fill="%23FF69B4" opacity="0.3"/><circle cx="15" cy="60" r="2" fill="%23DDA0DD" opacity="0.3"/></svg>') repeat;
            pointer-events: none;
            z-index: 0;
        }

        .container > * {
            position: relative;
            z-index: 1;
        }

        h1 {
            text-align: center;
            color: #FF1493;
            margin-bottom: 25px;
            font-size: 3em;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
            animation: bounce 2s ease-in-out infinite;
            font-weight: 700;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .fun-icons {
            text-align: center;
            font-size: 2em;
            margin-bottom: 20px;
            animation: wiggle 3s ease-in-out infinite;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Amiri', serif;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, #32CD32, #228B22);
            color: white;
            border: 3px solid #90EE90;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #1E90FF, #0000CD);
            color: white;
            border: 3px solid #87CEEB;
        }

        .btn-danger {
            background: linear-gradient(45deg, #FF6347, #DC143C);
            color: white;
            border: 3px solid #FFA07A;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.3);
        }

        .verb-selector {
            text-align: center;
            margin-bottom: 20px;
        }

        .verb-selector select {
            padding: 15px 25px;
            font-size: 20px;
            border: 4px solid #FF69B4;
            border-radius: 25px;
            background: linear-gradient(45deg, #FFE4E1, #FFF0F5);
            min-width: 250px;
            font-family: 'Amiri', serif;
            font-weight: bold;
            color: #8B008B;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .score-board {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .score-item {
            background: linear-gradient(45deg, #FF69B4, #FF1493, #8A2BE2);
            color: white;
            padding: 20px 30px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            border: 4px solid #FFB6C1;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .score-item h3 {
            font-size: 16px;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .score-item span {
            font-size: 28px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .game-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            border: 5px solid #FF69B4;
        }

        .game-table th {
            background: linear-gradient(45deg, #FF1493, #8A2BE2, #4169E1);
            color: white;
            padding: 25px;
            font-size: 22px;
            font-weight: bold;
            text-align: center;
            border: none;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .game-table th::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #FFD700, #FFA500, #FF69B4);
        }

        .game-table td {
            padding: 18px;
            border: 3px solid #FFB6C1;
            text-align: center;
            font-size: 18px;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #FFF8DC, #FFFAF0);
        }

        .game-table tr:nth-child(even) td {
            background: linear-gradient(45deg, #F0F8FF, #E6E6FA);
        }

        .game-table tr:hover td {
            background: linear-gradient(45deg, #E0FFFF, #F0FFFF);
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .pronoun-cell {
            background: linear-gradient(45deg, #98FB98, #90EE90, #32CD32) !important;
            font-weight: bold;
            color: #006400 !important;
            font-size: 20px !important;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            border: 3px solid #228B22 !important;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 3px solid #FFB6C1;
            border-radius: 15px;
            font-size: 18px;
            text-align: center;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #FFF8DC, #FFFAF0);
            font-family: 'Amiri', serif;
            font-weight: bold;
            color: #8B008B;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #FF1493;
            box-shadow: 0 0 0 4px rgba(255, 20, 147, 0.2);
            transform: scale(1.05);
            background: linear-gradient(45deg, #FFF0F5, #FFE4E1);
        }

        input[type="text"]:disabled {
            background: linear-gradient(45deg, #D3D3D3, #C0C0C0);
            color: #696969;
            border-color: #A9A9A9;
            cursor: not-allowed;
        }

        .correct {
            background: linear-gradient(45deg, #90EE90, #32CD32) !important;
            border-color: #228B22 !important;
            color: #006400 !important;
            animation: correctBounce 0.8s ease-in-out;
        }

        @keyframes correctBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .incorrect {
            background: linear-gradient(45deg, #FFB6C1, #FF69B4) !important;
            border-color: #DC143C !important;
            color: #8B0000 !important;
            animation: shake 0.6s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .result-message {
            text-align: center;
            margin-top: 25px;
            padding: 20px;
            border-radius: 20px;
            font-size: 22px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: 4px solid;
            animation: resultPulse 1s ease-in-out;
        }

        @keyframes resultPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .success {
            background: linear-gradient(45deg, #90EE90, #32CD32);
            color: #006400;
            border-color: #228B22;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .error {
            background: linear-gradient(45deg, #FFB6C1, #FF69B4);
            color: #8B0000;
            border-color: #DC143C;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .heart {
            position: absolute;
            color: #FF69B4;
            font-size: 20px;
            animation: floatUp 3s ease-in-out forwards; /* Use forwards to keep it at end state */
            opacity: 0.7;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                border-width: 3px;
            }
            
            h1 {
                font-size: 2.2em;
            }
            
            .game-table {
                font-size: 14px;
                border-width: 3px;
            }
            
            .game-table th,
            .game-table td {
                padding: 12px 8px;
            }
            
            input[type="text"] {
                font-size: 16px;
                padding: 10px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <div class="container">
        <div class="fun-icons">ğŸŒŸ ğŸ“š âœ¨ ğŸˆ ğŸŒˆ â­</div>
        <h1>ğŸ¯ Ù„Ø¹Ø¨Ø© ØªØµØ±ÙŠÙ Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„Ù…Ø±Ø­Ø©</h1>
        
        <div class="verb-selector">
            <select id="verbSelect">
                <option value="ÙƒØªØ¨">ÙƒÙØªÙØ¨Ù - ÙŠÙÙƒÙ’ØªÙØ¨Ù (ÙƒØªØ¨)</option>
                <option value="Ù‚Ø±Ø£">Ù‚ÙØ±ÙØ£Ù - ÙŠÙÙ‚Ù’Ø±ÙØ£Ù (Ù‚Ø±Ø£)</option>
                <option value="Ø¯Ø±Ø³">Ø¯ÙØ±ÙØ³Ù - ÙŠÙØ¯Ù’Ø±ÙØ³Ù (Ø¯Ø±Ø³)</option>
                <option value="Ù„Ø¹Ø¨">Ù„ÙØ¹ÙØ¨Ù - ÙŠÙÙ„Ù’Ø¹ÙØ¨Ù (Ù„Ø¹Ø¨)</option>
                <option value="Ø£ÙƒÙ„">Ø£ÙÙƒÙÙ„Ù - ÙŠÙØ£Ù’ÙƒÙÙ„Ù (Ø£ÙƒÙ„)</option>
                <option value="Ø´Ø±Ø¨">Ø´ÙØ±ÙØ¨Ù - ÙŠÙØ´Ù’Ø±ÙØ¨Ù (Ø´Ø±Ø¨)</option>
                <option value="Ù†Ø§Ù…">Ù†ÙØ§Ù…Ù - ÙŠÙÙ†ÙØ§Ù…Ù (Ù†Ø§Ù…)</option>
                <option value="Ø°Ù‡Ø¨">Ø°ÙÙ‡ÙØ¨Ù - ÙŠÙØ°Ù’Ù‡ÙØ¨Ù (Ø°Ù‡Ø¨)</option>
            </select>
        </div>

        <div class="game-controls">
            <button class="btn btn-primary" onclick="checkAnswers()">âœ… ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
            <button class="btn btn-secondary" onclick="showAnswers()">ğŸ’¡ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
            <button class="btn btn-danger" onclick="resetGame()">ğŸ”„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>

        <div class="score-board">
            <div class="score-item">
                <h3>ğŸ‰ Ø§Ù„ØµØ­ÙŠØ­Ø©</h3>
                <span id="correctScore">0</span>
            </div>
            <div class="score-item">
                <h3>âŒ Ø§Ù„Ø®Ø§Ø·Ø¦Ø©</h3>
                <span id="incorrectScore">0</span>
            </div>
            <div class="score-item">
                <h3>ğŸ† Ø§Ù„Ù†Ø³Ø¨Ø©</h3>
                <span id="percentage">0%</span>
            </div>
        </div>

        <table class="game-table">
            <thead>
                <tr>
                    <th>ğŸ§‘ Ø§Ù„Ø¶Ù…Ø§Ø¦Ø±</th>
                    <th>â° Ø§Ù„Ù…Ø§Ø¶ÙŠ</th>
                    <th>â³ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹</th>
                    <th>ğŸ‘† Ø§Ù„Ø£Ù…Ø±</th>
                </tr>
            </thead>
            <tbody id="gameTableBody">
                </tbody>
        </table>

        <div id="resultMessage" class="result-message" style="display: none;"></div>
    </div>

    <script>
        const pronouns = [
            'Ø£Ù†Ø§', 'Ø£Ù†ØªÙ', 'Ø£Ù†ØªÙ', 'Ù‡Ùˆ', 'Ù‡ÙŠ', 
            'Ù†Ø­Ù†', 'Ø£Ù†ØªÙ…Ø§', 'Ø£Ù†ØªÙ…', 'Ø£Ù†ØªÙ†', 
            'Ù‡Ù…Ø§ (Ù…Ø°ÙƒØ±)', 'Ù‡Ù…Ø§ (Ù…Ø¤Ù†Ø«)', 'Ù‡Ù…', 'Ù‡Ù†'
        ];

        const verbConjugations = {
            'ÙƒØªØ¨': {
                past: ['ÙƒÙØªÙØ¨Ù’ØªÙ', 'ÙƒÙØªÙØ¨Ù’ØªÙ', 'ÙƒÙØªÙØ¨Ù’ØªÙ', 'ÙƒÙØªÙØ¨Ù', 'ÙƒÙØªÙØ¨ÙØªÙ’', 'ÙƒÙØªÙØ¨Ù’Ù†ÙØ§', 'ÙƒÙØªÙØ¨Ù’ØªÙÙ…ÙØ§', 'ÙƒÙØªÙØ¨Ù’ØªÙÙ…Ù’', 'ÙƒÙØªÙØ¨Ù’ØªÙÙ†ÙÙ‘', 'ÙƒÙØªÙØ¨ÙØ§', 'ÙƒÙØªÙØ¨ÙØªÙØ§', 'ÙƒÙØªÙØ¨ÙÙˆØ§', 'ÙƒÙØªÙØ¨Ù’Ù†Ù'],
                present: ['Ø£ÙÙƒÙ’ØªÙØ¨Ù', 'ØªÙÙƒÙ’ØªÙØ¨Ù', 'ØªÙÙƒÙ’ØªÙØ¨ÙÙŠÙ†Ù', 'ÙŠÙÙƒÙ’ØªÙØ¨Ù', 'ØªÙÙƒÙ’ØªÙØ¨Ù', 'Ù†ÙÙƒÙ’ØªÙØ¨Ù', 'ØªÙÙƒÙ’ØªÙØ¨ÙØ§Ù†Ù', 'ØªÙÙƒÙ’ØªÙØ¨ÙÙˆÙ†Ù', 'ØªÙÙƒÙ’ØªÙØ¨Ù’Ù†Ù', 'ÙŠÙÙƒÙ’ØªÙØ¨ÙØ§Ù†Ù', 'ØªÙÙƒÙ’ØªÙØ¨ÙØ§Ù†Ù', 'ÙŠÙÙƒÙ’ØªÙØ¨ÙÙˆÙ†Ù', 'ÙŠÙÙƒÙ’ØªÙØ¨Ù’Ù†Ù'],
                imperative: ['', 'Ø§ÙÙƒÙ’ØªÙØ¨Ù’', 'Ø§ÙÙƒÙ’ØªÙØ¨ÙÙŠ', '', '', '', 'Ø§ÙÙƒÙ’ØªÙØ¨ÙØ§', 'Ø§ÙÙƒÙ’ØªÙØ¨ÙÙˆØ§', 'Ø§ÙÙƒÙ’ØªÙØ¨Ù’Ù†Ù', '', '', '', '']
            },
            'Ù‚Ø±Ø£': {
                past: ['Ù‚ÙØ±ÙØ£Ù’ØªÙ', 'Ù‚ÙØ±ÙØ£Ù’ØªÙ', 'Ù‚ÙØ±ÙØ£Ù’ØªÙ', 'Ù‚ÙØ±ÙØ£Ù', 'Ù‚ÙØ±ÙØ£ÙØªÙ’', 'Ù‚ÙØ±ÙØ£Ù’Ù†ÙØ§', 'Ù‚ÙØ±ÙØ£Ù’ØªÙÙ…ÙØ§', 'Ù‚ÙØ±ÙØ£Ù’ØªÙÙ…Ù’', 'Ù‚ÙØ±ÙØ£Ù’ØªÙÙ†ÙÙ‘', 'Ù‚ÙØ±ÙØ¢', 'Ù‚ÙØ±ÙØ£ÙØªÙØ§', 'Ù‚ÙØ±ÙØ¤ÙÙˆØ§', 'Ù‚ÙØ±ÙØ£Ù’Ù†Ù'],
                present: ['Ø£ÙÙ‚Ù’Ø±ÙØ£Ù', 'ØªÙÙ‚Ù’Ø±ÙØ£Ù', 'ØªÙÙ‚Ù’Ø±ÙØ¦ÙÙŠÙ†Ù', 'ÙŠÙÙ‚Ù’Ø±ÙØ£Ù', 'ØªÙÙ‚Ù’Ø±ÙØ£Ù', 'Ù†ÙÙ‚Ù’Ø±ÙØ£Ù', 'ØªÙÙ‚Ù’Ø±ÙØ¢Ù†Ù', 'ØªÙÙ‚Ù’Ø±ÙØ¤ÙÙˆÙ†Ù', 'ØªÙÙ‚Ù’Ø±ÙØ£Ù’Ù†Ù', 'ÙŠÙÙ‚Ù’Ø±ÙØ¢Ù†Ù', 'ØªÙÙ‚Ù’Ø±ÙØ¢Ù†Ù', 'ÙŠÙÙ‚Ù’Ø±ÙØ¤ÙÙˆÙ†Ù', 'ÙŠÙÙ‚Ù’Ø±ÙØ£Ù’Ù†Ù'],
                imperative: ['', 'Ø§ÙÙ‚Ù’Ø±ÙØ£Ù’', 'Ø§ÙÙ‚Ù’Ø±ÙØ¦ÙÙŠ', '', '', '', 'Ø§ÙÙ‚Ù’Ø±ÙØ¢', 'Ø§ÙÙ‚Ù’Ø±ÙØ¤ÙÙˆØ§', 'Ø§ÙÙ‚Ù’Ø±ÙØ£Ù’Ù†Ù', '', '', '', '']
            },
            'Ø¯Ø±Ø³': {
                past: ['Ø¯ÙØ±ÙØ³Ù’ØªÙ', 'Ø¯ÙØ±ÙØ³Ù’ØªÙ', 'Ø¯ÙØ±ÙØ³Ù’ØªÙ', 'Ø¯ÙØ±ÙØ³Ù', 'Ø¯ÙØ±ÙØ³ÙØªÙ’', 'Ø¯ÙØ±ÙØ³Ù’Ù†ÙØ§', 'Ø¯ÙØ±ÙØ³Ù’ØªÙÙ…ÙØ§', 'Ø¯ÙØ±ÙØ³Ù’ØªÙÙ…Ù’', 'Ø¯ÙØ±ÙØ³Ù’ØªÙÙ†ÙÙ‘', 'Ø¯ÙØ±ÙØ³ÙØ§', 'Ø¯ÙØ±ÙØ³ÙØªÙØ§', 'Ø¯ÙØ±ÙØ³ÙÙˆØ§', 'Ø¯ÙØ±ÙØ³Ù’Ù†Ù'],
                present: ['Ø£ÙØ¯Ù’Ø±ÙØ³Ù', 'ØªÙØ¯Ù’Ø±ÙØ³Ù', 'ØªÙØ¯Ù’Ø±ÙØ³ÙÙŠÙ†Ù', 'ÙŠÙØ¯Ù’Ø±ÙØ³Ù', 'ØªÙØ¯Ù’Ø±ÙØ³Ù', 'Ù†ÙØ¯Ù’Ø±ÙØ³Ù', 'ØªÙØ¯Ù’Ø±ÙØ³ÙØ§Ù†Ù', 'ØªÙØ¯Ù’Ø±ÙØ³ÙÙˆÙ†Ù', 'ØªÙØ¯Ù’Ø±ÙØ³Ù’Ù†Ù', 'ÙŠÙØ¯Ù’Ø±ÙØ³ÙØ§Ù†Ù', 'ØªÙØ¯Ù’Ø±ÙØ³ÙØ§Ù†Ù', 'ÙŠÙØ¯Ù’Ø±ÙØ³ÙÙˆÙ†Ù', 'ÙŠÙØ¯Ù’Ø±ÙØ³Ù’Ù†Ù'],
                imperative: ['', 'Ø§ÙØ¯Ù’Ø±ÙØ³Ù’', 'Ø§ÙØ¯Ù’Ø±ÙØ³ÙÙŠ', '', '', '', 'Ø§ÙØ¯Ù’Ø±ÙØ³ÙØ§', 'Ø§ÙØ¯Ù’Ø±ÙØ³ÙÙˆØ§', 'Ø§ÙØ¯Ù’Ø±ÙØ³Ù’Ù†Ù', '', '', '', '']
            },
            'Ù„Ø¹Ø¨': {
                past: ['Ù„ÙØ¹ÙØ¨Ù’ØªÙ', 'Ù„ÙØ¹ÙØ¨Ù’ØªÙ', 'Ù„ÙØ¹ÙØ¨Ù’ØªÙ', 'Ù„ÙØ¹ÙØ¨Ù', 'Ù„ÙØ¹ÙØ¨ÙØªÙ’', 'Ù„ÙØ¹ÙØ¨Ù’Ù†ÙØ§', 'Ù„ÙØ¹ÙØ¨Ù’ØªÙÙ…ÙØ§', 'Ù„ÙØ¹ÙØ¨Ù’ØªÙÙ…Ù’', 'Ù„ÙØ¹ÙØ¨Ù’ØªÙÙ†ÙÙ‘', 'Ù„ÙØ¹ÙØ¨ÙØ§', 'Ù„ÙØ¹ÙØ¨ÙØªÙØ§', 'Ù„ÙØ¹ÙØ¨ÙÙˆØ§', 'Ù„ÙØ¹ÙØ¨Ù’Ù†Ù'],
                present: ['Ø£ÙÙ„Ù’Ø¹ÙØ¨Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨ÙÙŠÙ†Ù', 'ÙŠÙÙ„Ù’Ø¹ÙØ¨Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨Ù', 'Ù†ÙÙ„Ù’Ø¹ÙØ¨Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨ÙØ§Ù†Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨ÙÙˆÙ†Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨Ù’Ù†Ù', 'ÙŠÙÙ„Ù’Ø¹ÙØ¨ÙØ§Ù†Ù', 'ØªÙÙ„Ù’Ø¹ÙØ¨ÙØ§Ù†Ù', 'ÙŠÙÙ„Ù’Ø¹ÙØ¨ÙÙˆÙ†Ù', 'ÙŠÙÙ„Ù’Ø¹ÙØ¨Ù’Ù†Ù'],
                imperative: ['', 'Ø§ÙÙ„Ù’Ø¹ÙØ¨Ù’', 'Ø§ÙÙ„Ù’Ø¹ÙØ¨ÙÙŠ', '', '', '', 'Ø§ÙÙ„Ù’Ø¹ÙØ¨ÙØ§', 'Ø§ÙÙ„Ù’Ø¹ÙØ¨ÙÙˆØ§', 'Ø§ÙÙ„Ù’Ø¹ÙØ¨Ù’Ù†Ù', '', '', '', '']
            },
            'Ø£ÙƒÙ„': {
                past: ['Ø£ÙÙƒÙÙ„Ù’ØªÙ', 'Ø£ÙÙƒÙÙ„Ù’ØªÙ', 'Ø£ÙÙƒÙÙ„Ù’ØªÙ', 'Ø£ÙÙƒÙÙ„Ù', 'Ø£ÙÙƒÙÙ„ÙØªÙ’', 'Ø£ÙÙƒÙÙ„Ù’Ù†ÙØ§', 'Ø£ÙÙƒÙÙ„Ù’ØªÙÙ…ÙØ§', 'Ø£ÙÙƒÙÙ„Ù’ØªÙÙ…Ù’', 'Ø£ÙÙƒÙÙ„Ù’ØªÙÙ†ÙÙ‘', 'Ø£ÙÙƒÙÙ„ÙØ§', 'Ø£ÙÙƒÙÙ„ÙØªÙØ§', 'Ø£ÙÙƒÙÙ„ÙÙˆØ§', 'Ø£ÙÙƒÙÙ„Ù’Ù†Ù'],
                present: ['Ø¢ÙƒÙÙ„Ù', 'ØªÙØ£Ù’ÙƒÙÙ„Ù', 'ØªÙØ£Ù’ÙƒÙÙ„ÙÙŠÙ†Ù', 'ÙŠÙØ£Ù’ÙƒÙÙ„Ù', 'ØªÙØ£Ù’ÙƒÙÙ„Ù', 'Ù†ÙØ£Ù’ÙƒÙÙ„Ù', 'ØªÙØ£Ù’ÙƒÙÙ„ÙØ§Ù†Ù', 'ØªÙØ£Ù’ÙƒÙÙ„ÙÙˆÙ†Ù', 'ØªÙØ£Ù’ÙƒÙÙ„Ù’Ù†Ù', 'ÙŠÙØ£Ù’ÙƒÙÙ„ÙØ§Ù†Ù', 'ØªÙØ£Ù’ÙƒÙÙ„ÙØ§Ù†Ù', 'ÙŠÙØ£Ù’ÙƒÙÙ„ÙÙˆÙ†Ù', 'ÙŠÙØ£Ù’ÙƒÙÙ„Ù’Ù†Ù'],
                imperative: ['', 'ÙƒÙÙ„Ù’', 'ÙƒÙÙ„ÙÙŠ', '', '', '', 'ÙƒÙÙ„ÙØ§', 'ÙƒÙÙ„ÙÙˆØ§', 'ÙƒÙÙ„Ù’Ù†Ù', '', '', '', '']
            },
            'Ø´Ø±Ø¨': {
                past: ['Ø´ÙØ±ÙØ¨Ù’ØªÙ', 'Ø´ÙØ±ÙØ¨Ù’ØªÙ', 'Ø´ÙØ±ÙØ¨Ù’ØªÙ', 'Ø´ÙØ±ÙØ¨Ù', 'Ø´ÙØ±ÙØ¨ÙØªÙ’', 'Ø´ÙØ±ÙØ¨Ù’Ù†ÙØ§', 'Ø´ÙØ±ÙØ¨Ù’ØªÙÙ…ÙØ§', 'Ø´ÙØ±ÙØ¨Ù’ØªÙÙ…Ù’', 'Ø´ÙØ±ÙØ¨Ù’ØªÙÙ†ÙÙ‘', 'Ø´ÙØ±ÙØ¨ÙØ§', 'Ø´ÙØ±ÙØ¨ÙØªÙØ§', 'Ø´ÙØ±ÙØ¨ÙÙˆØ§', 'Ø´ÙØ±ÙØ¨Ù’Ù†Ù'],
                present: ['Ø£ÙØ´Ù’Ø±ÙØ¨Ù', 'ØªÙØ´Ù’Ø±ÙØ¨Ù', 'ØªÙØ´Ù’Ø±ÙØ¨ÙÙŠÙ†Ù', 'ÙŠÙØ´Ù’Ø±ÙØ¨Ù', 'ØªÙØ´Ù’Ø±ÙØ¨Ù', 'Ù†ÙØ´Ù’Ø±ÙØ¨Ù', 'ØªÙØ´Ù’Ø±ÙØ¨ÙØ§Ù†Ù', 'ØªÙØ´Ù’Ø±ÙØ¨ÙÙˆÙ†Ù', 'ØªÙØ´Ù’Ø±ÙØ¨Ù’Ù†Ù', 'ÙŠÙØ´Ù’Ø±ÙØ¨ÙØ§Ù†Ù', 'ØªÙØ´Ù’Ø±ÙØ¨ÙØ§Ù†Ù', 'ÙŠÙØ´Ù’Ø±ÙØ¨ÙÙˆÙ†Ù', 'ÙŠÙØ´Ù’Ø±ÙØ¨Ù’Ù†Ù'],
                imperative: ['', 'Ø§ÙØ´Ù’Ø±ÙØ¨Ù’', 'Ø§ÙØ´Ù’Ø±ÙØ¨ÙÙŠ', '', '', '', 'Ø§ÙØ´Ù’Ø±ÙØ¨ÙØ§', 'Ø§ÙØ´Ù’Ø±ÙØ¨ÙÙˆØ§', 'Ø§ÙØ´Ù’Ø±ÙØ¨Ù’Ù†Ù', '', '', '', '']
            },
            'Ù†Ø§Ù…': {
                past: ['Ù†ÙÙ…Ù’ØªÙ', 'Ù†ÙÙ…Ù’ØªÙ', 'Ù†ÙÙ…Ù’ØªÙ', 'Ù†ÙØ§Ù…Ù', 'Ù†ÙØ§Ù…ÙØªÙ’', 'Ù†ÙÙ…Ù’Ù†ÙØ§', 'Ù†ÙÙ…Ù’ØªÙÙ…ÙØ§', 'Ù†ÙÙ…Ù’ØªÙÙ…Ù’', 'Ù†ÙÙ…Ù’ØªÙÙ†ÙÙ‘', 'Ù†ÙØ§Ù…ÙØ§', 'Ù†ÙØ§Ù…ÙØªÙØ§', 'Ù†ÙØ§Ù…ÙÙˆØ§', 'Ù†ÙÙ…Ù’Ù†Ù'],
                present: ['Ø£ÙÙ†ÙØ§Ù…Ù', 'ØªÙÙ†ÙØ§Ù…Ù', 'ØªÙÙ†ÙØ§Ù…ÙÙŠÙ†Ù', 'ÙŠÙÙ†ÙØ§Ù…Ù', 'ØªÙÙ†ÙØ§Ù…Ù', 'Ù†ÙÙ†ÙØ§Ù…Ù', 'ØªÙÙ†ÙØ§Ù…ÙØ§Ù†Ù', 'ØªÙÙ†ÙØ§Ù…ÙÙˆÙ†Ù', 'ØªÙÙ†ÙÙ…Ù’Ù†Ù', 'ÙŠÙÙ†ÙØ§Ù…ÙØ§Ù†Ù', 'ØªÙÙ†ÙØ§Ù…ÙØ§Ù†Ù', 'ÙŠÙÙ†ÙØ§Ù…ÙÙˆÙ†Ù', 'ÙŠÙÙ†ÙÙ…Ù’Ù†Ù'],
                imperative: ['', 'Ù†ÙÙ…Ù’', 'Ù†ÙØ§Ù…ÙÙŠ', '', '', '', 'Ù†ÙØ§Ù…ÙØ§', 'Ù†ÙØ§Ù…ÙÙˆØ§', 'Ù†ÙÙ…Ù’Ù†Ù', '', '', '', '']
            },
            'Ø°Ù‡Ø¨': {
                past: ['Ø°ÙÙ‡ÙØ¨Ù’ØªÙ', 'Ø°ÙÙ‡ÙØ¨Ù’ØªÙ', 'Ø°ÙÙ‡ÙØ¨Ù’ØªÙ', 'Ø°ÙÙ‡ÙØ¨Ù', 'Ø°ÙÙ‡ÙØ¨ÙØªÙ’', 'Ø°ÙÙ‡ÙØ¨Ù’Ù†ÙØ§', 'Ø°ÙÙ‡ÙØ¨Ù’ØªÙÙ…ÙØ§', 'Ø°ÙÙ‡ÙØ¨Ù’ØªÙÙ…Ù’', 'Ø°ÙÙ‡ÙØ¨Ù’ØªÙÙ†ÙÙ‘', 'Ø°ÙÙ‡ÙØ¨ÙØ§', 'Ø°ÙÙ‡ÙØ¨ÙØªÙØ§', 'Ø°ÙÙ‡ÙØ¨ÙÙˆØ§', 'Ø°ÙÙ‡ÙØ¨Ù’Ù†Ù'],
                present: ['Ø£ÙØ°Ù’Ù‡ÙØ¨Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨ÙÙŠÙ†Ù', 'ÙŠÙØ°Ù’Ù‡ÙØ¨Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨Ù', 'Ù†ÙØ°Ù’Ù‡ÙØ¨Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨ÙØ§Ù†Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨ÙÙˆÙ†Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨Ù’Ù†Ù', 'ÙŠÙØ°Ù’Ù‡ÙØ¨ÙØ§Ù†Ù', 'ØªÙØ°Ù’Ù‡ÙØ¨ÙØ§Ù†Ù', 'ÙŠÙØ°Ù’Ù‡ÙØ¨ÙÙˆÙ†Ù', 'ÙŠÙØ°Ù’Ù‡ÙØ¨Ù’Ù†Ù'],
                imperative: ['', 'Ø§ÙØ°Ù’Ù‡ÙØ¨Ù’', 'Ø§ÙØ°Ù’Ù‡ÙØ¨ÙÙŠ', '', '', '', 'Ø§ÙØ°Ù’Ù‡ÙØ¨ÙØ§', 'Ø§ÙØ°Ù’Ù‡ÙØ¨ÙÙˆØ§', 'Ø§ÙØ°Ù’Ù‡ÙØ¨Ù’Ù†Ù', '', '', '', '']
            }
        };

        const verbSelect = document.getElementById('verbSelect');
        const gameTableBody = document.getElementById('gameTableBody');
        const correctScoreSpan = document.getElementById('correctScore');
        const incorrectScoreSpan = document.getElementById('incorrectScore');
        const percentageSpan = document.getElementById('percentage');
        const resultMessageDiv = document.getElementById('resultMessage');
        const floatingHeartsDiv = document.getElementById('floatingHearts');

        let correctAnswersCount = 0;
        let incorrectAnswersCount = 0;

        // Function to normalize Arabic text for comparison (remove diacritics, etc.)
        function normalizeArabic(text) {
            if (!text) return '';
            // Remove diacritics (harakat)
            text = text.replace(/[\u064B-\u0652\u0670]/g, ''); 
            // Normalize Hamza variants
            text = text.replace(/[Ø¥Ø£Ø¢]/g, 'Ø§');
            // Normalize Ta Marbuta and Ha
            text = text.replace(/Ø©/g, 'Ù‡');
            // Normalize Alif Maksura and Ya
            text = text.replace(/Ù‰/g, 'ÙŠ');
            return text.trim();
        }

        // Function to generate the game table
        function generateTable() {
            const selectedVerb = verbSelect.value;
            const conjugations = verbConjugations[selectedVerb];
            gameTableBody.innerHTML = ''; // Clear previous table

            pronouns.forEach((pronoun, index) => {
                const row = document.createElement('tr');

                // Pronoun cell
                const pronounCell = document.createElement('td');
                pronounCell.className = 'pronoun-cell';
                pronounCell.textContent = pronoun;
                row.appendChild(pronounCell);

                // Past tense input
                const pastCell = document.createElement('td');
                const pastInput = document.createElement('input');
                pastInput.type = 'text';
                pastInput.id = `past-${index}`;
                pastInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØµØ±ÙŠÙ';
                pastInput.dataset.correct = conjugations.past[index]; // Store correct answer
                pastCell.appendChild(pastInput);
                row.appendChild(pastCell);

                // Present tense input
                const presentCell = document.createElement('td');
                const presentInput = document.createElement('input');
                presentInput.type = 'text';
                presentInput.id = `present-${index}`;
                presentInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØµØ±ÙŠÙ';
                presentInput.dataset.correct = conjugations.present[index]; // Store correct answer
                presentCell.appendChild(presentInput);
                row.appendChild(presentCell);

                // Imperative tense input
                const imperativeCell = document.createElement('td');
                const imperativeInput = document.createElement('input');
                imperativeInput.type = 'text';
                imperativeInput.id = `imperative-${index}`;
                imperativeInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØµØ±ÙŠÙ';
                imperativeInput.dataset.correct = conjugations.imperative[index]; // Store correct answer
                
                // Disable imperative for pronouns that don't have it (Ø£Ù†Ø§ØŒ Ù†Ø­Ù†ØŒ Ù‡ÙˆØŒ Ù‡ÙŠØŒ Ù‡Ù…Ø§ØŒ Ù‡Ù…ØŒ Ù‡Ù†)
                if (['Ø£Ù†Ø§', 'Ù‡Ùˆ', 'Ù‡ÙŠ', 'Ù†Ø­Ù†', 'Ù‡Ù…Ø§ (Ù…Ø°ÙƒØ±)', 'Ù‡Ù…Ø§ (Ù…Ø¤Ù†Ø«)', 'Ù‡Ù…', 'Ù‡Ù†'].includes(pronoun)) {
                    imperativeInput.disabled = true;
                    imperativeInput.value = ''; // Ensure it's empty
                    imperativeInput.placeholder = 'ØºÙŠØ± Ù…ØªØ§Ø­';
                }
                imperativeCell.appendChild(imperativeInput);
                row.appendChild(imperativeCell);

                gameTableBody.appendChild(row);
            });
            resetScores(); // Reset scores when table is generated
            resultMessageDiv.style.display = 'none'; // Hide message
            resultMessageDiv.className = 'result-message'; // Reset classes
        }

        // Function to check answers
        function checkAnswers() {
            correctAnswersCount = 0;
            incorrectAnswersCount = 0;
            const totalInputs = document.querySelectorAll('#gameTableBody input[type="text"]:not(:disabled)'); // Only count enabled inputs

            totalInputs.forEach(input => {
                const userAnswer = normalizeArabic(input.value);
                const correctAnswer = normalizeArabic(input.dataset.correct);

                input.classList.remove('correct', 'incorrect'); // Remove previous classes

                if (userAnswer === correctAnswer && userAnswer !== '') {
                    input.classList.add('correct');
                    correctAnswersCount++;
                    createHeart(input.getBoundingClientRect()); // Show heart on correct answer
                } else if (userAnswer !== '') {
                    input.classList.add('incorrect');
                    incorrectAnswersCount++;
                } else {
                    // If empty, just remove classes, don't count as incorrect immediately unless specified
                    // For now, empty answers are neither correct nor incorrect in score
                }
            });

            updateScores();

            if (correctAnswersCount === totalInputs.length) {
                resultMessageDiv.textContent = 'Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ Ø£Ø¬Ø¨Øª Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­! ğŸ‰';
                resultMessageDiv.className = 'result-message success';
            } else if (correctAnswersCount > 0 || incorrectAnswersCount > 0) {
                resultMessageDiv.textContent = `Ù„Ù‚Ø¯ Ø£Ø¬Ø¨Øª Ø¹Ù„Ù‰ ${correctAnswersCount} Ø³Ø¤Ø§Ù„ ØµØ­ÙŠØ­ Ùˆ ${incorrectAnswersCount} Ø³Ø¤Ø§Ù„ Ø®Ø§Ø·Ø¦. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ğŸ¤”`;
                resultMessageDiv.className = 'result-message error';
            } else {
                resultMessageDiv.textContent = 'Ù„Ù… ØªÙ‚Ù… Ø¨Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£ÙŠ Ø³Ø¤Ø§Ù„ Ø¨Ø¹Ø¯. Ù‡ÙŠØ§ Ø¨Ù†Ø§ Ù†Ø¨Ø¯Ø£! ğŸ’ª';
                resultMessageDiv.className = 'result-message';
            }
            resultMessageDiv.style.display = 'block';
        }

        // Function to show correct answers
        function showAnswers() {
            const allInputs = document.querySelectorAll('#gameTableBody input[type="text"]');
            allInputs.forEach(input => {
                input.value = input.dataset.correct;
                input.classList.remove('incorrect'); // Remove incorrect class if present
                input.classList.add('correct');
                input.disabled = true; // Make inputs read-only after showing answers
            });
            resultMessageDiv.textContent = 'Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©! ØªØ°ÙƒØ±Ù‡Ø§ Ø¬ÙŠØ¯Ø§Ù‹! ğŸ§ ';
            resultMessageDiv.className = 'result-message success';
            resultMessageDiv.style.display = 'block';
        }

        // Function to reset the game
        function resetGame() {
            generateTable(); // Regenerate table to clear all inputs and styles
            resetScores();
            resultMessageDiv.style.display = 'none';
        }

        // Function to update score display
        function updateScores() {
            correctScoreSpan.textContent = correctAnswersCount;
            incorrectScoreSpan.textContent = incorrectAnswersCount;
            const totalAttempted = correctAnswersCount + incorrectAnswersCount;
            const percentage = totalAttempted > 0 ? ((correctAnswersCount / totalAttempted) * 100).toFixed(0) : 0;
            percentageSpan.textContent = `${percentage}%`;
        }

        // Function to reset scores
        function resetScores() {
            correctAnswersCount = 0;
            incorrectAnswersCount = 0;
            updateScores();
        }

        // Floating hearts animation
        function createHeart(rect) {
            const heart = document.createElement('span');
            heart.classList.add('heart');
            heart.innerHTML = 'ğŸ’–'; // Or any other emoji like 'âœ¨', 'â­'
            
            // Position the heart near the correct input
            heart.style.left = `${rect.left + rect.width / 2}px`;
            heart.style.top = `${rect.top + rect.height / 2}px`;
            
            floatingHeartsDiv.appendChild(heart);

            heart.addEventListener('animationend', () => {
                heart.remove();
            });
        }

        // Initial table generation when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            generateTable();
        });

        // Listen for changes in the verb selection
        verbSelect.addEventListener('change', generateTable);
    </script>
</body>
</html>