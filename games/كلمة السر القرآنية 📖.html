<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©: Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ù„Ù‰</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Ø®ØµØ§Ø¦Øµ CSS Ù…Ø®ØµØµØ© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø«ÙŠÙ… */
        :root {
            --primary-bg: #e0f2f7; /* Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ ÙØ§ØªØ­ */
            --card-bg: #f5f5f5; /* Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
            --header-color: #2c3e50; /* Ø£Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ† */
            --accent-color: #f39c12; /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ Ø°Ù‡Ø¨ÙŠ */
            --button-primary: #2ecc71; /* Ø£Ø®Ø¶Ø± Ø²Ù…Ø±Ø¯ÙŠ */
            --button-hover: #27ae60;
            --feedback-correct: #28a745; /* Ø£Ø®Ø¶Ø± */
            --feedback-wrong: #dc3545; /* Ø£Ø­Ù…Ø± */
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.2);
            --border-radius: 10px;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(to bottom right, var(--primary-bg), #b3e0ff); /* Ø®Ù„ÙÙŠØ© Ù…ØªØ¯Ø±Ø¬Ø© */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--header-color);
            direction: rtl; /* ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø± Ù„ÙƒØ§Ù…Ù„ Ø§Ù„Ø¬Ø³Ù… */
            text-align: right; /* Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© */
            overflow-x: hidden; /* Ù„Ù…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø£ÙÙ‚ÙŠ */
        }

        .game-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px var(--shadow-medium);
            padding: 30px 40px;
            max-width: 800px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden; /* Ù„Ø£ÙŠ ØªØ£Ø«ÙŠØ±Ø§Øª ØªØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­ÙˆØ§Ù */
        }

        h1 {
            font-family: 'Amiri', serif;
            font-size: 3rem;
            color: var(--header-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 5px var(--shadow-light);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 30px;
        }

        .verse-display {
            min-height: 80px;
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            background-color: var(--card-bg);
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px var(--shadow-light);
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background-color: #f0f8ff; /* AliceBlue */
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: 0 5px 15px var(--shadow-light);
        }

        /* Ù†Ù…Ø· Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ */
        .word-card {
            background-color: var(--accent-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: grab; /* ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø£Ù†Ù‡Ø§ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ */
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            user-select: none; /* Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ */
            direction: rtl; /* Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†Øµ Ø§Ù„ØµØ­ÙŠØ­ */
        }

        .word-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.3);
        }

        .word-card:active {
            cursor: grabbing;
            transform: scale(0.98);
        }

        /* Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù†Ø§Ø¦Ø¨ Ù„Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø© */
        .word-placeholder {
            height: 50px; /* Ù†ÙØ³ Ø§Ø±ØªÙØ§Ø¹ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ù„Ù„Ù…Ø­Ø§Ø°Ø§Ø© */
            width: 100px; /* Ø¹Ø±Ø¶ Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø±Ø¤ÙŠØ© */
            background-color: #e9ecef;
            border: 1px dashed #adb5bd;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #6c757d;
            font-size: 1rem;
            padding: 5px 10px;
            opacity: 0.7;
            transition: all 0.2s;
        }

        /* Ù†Ù…Ø· Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¹Ù†Ø¯ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ */
        .verse-display .word-card {
            background-color: #4CAF50; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ù„Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø© */
            cursor: pointer; /* ÙŠÙ…ÙƒÙ† Ø³Ø­Ø¨Ù‡Ø§ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ */
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .action-button {
            background-color: var(--button-primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-button:hover {
            background-color: var(--button-hover);
            transform: translateY(-2px);
        }

        .action-button:active {
            transform: translateY(0);
        }

        .action-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        .next-button {
            background-color: #3498db; /* Ø£Ø²Ø±Ù‚ Ù„Ù„Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ */
        }
        .next-button:hover {
            background-color: #2980b9;
        }

        .reset-button {
            background-color: #e74c3c; /* Ø£Ø­Ù…Ø± Ù„Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† */
        }
        .reset-button:hover {
            background-color: #c0392b;
        }

        .feedback-message {
            font-size: 1.4rem;
            font-weight: bold;
            min-height: 30px; /* Ù„Ø­Ø¬Ø² Ù…Ø³Ø§Ø­Ø© */
            margin-top: 25px;
        }

        .game-over-screen {
            background-color: rgba(255, 255, 255, 0.95);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: var(--border-radius);
            z-index: 10;
            animation: fadeIn 0.5s ease-out;
        }

        .game-over-screen h2 {
            font-family: 'Amiri', serif;
            font-size: 3.5rem;
            color: var(--button-primary);
            margin-bottom: 20px;
            text-shadow: 3px 3px 7px var(--shadow-medium);
        }

        .game-over-screen p {
            font-size: 1.5rem;
            color: #555;
            margin-bottom: 30px;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø­Ø±ÙƒÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© Ù„ÙƒÙ†Ù‡Ø§ ØªØ¶ÙŠÙ Ø¬Ø§Ø°Ø¨ÙŠØ©) */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .word-card, .action-button {
            animation: slideInUp 0.5s ease-out backwards;
        }
        /* Ù„ØªØ£Ø®ÙŠØ± Ø¸Ù‡ÙˆØ± Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø´ÙƒÙ„ Ù…ØªØªØ§Ù„ÙŠ */
        .word-card:nth-child(2) { animation-delay: 0.1s; }
        .word-card:nth-child(3) { animation-delay: 0.2s; }
        .word-card:nth-child(4) { animation-delay: 0.3s; }
        .word-card:nth-child(5) { animation-delay: 0.4s; }
        .word-card:nth-child(6) { animation-delay: 0.5s; }
        .word-card:nth-child(7) { animation-delay: 0.6s; }


        /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨Ø© Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø£ØµØºØ± */
        @media (max-width: 768px) {
            .game-container {
                padding: 20px 25px;
            }
            h1 {
                font-size: 2.5rem;
            }
            .subtitle {
                font-size: 1rem;
            }
            .word-card {
                padding: 10px 15px;
                font-size: 1.1rem;
            }
            .action-button {
                padding: 10px 20px;
                font-size: 1rem;
            }
            .game-over-screen h2 {
                font-size: 2.5rem;
            }
            .game-over-screen p {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            .game-container {
                padding: 15px;
            }
            h1 {
                font-size: 2rem;
            }
            .subtitle {
                font-size: 0.9rem;
            }
            .word-card {
                padding: 8px 12px;
                font-size: 1rem;
            }
            .controls {
                flex-direction: column;
                gap: 10px;
            }
            .action-button {
                width: 100%;
                justify-content: center;
            }
            .game-over-screen h2 {
                font-size: 2rem;
            }
            .game-over-screen p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ© ğŸ“–</h1>
        <p class="subtitle">Ø±ØªØ¨ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ÙƒØ±ÙŠÙ…Ø© Ù…Ù† Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ù„Ù‰</p>

        <div class="verse-display" id="verse-display">
            </div>

        <div class="word-bank" id="word-bank">
            </div>

        <div class="controls">
            <button id="check-btn" class="action-button">ØªØ­Ù‚Ù‚ <i class="fas fa-check-circle"></i></button>
            <button id="next-btn" class="action-button next-button" style="display: none;">Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØªØ§Ù„ÙŠØ© <i class="fas fa-arrow-left"></i></button>
            <button id="reset-btn" class="action-button reset-button">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† <i class="fas fa-redo"></i></button>
        </div>

        <div class="feedback-message" id="feedback-message"></div>

        <div class="game-over-screen" id="game-over-screen" style="display: none;">
            <h2>ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø§Ù„Ø³ÙˆØ±Ø©! ğŸ‰</h2>
            <p>Ø¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠÙƒ ÙŠØ§ Ø¨Ø·Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù†!</p>
            <button class="action-button" id="play-again-btn">Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ <i class="fas fa-sync-alt"></i></button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ù…ØµÙÙˆÙØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¢ÙŠØ§Øª Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù…Ù‚Ø³Ù…Ø© Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª
            const verses = [
                ["Ø³ÙØ¨Ù‘ÙØ­Ù", "Ø§Ø³Ù’Ù…Ù", "Ø±ÙØ¨Ù‘ÙÙƒÙ", "Ø§Ù„Ù’Ø£ÙØ¹Ù’Ù„ÙÙ‰"], // Ø¢ÙŠØ© 1
                ["Ø§Ù„Ù‘ÙØ°ÙÙŠ", "Ø®ÙÙ„ÙÙ‚Ù", "ÙÙØ³ÙÙˆÙ‘ÙÙ‰Ù°"], // Ø¢ÙŠØ© 2
                ["ÙˆÙØ§Ù„Ù‘ÙØ°ÙÙŠ", "Ù‚ÙØ¯Ù‘ÙØ±Ù", "ÙÙÙ‡ÙØ¯ÙÙ‰Ù°"], // Ø¢ÙŠØ© 3
                ["ÙˆÙØ§Ù„Ù‘ÙØ°ÙÙŠ", "Ø£ÙØ®Ù’Ø±ÙØ¬Ù", "Ø§Ù„Ù’Ù…ÙØ±Ù’Ø¹ÙÙ‰Ù°"], // Ø¢ÙŠØ© 4
                ["ÙÙØ¬ÙØ¹ÙÙ„ÙÙ‡Ù", "ØºÙØ«ÙØ§Ø¡Ù‹", "Ø£ÙØ­Ù’ÙˆÙÙ‰Ù°"], // Ø¢ÙŠØ© 5
                ["Ø³ÙÙ†ÙÙ‚Ù’Ø±ÙØ¦ÙÙƒÙ", "ÙÙÙ„ÙØ§", "ØªÙÙ†Ø³ÙÙ‰Ù°"], // Ø¢ÙŠØ© 6
                ["Ø¥ÙÙ„Ù‘ÙØ§", "Ù…ÙØ§", "Ø´ÙØ§Ø¡Ù", "Ø§Ù„Ù„Ù‘ÙÙ‡Ù", "Ø¥ÙÙ†Ù‘ÙÙ‡Ù", "ÙŠÙØ¹Ù’Ù„ÙÙ…Ù", "Ø§Ù„Ù’Ø¬ÙÙ‡Ù’Ø±Ù", "ÙˆÙÙ…ÙØ§", "ÙŠÙØ®Ù’ÙÙÙ‰Ù°"], // Ø¢ÙŠØ© 7
                ["ÙˆÙÙ†ÙÙŠÙØ³Ù‘ÙØ±ÙÙƒÙ", "Ù„ÙÙ„Ù’ÙŠÙØ³Ù’Ø±ÙÙ‰Ù°"], // Ø¢ÙŠØ© 8
                ["ÙÙØ°ÙÙƒÙ‘ÙØ±Ù’", "Ø¥ÙÙ†", "Ù†Ù‘ÙÙÙØ¹ÙØªÙ", "Ø§Ù„Ø°Ù‘ÙÙƒÙ’Ø±ÙÙ‰Ù°"], // Ø¢ÙŠØ© 9
                ["Ø³ÙÙŠÙØ°Ù‘ÙÙƒÙ‘ÙØ±Ù", "Ù…ÙÙ†", "ÙŠÙØ®Ù’Ø´ÙÙ‰Ù°"], // Ø¢ÙŠØ© 10
                ["ÙˆÙÙŠÙØªÙØ¬ÙÙ†Ù‘ÙØ¨ÙÙ‡ÙØ§", "Ø§Ù„Ù’Ø£ÙØ´Ù’Ù‚ÙÙ‰"], // Ø¢ÙŠØ© 11
                ["Ø§Ù„Ù‘ÙØ°ÙÙŠ", "ÙŠÙØµÙ’Ù„ÙÙ‰", "Ø§Ù„Ù†Ù‘ÙØ§Ø±Ù", "Ø§Ù„Ù’ÙƒÙØ¨Ù’Ø±ÙÙ‰Ù°"], // Ø¢ÙŠØ© 12
                ["Ø«ÙÙ…Ù‘Ù", "Ù„ÙØ§", "ÙŠÙÙ…ÙÙˆØªÙ", "ÙÙÙŠÙ‡ÙØ§", "ÙˆÙÙ„ÙØ§", "ÙŠÙØ­Ù’ÙŠÙÙ‰Ù°"], // Ø¢ÙŠØ© 13
                ["Ù‚ÙØ¯Ù’", "Ø£ÙÙÙ’Ù„ÙØ­Ù", "Ù…ÙÙ†", "ØªÙØ²ÙÙƒÙ‘ÙÙ‰Ù°"], // Ø¢ÙŠØ© 14
                ["ÙˆÙØ°ÙÙƒÙØ±Ù", "Ø§Ø³Ù’Ù…Ù", "Ø±ÙØ¨Ù‘ÙÙ‡Ù", "ÙÙØµÙÙ„Ù‘ÙÙ‰Ù°"], // Ø¢ÙŠØ© 15
                ["Ø¨ÙÙ„Ù’", "ØªÙØ¤Ù’Ø«ÙØ±ÙÙˆÙ†Ù", "Ø§Ù„Ù’Ø­ÙÙŠÙØ§Ø©Ù", "Ø§Ù„Ø¯Ù‘ÙÙ†Ù’ÙŠÙØ§"], // Ø¢ÙŠØ© 16
                ["ÙˆÙØ§Ù„Ù’Ø¢Ø®ÙØ±ÙØ©Ù", "Ø®ÙÙŠÙ’Ø±ÙŒ", "ÙˆÙØ£ÙØ¨Ù’Ù‚ÙÙ‰Ù°"], // Ø¢ÙŠØ© 17
                ["Ø¥ÙÙ†Ù‘Ù", "Ù‡ÙÙ€Ù°Ø°ÙØ§", "Ù„ÙÙÙÙŠ", "Ø§Ù„ØµÙ‘ÙØ­ÙÙÙ", "Ø§Ù„Ù’Ø£ÙÙˆÙ„ÙÙ‰Ù°"], // Ø¢ÙŠØ© 18
                ["ØµÙØ­ÙÙÙ", "Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…Ù", "ÙˆÙÙ…ÙÙˆØ³ÙÙ‰Ù°"] // Ø¢ÙŠØ© 19
            ];

            let currentVerseIndex = 0; // Ù…Ø¤Ø´Ø± Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            let shuffledWords = []; // Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø¨Ø¹Ø«Ø±Ø© Ù„Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            let placedWords = []; // Ù…ØµÙÙˆÙØ© Ù„ØªØªØ¨Ø¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø© ÙÙŠ "verse-display"

            // Ø¬Ù„Ø¨ Ø¹Ù†Ø§ØµØ± DOM (ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† `let` Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†Ù‡Ø§)
            let verseDisplay = document.getElementById('verse-display');
            let wordBank = document.getElementById('word-bank');
            const checkBtn = document.getElementById('check-btn');
            const nextBtn = document.getElementById('next-btn');
            const resetBtn = document.getElementById('reset-btn');
            const feedbackMessage = document.getElementById('feedback-message');
            const gameOverScreen = document.getElementById('game-over-screen');
            const playAgainBtn = document.getElementById('play-again-btn');

            let draggedItem = null; // Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø°ÙŠ ÙŠØªÙ… Ø³Ø­Ø¨Ù‡ Ø­Ø§Ù„ÙŠÙ‹Ø§

            // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¨Ø¹Ø«Ø±Ø© Ù…ØµÙÙˆÙØ© (Ø®Ù„Ø· Ø§Ù„ÙƒÙ„Ù…Ø§Øª)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // ØªØ­Ù…ÙŠÙ„ Ø¢ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø¹Ø¨
            function loadVerse(index) {
                // Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¢ÙŠØ§ØªØŒ Ø§Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©
                if (index >= verses.length) {
                    showGameOverScreen();
                    return;
                }

                currentVerseIndex = index;
                const currentVerseWords = verses[currentVerseIndex];
                shuffledWords = shuffleArray([...currentVerseWords]);
                placedWords = Array(currentVerseWords.length).fill(null);

                // ØªÙØ±ÙŠØº Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                verseDisplay.innerHTML = '';
                wordBank.innerHTML = '';
                feedbackMessage.textContent = '';
                nextBtn.style.display = 'none';
                checkBtn.style.display = 'inline-flex';
                resetBtn.style.display = 'inline-flex';

                // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†Ø§ØµØ± Ù†Ø§Ø¦Ø¨Ø© (placeholders) ÙÙŠ Ù…Ù†Ø·Ù‚Ø© `verse-display`
                for (let i = 0; i < currentVerseWords.length; i++) {
                    const placeholder = document.createElement('div');
                    placeholder.classList.add('word-placeholder');
                    placeholder.textContent = `ÙƒÙ„Ù…Ø© ${i + 1}`;
                    placeholder.dataset.index = i;
                    verseDisplay.appendChild(placeholder);
                }

                // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ ÙÙŠ `word-bank`
                shuffledWords.forEach((word) => {
                    const wordCard = document.createElement('div');
                    wordCard.classList.add('word-card');
                    wordCard.textContent = word;
                    wordCard.setAttribute('draggable', 'true');
                    wordCard.dataset.originalText = word;
                    wordBank.appendChild(wordCard);
                });

                // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª Ù„ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                addDragAndDropListeners();
            }

            // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
            function addDragAndDropListeners() {
                // Ø¥Ø²Ø§Ù„Ø© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
                // Ù‡Ø°Ø§ Ù…Ù‡Ù… Ø¬Ø¯Ø§ Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
                // Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ØŒ ÙŠÙ…ÙƒÙ† Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§
                // Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ DOM Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù„Ø§ ØªØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù„ÙƒÙ„ Ø¹Ù†ØµØ±
                
                // ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©ØŒ Ø¨Ù…Ø§ Ø£Ù†Ù†Ø§ Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø³Ø­ `innerHTML` Ø«Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¦Ù‡ØŒ ÙØ¥Ù† Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØªØ®ØªÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.
                // Ù„Ø°Ø§ØŒ Ù†Ø­ØªØ§Ø¬ ÙÙ‚Ø· Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.

                const wordCards = document.querySelectorAll('.word-card');
                const placeholders = document.querySelectorAll('.word-placeholder');

                // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„ÙƒÙ„Ù…Ø§Øª
                wordCards.forEach(card => {
                    card.addEventListener('dragstart', (e) => {
                        draggedItem = e.target;
                        setTimeout(() => {
                            e.target.style.opacity = '0.5';
                        }, 0);
                    });

                    card.addEventListener('dragend', (e) => {
                        e.target.style.opacity = '1';
                        draggedItem = null;
                    });
                });

                // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¥ÙÙ„Ø§Øª Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ø§Ø¦Ø¨Ø© ÙÙŠ `verse-display`
                placeholders.forEach(placeholder => {
                    placeholder.addEventListener('dragover', (e) => {
                        e.preventDefault();
                    });

                    placeholder.addEventListener('dragenter', (e) => {
                        e.preventDefault();
                        if (e.target.classList.contains('word-placeholder')) {
                            e.target.style.backgroundColor = '#d0d8e0';
                        }
                    });

                    placeholder.addEventListener('dragleave', (e) => {
                        if (e.target.classList.contains('word-placeholder')) {
                            e.target.style.backgroundColor = '';
                        }
                    });

                    placeholder.addEventListener('drop', (e) => {
                        e.preventDefault();
                        if (draggedItem && e.target.classList.contains('word-placeholder')) {
                            const targetPlaceholder = e.target;
                            const placeholderIndex = parseInt(targetPlaceholder.dataset.index);

                            if (placedWords[placeholderIndex] !== null) {
                                const existingWordCard = placedWords[placeholderIndex];
                                wordBank.appendChild(existingWordCard);
                                existingWordCard.style.cursor = 'grab';
                                existingWordCard.classList.remove('in-verse-display');
                            }

                            targetPlaceholder.replaceWith(draggedItem);
                            placedWords[placeholderIndex] = draggedItem;
                            draggedItem.style.opacity = '1';
                            draggedItem.style.cursor = 'pointer';
                            draggedItem.setAttribute('draggable', 'true');
                            draggedItem.classList.add('in-verse-display');

                            targetPlaceholder.style.backgroundColor = '';
                        }
                    });
                });

                // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ù†Ù‚Ù„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù…Ù† `verse-display` Ø¥Ù„Ù‰ `word-bank` Ø¨Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡Ø§
                // Ù†Ø³ØªØ®Ø¯Ù… `Event Delegation` Ù‡Ù†Ø§ Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ø­ØªÙ‰ Ù„Ùˆ ØªØºÙŠØ±Øª Ø§Ù„Ø¹Ù†Ø§ØµØ±
                verseDisplay.addEventListener('click', handleVerseDisplayClick);

                // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¥ÙÙ„Ø§Øª Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙÙŠ `word-bank`
                wordBank.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });

                wordBank.addEventListener('drop', handleWordBankDrop);
            }

            // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ `verseDisplay`
            function handleVerseDisplayClick(e) {
                if (e.target.classList.contains('word-card') && e.target.closest('#verse-display')) {
                    const clickedWordCard = e.target;
                    const indexInPlacedWords = placedWords.findIndex(card => card === clickedWordCard);

                    if (indexInPlacedWords !== -1) {
                        placedWords[indexInPlacedWords] = null;
                        wordBank.appendChild(clickedWordCard);
                        clickedWordCard.style.cursor = 'grab';
                        clickedWordCard.classList.remove('in-verse-display');

                        repopulateVerseDisplayPlaceholders();
                    }
                }
            }

            // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥ÙÙ„Ø§Øª ÙÙŠ `wordBank`
            function handleWordBankDrop(e) {
                e.preventDefault();
                if (draggedItem && draggedItem.classList.contains('in-verse-display')) {
                    const movedWordText = draggedItem.textContent;
                    const indexInPlacedWords = placedWords.findIndex(card => card && card.textContent === movedWordText);
                    if (indexInPlacedWords !== -1) {
                        placedWords[indexInPlacedWords] = null;
                    }

                    wordBank.appendChild(draggedItem);
                    draggedItem.style.opacity = '1';
                    draggedItem.style.cursor = 'grab';
                    draggedItem.classList.remove('in-verse-display');

                    repopulateVerseDisplayPlaceholders();
                }
            }

            // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ø§Ø¦Ø¨Ø© Ø¨Ø¹Ø¯ Ù†Ù‚Ù„ ÙƒÙ„Ù…Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹
            function repopulateVerseDisplayPlaceholders() {
                verseDisplay.innerHTML = '';
                const currentVerseWordsCount = verses[currentVerseIndex].length;
                for (let i = 0; i < currentVerseWordsCount; i++) {
                    if (placedWords[i]) {
                        verseDisplay.appendChild(placedWords[i]);
                    } else {
                        const placeholder = document.createElement('div');
                        placeholder.classList.add('word-placeholder');
                        placeholder.textContent = `ÙƒÙ„Ù…Ø© ${i + 1}`;
                        placeholder.dataset.index = i;
                        verseDisplay.appendChild(placeholder);
                    }
                }
                // Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ±ØŒ ÙŠØ¬Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ø§Ø¦Ø¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.
                // Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙØªØ§Ø­ Ù„Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†.
                addDragAndDropListeners();
            }

            // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ±ØªÙŠØ¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª
            function checkOrder() {
                const currentVerseWords = verses[currentVerseIndex];
                let userOrderedWords = [];

                const verseChildren = Array.from(verseDisplay.children);
                userOrderedWords = verseChildren.filter(child => child.classList.contains('word-card'))
                                                .map(card => card.textContent);

                let isCorrect = true;
                if (userOrderedWords.length !== currentVerseWords.length) {
                    isCorrect = false;
                } else {
                    for (let i = 0; i < currentVerseWords.length; i++) {
                        if (userOrderedWords[i] !== currentVerseWords[i]) {
                            isCorrect = false;
                            break;
                        }
                    }
                }

                if (isCorrect) {
                    feedbackMessage.textContent = 'Ø£Ø­Ø³Ù†Øª! Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ‰';
                    feedbackMessage.style.color = varToCss('feedback-correct');
                    checkBtn.style.display = 'none';
                    resetBtn.style.display = 'none';
                    nextBtn.style.display = 'inline-flex';
                    // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                    disableInteractions();
                } else {
                    feedbackMessage.textContent = 'Ù„Ù„Ø£Ø³ÙØŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                    feedbackMessage.style.color = varToCss('feedback-wrong');
                }
            }

            // Ø¯Ø§Ù„Ø© Ù„ØªØ¹Ø·ÙŠÙ„ Ø¬Ù…ÙŠØ¹ ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
            function disableInteractions() {
                // Ø¥Ø²Ø§Ù„Ø© Ø®Ø§ØµÙŠØ© `draggable` ÙˆØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¤Ø´Ø±
                document.querySelectorAll('.word-card').forEach(card => {
                    card.setAttribute('draggable', 'false');
                    card.style.cursor = 'default';
                });

                // Ø¥Ø²Ø§Ù„Ø© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù…Ù† `verseDisplay` Ùˆ `wordBank` Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙØ§Ø¹Ù„
                // Ù‡Ø°Ø§ ÙŠÙ…Ù†Ø¹ Ø£ÙŠ ØªÙØ§Ø¹Ù„Ø§Øª Ø³Ø­Ø¨ Ø£Ùˆ Ø¥ÙÙ„Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ù„ Ø§Ù„ØµØ­ÙŠØ­
                verseDisplay.removeEventListener('click', handleVerseDisplayClick);
                wordBank.removeEventListener('drop', handleWordBankDrop);

                // Ø¥Ø²Ø§Ù„Ø© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª Ù…Ù† Ø§Ù„Ù€ placeholders Ù„Ù…Ù†Ø¹ Ø£ÙŠ Ø¥ÙÙ„Ø§Øª
                // Ù„Ø§ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø¨Ù„ ÙŠÙƒÙÙŠ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ†
                document.querySelectorAll('.word-placeholder').forEach(ph => {
                    ph.removeEventListener('dragover', (e) => e.preventDefault());
                    ph.removeEventListener('dragenter', (e) => e.preventDefault());
                    ph.removeEventListener('dragleave', () => {});
                    ph.removeEventListener('drop', (e) => e.preventDefault());
                });
            }

            // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            function resetVerse() {
                // Ø¨Ø¨Ø³Ø§Ø·Ø© Ù‚Ù… Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„ØªØ¹ÙŠÙŠÙ†Ù‡Ø§
                loadVerse(currentVerseIndex);
            }

            // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©
            function showGameOverScreen() {
                gameOverScreen.style.display = 'flex';
                checkBtn.style.display = 'none';
                nextBtn.style.display = 'none';
                resetBtn.style.display = 'none';
                feedbackMessage.textContent = '';
            }

            // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ù…ØªØºÙŠØ± CSS
            function varToCss(varName) {
                return getComputedStyle(document.documentElement).getPropertyValue(`--${varName}`);
            }

            // Ù…Ø³ØªÙ…Ø¹Ùˆ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            checkBtn.addEventListener('click', checkOrder);
            nextBtn.addEventListener('click', () => loadVerse(currentVerseIndex + 1));
            resetBtn.addEventListener('click', resetVerse); // Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠØ³Ø¨Ø¨ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©
            playAgainBtn.addEventListener('click', () => {
                gameOverScreen.style.display = 'none';
                loadVerse(0); // Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰
            });

            // Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
            loadVerse(0);
        });
    </script>
</body>
</html>