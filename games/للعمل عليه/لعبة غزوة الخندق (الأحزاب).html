<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ (Ø§Ù„Ø£Ø­Ø²Ø§Ø¨) ğŸ›¡ï¸</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-dark: #36454F; /* Charcoal Gray - Ù„Ù„Ø®Ù†Ø¯Ù‚ ÙˆØ§Ù„Ù‚ÙˆØ© */
            --secondary-brown: #795548; /* Khaki Brown - Ù„Ù„ØªØ±Ø§Ø¨ ÙˆØ§Ù„Ø£Ø±Ø¶ */
            --text-light: #F5F5DC; /* Off-white for text */
            --accent-green: #4CAF50; /* Green - Ù„Ù„Ø£Ù…Ù„ ÙˆØ§Ù„ØµÙ…ÙˆØ¯ */
            --accent-orange: #FF9800; /* Orange - Ù„Ù„Ø¯ÙØ¡ ÙˆØ§Ù„Ø·Ø¹Ø§Ù… */
            --bg-page: #E0E0E0; /* Light Gray - Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© */
            --card-bg: white;
            --shadow-color: rgba(0, 0, 0, 0.2);
            --border-radius-lg: 30px;
            --border-radius-md: 18px;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-page);
            margin: 0;
            padding: 0;
            color: var(--primary-dark);
            line-height: 1.8;
            overflow-x: hidden;
            direction: rtl;
            text-align: right;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M0 50 Q 25 25 50 50 T 100 50" stroke="%2336454F" stroke-width="2" fill="none" opacity="0.05"/><path d="M0 70 L 100 70 L 100 100 L 0 100 Z" fill="%2379554805"/></svg>');
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 25px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-brown) 100%);
            color: var(--text-light);
            padding: 60px 20px;
            text-align: center;
            border-bottom-left-radius: 50px;
            border-bottom-right-radius: 50px;
            box-shadow: 0 10px 30px var(--shadow-color);
            position: relative;
            overflow: hidden;
            animation: fadeInDown 1.5s ease-out;
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><text x="10" y="50" font-family="Arial" font-size="40" fill="%23ffffff15">âš”ï¸</text></svg>') repeat;
            opacity: 0.15;
            pointer-events: none;
        }

        h1 {
            font-family: 'Amiri', serif;
            font-size: 4.8rem;
            margin: 0;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.6);
            letter-spacing: 2px;
        }

        .header-subtitle {
            font-size: 2.2rem;
            margin-top: 15px;
            color: var(--accent-green);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
            font-weight: bold;
        }

        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-top: 60px;
        }

        /* Game Card */
        .game-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            padding: 35px;
            text-align: center;
            box-shadow: 0 15px 40px var(--shadow-color);
            border: 3px solid var(--accent-green);
            transition: all 0.5s cubic-bezier(.25,.8,.25,1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            animation: scaleIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .game-card:nth-child(1) { animation-delay: 0.2s; }
        .game-card:nth-child(2) { animation-delay: 0.4s; }
        .game-card:nth-child(3) { animation-delay: 0.6s; }

        .game-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M0 50 Q 25 25 50 50 T 100 50" stroke="%2336454F" stroke-width="1" fill="none" opacity="0.08"/></svg>') repeat;
            opacity: 0.05;
            pointer-events: none;
        }

        .game-card:hover {
            transform: translateY(-15px) scale(1.04);
            box-shadow: 0 25px 50px var(--shadow-color);
            border-color: var(--accent-orange);
            background: linear-gradient(145deg, #FFF8DC 0%, white 100%);
        }

        .game-icon {
            font-size: 5rem;
            color: var(--accent-green);
            margin-bottom: 25px;
            transition: transform 0.4s ease-in-out, color 0.4s ease-in-out;
        }

        .game-card:hover .game-icon {
            transform: rotate(-5deg) scale(1.1);
            color: var(--accent-orange);
        }

        .game-title {
            font-family: 'Amiri', serif;
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .game-description {
            font-size: 1.3rem;
            color: var(--secondary-brown);
            line-height: 1.6;
        }

        /* Game Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease-in-out;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(160deg, var(--card-bg) 0%, #F5F5DC 100%);
            border-radius: var(--border-radius-lg);
            width: 90%;
            max-width: 900px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            transform: translateY(50px) scale(0.7);
            transition: all 0.5s cubic-bezier(.17,.67,.83,.67);
            border: 4px solid var(--accent-green);
            overflow: hidden;
            position: relative;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-header {
            background: linear-gradient(90deg, var(--secondary-brown) 0%, var(--primary-dark) 100%);
            color: var(--text-light);
            padding: 20px;
            border-radius: var(--border-radius-md);
            margin-bottom: 30px;
            text-align: center;
            font-family: 'Amiri', serif;
            font-size: 2.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .modal-body {
            padding: 20px 0;
            min-height: 300px; /* Increased min-height for games */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--primary-dark);
        }

        .modal-footer {
            text-align: center;
            padding-top: 30px;
        }

        .close-btn {
            background: var(--accent-green);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .close-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        /* Game Specific Styles */
        /* Khandaq Building Game */
        #khandaq-game-container {
            width: 100%;
            max-width: 800px;
            height: 400px;
            border: 3px solid var(--secondary-brown);
            background-color: #D2B48C; /* Tan color for ground */
            border-radius: var(--border-radius-md);
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
        }

        .khandaq-line {
            width: 90%;
            height: 50px;
            background-color: var(--primary-dark);
            border-radius: 10px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-light);
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            transition: all 0.3s ease-out;
        }
        .khandaq-line.completed {
            background-color: var(--accent-green);
        }
        .khandaq-target {
            background-color: rgba(255, 255, 255, 0.5);
            border: 2px dashed var(--secondary-brown);
            height: 40px;
            width: 100px;
            margin: 0 5px;
            display: inline-block;
            vertical-align: middle;
        }
        .khandaq-piece {
            background-color: var(--secondary-brown);
            border: 2px solid var(--primary-dark);
            width: 90px;
            height: 35px;
            margin: 0 5px;
            display: inline-block;
            vertical-align: middle;
            cursor: grab;
            position: relative;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        .khandaq-piece:active {
            cursor: grabbing;
        }
        #khandaq-pieces-tray {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            background-color: rgba(255,255,255,0.7);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        #khandaq-build-feedback {
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 20px;
        }

        /* Ahzab Challenge (Quiz) Styles - Reuse Uhud Quiz styles */
        .ahzab-quiz-question {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: var(--primary-dark);
            animation: fadeIn 0.8s ease-out;
            text-align: center;
        }
        .ahzab-quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .ahzab-quiz-option-btn {
            background: #F5F5DC;
            border: 2px solid var(--accent-green);
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: right;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .ahzab-quiz-option-btn:hover:not(:disabled) {
            background: var(--accent-green);
            color: white;
            transform: translateX(-5px);
        }
        .ahzab-quiz-option-btn.correct {
            background-color: #8FBC8F; /* DarkSeaGreen for correct */
            color: white;
            border-color: #2E8B57;
            animation: pulseCorrect 0.5s ease-out;
        }
        .ahzab-quiz-option-btn.wrong {
            background-color: #FF6347; /* Tomato for wrong */
            color: white;
            border-color: #CD5C5C;
            animation: shake 0.3s ease-out;
        }
        .ahzab-quiz-option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        #ahzab-quiz-feedback {
            margin-top: 25px;
            font-size: 1.5rem;
            font-weight: bold;
            animation: fadeIn 0.5s ease-out;
            text-align: center;
        }
        #ahzab-quiz-next-btn {
            background: var(--accent-green);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            display: none;
        }
        #ahzab-quiz-next-btn:hover {
            background: var(--primary-dark);
        }

        /* Sumood Word Game (Scramble) Styles - Reuse Uhud Scramble styles */
        #sumood-word-scramble-container {
            text-align: center;
            width: 100%;
            max-width: 700px;
        }
        #sumood-scrambled-word {
            font-family: 'Amiri', serif;
            font-size: 3.5rem;
            color: var(--accent-orange);
            margin-bottom: 30px;
            letter-spacing: 5px;
            background: #F5F5DC;
            padding: 20px 30px;
            border-radius: var(--border-radius-md);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            animation: bounceIn 0.8s ease-out;
        }
        #sumood-word-input {
            width: 80%;
            padding: 15px;
            font-size: 1.5rem;
            border: 2px solid var(--accent-orange);
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            transition: border-color 0.3s ease;
        }
        #sumood-word-input:focus {
            outline: none;
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 3px rgba(255, 152, 0, 0.3);
        }
        #sumood-scramble-check-btn {
            background: var(--accent-orange);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #sumood-scramble-check-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
        }
        #sumood-scramble-feedback {
            margin-top: 25px;
            font-size: 1.6rem;
            font-weight: bold;
            color: var(--accent-orange);
            animation: fadeIn 0.5s ease-out;
        }

        /* Animations */
        @keyframes fadeInDown {
            0% { opacity: 0; transform: translateY(-80px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes pulseCorrect {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }

        @keyframes bounceIn {
            0%, 20%, 40%, 60%, 80%, 100% {
                transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
            }
            0% { opacity: 0; transform: scale3d(0.3, 0.3, 0.3); }
            20% { transform: scale3d(1.1, 1.1, 1.1); }
            40% { transform: scale3d(0.9, 0.9, 0.9); }
            60% { opacity: 1; transform: scale3d(1.03, 1.03, 1.03); }
            80% { transform: scale3d(0.97, 0.97, 0.97); }
            100% { opacity: 1; transform: scale3d(1, 1, 1); }
        }

        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 3.8rem; }
            .header-subtitle { font-size: 1.8rem; }
            .games-grid { grid-template-columns: 1fr; gap: 30px; }
            .game-card { padding: 25px; }
            .game-icon { font-size: 4rem; }
            .game-title { font-size: 2.2rem; }
            .game-description { font-size: 1.1rem; }
            .modal-content { max-width: 95%; padding: 20px; }
            .modal-header { font-size: 1.8rem; padding: 15px; }
            
            #khandaq-game-container { height: 300px; }
            .khandaq-line { height: 40px; font-size: 1.2rem;}
            .khandaq-piece { width: 70px; height: 30px; }
            #khandaq-pieces-tray { flex-wrap: wrap; justify-content: center; }

            .ahzab-quiz-question { font-size: 1.5rem; }
            .ahzab-quiz-option-btn { font-size: 1.1rem; padding: 12px 20px; }
            #sumood-scrambled-word { font-size: 2.5rem; }
            #sumood-word-input { font-size: 1.2rem; padding: 10px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Ù„Ø¹Ø¨Ø© ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ (Ø§Ù„Ø£Ø­Ø²Ø§Ø¨) ğŸ›¡ï¸</h1>
            <div class="header-subtitle">Ø§Ø®ØªØ¨Ø± Ø­ÙƒÙ…ØªÙƒ ÙˆØµØ¨Ø±Ùƒ ÙÙŠ Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ø­Ø²Ø§Ø¨!</div>
        </div>
    </header>

    <div class="container">
        <div class="games-grid">
            <div class="game-card" onclick="openGameModal('khandaqBuildGameModal')">
                <div class="game-icon"><i class="fas fa-hammer"></i></div>
                <h3 class="game-title">Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø®Ù†Ø¯Ù‚</h3>
                <p class="game-description">Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙÙŠ Ø­ÙØ± ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ø®Ù†Ø¯Ù‚ Ù„Ù„Ø¯ÙØ§Ø¹ Ø¹Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©!</p>
            </div>

            <div class="game-card" onclick="openGameModal('ahzabChallengeModal')">
                <div class="game-icon"><i class="fas fa-users-cog"></i></div>
                <h3 class="game-title">ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨</h3>
                <p class="game-description">ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø¨Ø§Ø¦Ù„ Ø§Ù„Ù…ØªØ­Ø§Ù„ÙØ© ÙˆØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø­ØµØ§Ø± ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù…ØªØ¹.</p>
            </div>

            <div class="game-card" onclick="openGameModal('sumoodWordGameModal')">
                <div class="game-icon"><i class="fas fa-hand-holding-heart"></i></div>
                <h3 class="game-title">ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµÙ…ÙˆØ¯</h3>
                <p class="game-description">Ø±ØªÙ‘Ø¨ Ø§Ù„Ø­Ø±ÙˆÙ Ù„ØªÙƒØªØ´Ù ÙƒÙ„Ù…Ø§Øª ØªØ¹Ø¨Ø± Ø¹Ù† Ø§Ù„ØµØ¨Ø± ÙˆØ§Ù„Ø¥ÙŠÙ…Ø§Ù† ÙÙŠ Ø§Ù„Ø´Ø¯Ø§Ø¦Ø¯.</p>
            </div>
        </div>
    </div>

    <div id="khandaqBuildGameModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø®Ù†Ø¯Ù‚ Ø§Ù„Ø¹Ø¸ÙŠÙ… â›ï¸</h3>
            </div>
            <div class="modal-body">
                <p style="font-size: 1.2rem; margin-bottom: 20px;">Ø§Ø³Ø­Ø¨ Ù‚Ø·Ø¹ Ø§Ù„Ø®Ù†Ø¯Ù‚ Ù„Ù…Ù„Ø¡ Ø§Ù„ÙØ±Ø§ØºØ§Øª ÙˆØ£ÙƒÙ…Ù„ Ø¯ÙØ§Ø¹Ø§Øª Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©!</p>
                <div id="khandaq-game-container">
                    <div class="khandaq-line" id="khandaq-line-1">
                        <span class="khandaq-target"></span>
                        <span class="khandaq-target"></span>
                        <span class="khandaq-target"></span>
                    </div>
                    <div class="khandaq-line" id="khandaq-line-2">
                        <span class="khandaq-target"></span>
                        <span class="khandaq-target"></span>
                    </div>
                </div>
                <div id="khandaq-pieces-tray">
                    </div>
                <p id="khandaq-build-feedback" style="color: var(--accent-green);"></p>
            </div>
            <div class="modal-footer">
                <button class="close-btn" onclick="closeGameModal('khandaqBuildGameModal')">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
            </div>
        </div>
    </div>

    <div id="ahzabChallengeModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨ ğŸ§ </h3>
            </div>
            <div class="modal-body">
                <div id="ahzab-quiz-container">
                    <p class="ahzab-quiz-question" id="ahzab-quiz-question">Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§ØŸ</p>
                    <div class="ahzab-quiz-options" id="ahzab-quiz-options">
                        </div>
                    <p id="ahzab-quiz-feedback"></p>
                    <button id="ahzab-quiz-next-btn">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left"></i></button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="close-btn" onclick="closeGameModal('ahzabChallengeModal')">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
            </div>
        </div>
    </div>

    <div id="sumoodWordGameModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµÙ…ÙˆØ¯ ğŸ”¤</h3>
            </div>
            <div class="modal-body">
                <p style="font-size: 1.2rem; margin-bottom: 20px;">Ø±ØªØ¨ Ø§Ù„Ø­Ø±ÙˆÙ Ù„ØªÙƒÙˆÙŠÙ† ÙƒÙ„Ù…Ø© ØªØ¹Ø¨Ø± Ø¹Ù† Ù‚ÙŠÙ… ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚:</p>
                <div id="sumood-word-scramble-container">
                    <p id="sumood-scrambled-word">ÙƒÙ„Ù…Ø§Øª Ù…ØªÙ†Ø§Ø«Ø±Ø©</p>
                    <input type="text" id="sumood-word-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø© Ù‡Ù†Ø§...">
                    <button id="sumood-scramble-check-btn">ØªØ­Ù‚Ù‚</button>
                    <p id="sumood-scramble-feedback"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="close-btn" onclick="closeGameModal('sumoodWordGameModal')">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>ØªØ¹Ù„Ù‘Ù… ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø£Ø­Ø¯Ø§Ø« ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ ğŸ®</p>
            <p>&copy; 2025 Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ù†Ø¨ÙˆÙŠØ© | ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ ğŸ›¡ï¸</p>
        </div>
    </footer>

    <script>
        // Universal Modal Functions
        function openGameModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
            // Initialize game when modal opens
            if (modalId === 'khandaqBuildGameModal') initializeKhandaqBuildGame();
            if (modalId === 'ahzabChallengeModal') initializeAhzabChallenge();
            if (modalId === 'sumoodWordGameModal') initializeSumoodWordGame();
        }

        function closeGameModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeGameModal(this.id);
                }
            });
        });

        // --- Game 1: Khandaq Building Game ---
        const khandaqGameContainer = document.getElementById('khandaq-game-container');
        const khandaqPiecesTray = document.getElementById('khandaq-pieces-tray');
        const khandaqBuildFeedback = document.getElementById('khandaq-build-feedback');
        let draggedPiece = null;
        let completedLines = 0;

        function initializeKhandaqBuildGame() {
            khandaqBuildFeedback.textContent = '';
            completedLines = 0;
            khandaqGameContainer.querySelectorAll('.khandaq-line').forEach(line => {
                line.classList.remove('completed');
                // Reset targets
                line.innerHTML = '<span class="khandaq-target"></span>'.repeat(line.id === 'khandaq-line-1' ? 3 : 2);
            });
            generateKhandaqPieces();
        }

        function generateKhandaqPieces() {
            khandaqPiecesTray.innerHTML = '';
            const totalPieces = 5; // Total targets are 3 + 2 = 5
            const pieces = Array(totalPieces).fill('Ù‚Ø·Ø¹Ø© Ø®Ù†Ø¯Ù‚'); // You can make these different types
            pieces.sort(() => 0.5 - Math.random()); // Shuffle pieces

            pieces.forEach((pieceText, index) => {
                const piece = document.createElement('div');
                piece.classList.add('khandaq-piece');
                piece.textContent = pieceText;
                piece.draggable = true;
                piece.addEventListener('dragstart', dragStartKhandaq);
                khandaqPiecesTray.appendChild(piece);
            });

            setupDropTargets();
        }

        function setupDropTargets() {
            khandaqGameContainer.querySelectorAll('.khandaq-target').forEach(target => {
                target.addEventListener('dragover', dragOverKhandaq);
                target.addEventListener('drop', dropKhandaq);
            });
        }

        function dragStartKhandaq(event) {
            draggedPiece = event.target;
            event.dataTransfer.setData('text/plain', draggedPiece.textContent); // Set data
            setTimeout(() => draggedPiece.style.display = 'none', 0); // Hide dragged item
        }

        function dragOverKhandaq(event) {
            event.preventDefault(); // Allow drop
        }

        function dropKhandaq(event) {
            event.preventDefault();
            if (event.target.classList.contains('khandaq-target') && draggedPiece) {
                const targetParent = event.target.closest('.khandaq-line');
                if (!event.target.hasChildNodes()) { // Ensure target is empty
                    event.target.appendChild(draggedPiece);
                    draggedPiece.style.display = 'block'; // Make it visible again
                    checkKhandaqCompletion(targetParent);
                    khandaqBuildFeedback.textContent = ''; // Clear previous feedback
                } else {
                    khandaqBuildFeedback.textContent = 'Ù‡Ø°Ø§ Ø§Ù„Ù…ÙƒØ§Ù† Ù…Ù…ØªÙ„Ø¦! ğŸ¤¨';
                    khandaqBuildFeedback.style.color = 'orange';
                    draggedPiece.style.display = 'block'; // Make it visible if not dropped
                }
            } else {
                 khandaqBuildFeedback.textContent = 'Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø·Ø¹Ø© Ù‡Ù†Ø§! ğŸ˜';
                 khandaqBuildFeedback.style.color = 'red';
                 if (draggedPiece) draggedPiece.style.display = 'block'; // Make it visible if not dropped
            }
            draggedPiece = null;
        }

        function checkKhandaqCompletion(line) {
            const targets = line.querySelectorAll('.khandaq-target');
            let allFilled = true;
            targets.forEach(target => {
                if (!target.hasChildNodes()) {
                    allFilled = false;
                }
            });

            if (allFilled && !line.classList.contains('completed')) {
                line.classList.add('completed');
                completedLines++;
                if (completedLines === khandaqGameContainer.querySelectorAll('.khandaq-line').length) {
                    khandaqBuildFeedback.textContent = 'ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø®Ù†Ø¯Ù‚ Ø¨Ù†Ø¬Ø§Ø­! ğŸ¥³';
                    khandaqBuildFeedback.style.color = 'var(--accent-green)';
                } else {
                    khandaqBuildFeedback.textContent = 'Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„ Ø¨Ù†Ø§Ø¡ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡. ğŸ’ª';
                    khandaqBuildFeedback.style.color = 'var(--accent-green)';
                }
            }
        }


        // --- Game 2: Ahzab Challenge (Quiz) ---
        const ahzabQuizQuestionEl = document.getElementById('ahzab-quiz-question');
        const ahzabQuizOptionsEl = document.getElementById('ahzab-quiz-options');
        const ahzabQuizFeedbackEl = document.getElementById('ahzab-quiz-feedback');
        const ahzabQuizNextBtn = document.getElementById('ahzab-quiz-next-btn');
        let ahzabCurrentQuizQuestionIndex = 0;
        const ahzabQuizQuestions = [
            {
                question: "Ù…Ù† Ø§Ù„Ø°ÙŠ Ø£Ø´Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ø¨Ø­ÙØ± Ø§Ù„Ø®Ù†Ø¯Ù‚ØŸ",
                options: ["Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚", "Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø³Ù„Ù…Ø§Ù† Ø§Ù„ÙØ§Ø±Ø³ÙŠ", "Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨"],
                answer: "Ø³Ù„Ù…Ø§Ù† Ø§Ù„ÙØ§Ø±Ø³ÙŠ"
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ø¬ÙŠØ´ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨ Ø§Ù„Ø°ÙŠ Ø­Ø§ØµØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ",
                options: ["Ù¥Ù Ù Ù  Ù…Ù‚Ø§ØªÙ„", "Ù§Ù Ù Ù  Ù…Ù‚Ø§ØªÙ„", "Ù¡Ù Ù Ù Ù  Ù…Ù‚Ø§ØªÙ„", "Ù¡Ù¢Ù Ù Ù  Ù…Ù‚Ø§ØªÙ„"],
                answer: "Ù¡Ù Ù Ù Ù  Ù…Ù‚Ø§ØªÙ„"
            },
            {
                question: "Ù…Ù† Ø£Ù‡Ù… Ø§Ù„Ù‚Ø¨Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªØ­Ø§Ù„ÙØª Ø¶Ø¯ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙÙŠ ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ØŸ",
                options: ["Ù‚Ø±ÙŠØ´ ÙˆØºØ·ÙØ§Ù†", "Ø«Ù‚ÙŠÙ ÙˆÙ‡ÙˆØ§Ø²Ù†", "Ø¨Ù†Ùˆ Ø§Ù„Ù†Ø¶ÙŠØ± ÙˆÙ‚Ø±ÙŠØ´", "Ø§Ù„Ø£ÙˆØ³ ÙˆØ§Ù„Ø®Ø²Ø±Ø¬"],
                answer: "Ù‚Ø±ÙŠØ´ ÙˆØºØ·ÙØ§Ù†"
            },
            {
                question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ØªÙŠ Ø§Ø³ØªÙ…Ø± ÙÙŠÙ‡Ø§ Ø­ØµØ§Ø± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙÙŠ ØºØ²ÙˆØ© Ø§Ù„Ø®Ù†Ø¯Ù‚ØŸ",
                options: ["Ø£Ø³Ø¨ÙˆØ¹ ÙˆØ§Ø­Ø¯", "Ø¹Ø´Ø±Ø© Ø£ÙŠØ§Ù…", "Ø´Ù‡Ø± ÙƒØ§Ù…Ù„", "Ø£ÙƒØ«Ø± Ù…Ù† Ø´Ù‡Ø±"],
                answer: "Ø´Ù‡Ø± ÙƒØ§Ù…Ù„"
            },
            {
                question: "Ø¨Ù…Ø§Ø°Ø§ Ø§Ù†ØªÙ‡Ù‰ Ø­ØµØ§Ø± Ø§Ù„Ø£Ø­Ø²Ø§Ø¨ Ù„Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ",
                options: ["Ù‡Ø²ÙŠÙ…Ø© Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ†", "ØµÙ„Ø­ Ø¨ÙŠÙ† Ø§Ù„Ø·Ø±ÙÙŠÙ†", "Ù‡Ø¨ÙˆØ¨ Ø§Ù„Ø±ÙŠØ­ ÙˆØ§Ù†Ø³Ø­Ø§Ø¨ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", "Ù…Ø¹Ø±ÙƒØ© ÙØ§ØµÙ„Ø©"],
                answer: "Ù‡Ø¨ÙˆØ¨ Ø§Ù„Ø±ÙŠØ­ ÙˆØ§Ù†Ø³Ø­Ø§Ø¨ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨"
            }
        ];

        function initializeAhzabChallenge() {
            ahzabCurrentQuizQuestionIndex = 0;
            loadAhzabQuizQuestion();
        }

        function loadAhzabQuizQuestion() {
            ahzabQuizFeedbackEl.textContent = '';
            ahzabQuizNextBtn.style.display = 'none';

            if (ahzabCurrentQuizQuestionIndex >= ahzabQuizQuestions.length) {
                ahzabQuizQuestionEl.textContent = 'Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ø£Ù†Øª Ø¨Ø·Ù„! ğŸ‰';
                ahzabQuizOptionsEl.innerHTML = '<p style="text-align: center; font-size: 1.3rem;">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ø¯ÙŠ Ø¨Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆÙØªØ­Ù‡Ø§ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p>';
                return;
            }

            const questionData = ahzabQuizQuestions[ahzabCurrentQuizQuestionIndex];
            ahzabQuizQuestionEl.textContent = questionData.question;
            ahzabQuizOptionsEl.innerHTML = '';
            questionData.options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('ahzab-quiz-option-btn');
                button.textContent = option;
                button.onclick = () => checkAhzabQuizAnswer(option);
                ahzabQuizOptionsEl.appendChild(button);
            });
        }

        function checkAhzabQuizAnswer(selectedOption) {
            const questionData = ahzabQuizQuestions[ahzabCurrentQuizQuestionIndex];
            const buttons = ahzabQuizOptionsEl.querySelectorAll('.ahzab-quiz-option-btn');

            buttons.forEach(button => {
                button.disabled = true;
                if (button.textContent === questionData.answer) {
                    button.classList.add('correct');
                } else if (button.textContent === selectedOption) {
                    button.classList.add('wrong');
                }
            });

            if (selectedOption === questionData.answer) {
                ahzabQuizFeedbackEl.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ‰';
                ahzabQuizFeedbackEl.style.color = '#2E8B57'; // Green
            } else {
                ahzabQuizFeedbackEl.textContent = `Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: ${questionData.answer} ğŸ˜`;
                ahzabQuizFeedbackEl.style.color = '#CD5C5C'; // Red
            }
            ahzabQuizNextBtn.style.display = 'block';
        }

        ahzabQuizNextBtn.addEventListener('click', () => {
            ahzabCurrentQuizQuestionIndex++;
            loadAhzabQuizQuestion();
        });


        // --- Game 3: Sumood Word Game (Scramble) ---
        const sumoodScrambledWordEl = document.getElementById('sumood-scrambled-word');
        const sumoodWordInput = document.getElementById('sumood-word-input');
        const sumoodScrambleCheckBtn = document.getElementById('sumood-scramble-check-btn');
        const sumoodScrambleFeedback = document.getElementById('sumood-scramble-feedback');
        let sumoodCorrectWord = '';
        const sumoodWordsList = [
            { word: "ØµØ¨Ø±", hint: "Ø®ÙÙ„ÙÙ‚ Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ø­ØµØ§Ø± Ø§Ù„Ø·ÙˆÙŠÙ„" },
            { word: "Ø«Ø¨Ø§Øª", hint: "Ù…Ø§ Ø£Ø¸Ù‡Ø±Ù‡ Ø§Ù„Ù…Ø³Ù„Ù…ÙˆÙ† Ø±ØºÙ… Ø§Ù„Ø¬ÙˆØ¹ ÙˆØ§Ù„Ø¨Ø±Ø¯" },
            { word: "Ø¥ÙŠÙ…Ø§Ù†", hint: "Ù…ØµØ¯Ø± Ù‚ÙˆØ© Ø§Ù„Ù…Ø³Ù„Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ø´Ø¯Ø§Ø¦Ø¯" },
            { word: "Ø®Ù†Ø¯Ù‚", hint: "Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø¯ÙØ§Ø¹ÙŠØ© Ø§Ù„ÙØ±ÙŠØ¯Ø©" },
            { word: "Ø¯Ø¹Ø§Ø¡", hint: "Ø³Ù„Ø§Ø­ Ø§Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† Ø§Ù„Ø£Ù‚ÙˆÙ‰" },
            { word: "Ø±ÙŠØ­", hint: "Ø¬Ù†Ø¯ Ù…Ù† Ø¬Ù†ÙˆØ¯ Ø§Ù„Ù„Ù‡ Ø£Ø±Ø³Ù„Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø­Ø²Ø§Ø¨" },
            { word: "ØªÙˆÙƒÙ„", hint: "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡" }
        ];

        function initializeSumoodWordGame() {
            sumoodWordInput.value = '';
            sumoodScrambleFeedback.textContent = '';
            const randomIndex = Math.floor(Math.random() * sumoodWordsList.length);
            sumoodCorrectWord = sumoodWordsList[randomIndex].word;
            sumoodScrambledWordEl.textContent = scrambleWord(sumoodCorrectWord);
            sumoodScrambleFeedback.textContent = `ØªÙ„Ù…ÙŠØ­: ${sumoodWordsList[randomIndex].hint}`;
            sumoodScrambleFeedback.style.color = 'var(--secondary-brown)';
        }

        function scrambleWord(word) {
            return word.split('').sort(() => 0.5 - Math.random()).join('');
        }

        sumoodScrambleCheckBtn.addEventListener('click', () => {
            if (sumoodWordInput.value.trim() === sumoodCorrectWord) {
                sumoodScrambleFeedback.textContent = 'ØµØ­ÙŠØ­! Ø£Ø­Ø³Ù†Øª! ğŸ‰';
                sumoodScrambleFeedback.style.color = '#2E8B57';
                sumoodWordInput.value = '';
                setTimeout(initializeSumoodWordGame, 1500); // Load new word after a short delay
            } else {
                sumoodScrambleFeedback.textContent = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. ğŸ˜”';
                sumoodScrambleFeedback.style.color = '#CD5C5C';
            }
        });
    </script>
</body>
</html>